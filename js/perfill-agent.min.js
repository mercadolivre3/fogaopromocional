var perfill=function(){"use strict";function e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function t(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach((function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})})),n}const n=()=>"undefined"!=typeof window,r=()=>"fetch"in window,o=()=>"navigator"in window;var i={supportsEnvironment:n,supportsNavigatorApi:o,supportsPerformanceApi:()=>"performance"in window,supportsBeaconOrFetch:()=>o()&&"sendBeacon"in window.navigator||r(),supportsFetchApi:r,supportsMatchMediaApi:()=>n()&&void 0!==window.matchMedia,supportsPreloadState:()=>n()&&"__PRELOADED_STATE__"in window,supportsWeakSet:()=>"WeakSet"in window,supportsLocalStorageApi:()=>"localStorage"in window};const a={},s={};var c={subscribe:(e,t)=>{s[e]=s[e]||[],s[e].push(t),(a[e]||[]).map((e=>t(e))),delete a[e]},queue:(e,t)=>{const n=s[e]||[];n.forEach((e=>e(t))),n.length||(a[e]=a[e]||[],a[e].push(t))}},l={CLIENT_COOKIES:"client-cookies",WEB_VITALS:"web-vitals",RESOURCE_TIMING:"resource-timing",PAGE_RENDER:"page-render",A11Y:"a11y",AVAILABILITY:"availability",CDN_HEALTH:"cdn-health",TRAFFIC_HEALTH:"traffic-health",SESSION_REPLAY:"session-replay"},d={endpoint:"https://events.mercadolibre.com/v2/perf-metric",deviceInfoMetrics:["ram-size","cpu-cores"],connectionInfoMetrics:["network-type","network-speed","user-agent","save-data","rtt"],clientInfo:["name","version"],tags:["platform","site","application","device","webview","scope"],browserInfoMetrics:["d2id","url","dark-mode","session-id"]},u=d,h=d;var p={arrayOperator:e=>e.reduce(((e,t)=>e.concat(t)),[]),objectOperator:e=>Object.keys(e).reduce(((t,n)=>{const r=e[n],o="object"!=typeof r||Array.isArray(r)||null===r?{[n]:r}:r;return Object.assign(t,o)}),{})};const m=d,{objectOperator:f}=p;var g=f([m,{thresholdEntries:{img:25e4,script:17e4,style:5e4},fileSupport:{img:["apng","avif","gif","jpg","jpeg","jfif","pjpeg","pjp","png","svg","webp"],script:["js"],style:["css"]}}]),v=d;const y=d,{objectOperator:I}=p;var S=I([y,{endpoint:"https://events.mercadolibre.com/dom"}]);const C=d,{objectOperator:E}=p,T=1e6;var b=E([C,{endpoint:e=>`https://events.mercadolibre.com/v1/media-storage-service/session-replay-store-${e}/assets`,RRWEB_EVENT_TYPES:{DomContentLoaded:0,Load:1,FullSnapshot:2,IncrementalSnapshot:3,Meta:4,Custom:5},MAX_PAYLOAD_SIZE:T,PAYLOAD_SIZE:999e3,MAX_MLDATA_WAITING_TIME:3e3,CHUNKS_EXPIRATION_TIME:24e4,MAX_CHUNKS_SIZE:50,MAX_FLUSH_TIME:3e4}]);const w=d,{objectOperator:A}=p;var N=A([w,{metricSupport:["css","img","link","script","other"]}]);var M=(e={},t=[])=>t.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{}),O={AVAILABILITY_FAILURE:"failure",AVAILABILITY_TRANSFER_SIZE:"transfersize",AVAILABILITY_BROWSER_ERRORS:"errors-js",BROWSER:"browser",WINDOW_DOM:"window-dom",D2ID:"d2id",NETWORK_TYPE:"network-type",NETWORK_SPEED:"network-speed",USER_AGENT:"user-agent",RAM_SIZE:"ram-size",CPU_CORES:"cpu-cores",WINDOW_WIDTH:"window-width",WINDOW_HEIGHT:"window-height",LCP:"lcp",CLS:"cls",FCP:"fcp",FID:"fid",TBT:"tbt",INP:"inp",TTFB:"time-to-first-byte",DNS_LOOKUP_TIME:"dns-lookup-time",DOWNLOAD_TIME:"download-time",FETCH_TIME:"fetch-time",HEADER_SIZE:"header-size",TOTAL_TIME:"total-time",WORKER_TIME:"worker-time",HYDRATE_COMPLETE:"hydrate-complete",HYDRATE_DURATION:"hydrate-duration",REDIRECT_COUNT:"redirect-count",DOM_COMPLETE:"dom-complete",DOM_INTERACTIVE:"dom-interactive",DOM_CONTENT_LOADED_END:"dom-content-loaded-end",DOM_CONTENT_LOADED_START:"dom-content-loaded-start",DOM_CONTENT_LOADED:"dom-content-loaded",ONLOAD:"onload",ONLOAD_END:"onload-end",ONLOAD_START:"onload-start",REQUEST_START:"request-start",RESPONSE_START:"response-start",RESPONSE_END:"response-end",RESPONSE_TIME:"response-time",NAVIGATION_TYPE:"navigation-type",NAVIGATION_TIMING:"navigationtiming",INITIAL_CONTENT_SIZE:"initial-content-size",DARK_MODE:"dark-mode",REDUCED_MOTION:"reduced-motion",REDUCED_COLOR:"reduced-contrast",URL:"url",X_CDN:"cdn",DURATION_SUM:"duration-sum",RESOURCE_SIZE:"resources-size",RESOURCE_FAILURE:"resources-failure",RESOURCE_SUCCESS:"resources-success",DEBUG_TARGET_LCP:"debug-target-lcp",DEBUG_TARGET_FID:"debug-target-fid",DEBUG_TARGET_CLS:"debug-target-cls",DEBUG_TARGET_INP:"debug-target-inp",RESOURCE_TIMING:"resourceTiming",SESSION_REPLAY:"session-replay",SESSION_REPLAY_CTX:"session-replay-ctx",SESSION_REPLAY_START:"start-recording",SESSION_REPLAY_STOP:"stop-recording",TRACEABILITY_ID:"traceability-id",APP_NAME:"application",SCOPE_NAME:"scope",DEVICE:"device",PLATFORM_ID:"platform",SITE_ID:"site",WEBVIEW:"webview",SESSION_ID:"session-id",MLDATA_SESSION_ID:"_mldataSessionId",REQUEST_ID:"requestId",VIEW_NAME:"view-name",CUSTOM_ATTRIBUTES:"custom-attributes",USER_ID:"user-id",CONTEXT_ID:"context-id",FRONTEND_SESSION_ID:"frontend-session-id"};const D=M,{WEB_VITALS:R}=l,{FCP:k,LCP:_,FID:x,CLS:L,TBT:F,INP:B,DNS_LOOKUP_TIME:P,DOWNLOAD_TIME:U,FETCH_TIME:W,HEADER_SIZE:V,TTFB:G,TOTAL_TIME:j,WORKER_TIME:Y,REDIRECT_COUNT:Z,DOM_COMPLETE:H,DOM_INTERACTIVE:K,DOM_CONTENT_LOADED_END:z,DOM_CONTENT_LOADED_START:J,DOM_CONTENT_LOADED:X,ONLOAD_END:Q,ONLOAD_START:q,ONLOAD:$,REQUEST_START:ee,RESPONSE_START:te,RESPONSE_END:ne,RESPONSE_TIME:re,NAVIGATION_TYPE:oe,INITIAL_CONTENT_SIZE:ie,REDUCED_MOTION:ae,REDUCED_COLOR:se,DEBUG_TARGET_LCP:ce,DEBUG_TARGET_CLS:le,DEBUG_TARGET_FID:de,DEBUG_TARGET_INP:ue}=O,he=[k,_,x,L,F,B,P,U,W,V,G,j,Y,Z,H,K,z,J,X,Q,q,$,ee,te,ne,re,oe,ie,ae,se,ce,le,de,ue],pe=[k,_,L];"undefined"!=typeof window&&"PerformanceEventTiming"in window&&"interactionId"in window.PerformanceEventTiming.prototype&&pe.push(B);var me=(e,t)=>{const n=D(t,he);if(!Object.keys(n).length)throw new Error("Metrics not found");const r=Object.keys(n);if(!pe.every((e=>-1!==r.indexOf(e))))throw new Error("Metrics missing");return{name:R,data:n}};const{RESOURCE_TIMING:fe}=l;var ge=(e,t)=>t&&t.resources&&t.resources.length?{name:fe,data:t}:null;const ve=M,{PAGE_RENDER:ye}=l,{HYDRATE_COMPLETE:Ie,HYDRATE_DURATION:Se}=O,Ce=[Ie,Se];var Ee=(e,t)=>{const n=ve(t,Ce);if(!Object.keys(n).length)throw new Error("Metrics not found");return{name:ye,data:n}};var Te=(e,t)=>e.reduce(((e,t)=>e.replace(new RegExp(t.original,"g"),t.translated)),t);const{WEB_VITALS:be,PAGE_RENDER:we,A11Y:Ae,AVAILABILITY:Ne,CDN_HEALTH:Me}=l,Oe=u,De=h,Re=S,ke=g,_e=v,xe=d,{REQUEST_ID:Le}=O,{objectOperator:Fe}=p,Be={[be]:Oe,[we]:De,[Ae]:Re,[Ne]:ke,[Me]:_e,commons:xe};var Pe={prepareConfiguration:e=>{const{platform:t,site:n,device:r,application:o,initiatives:i,scope:a,webview:s}=e,c=e[Le];if(!Array.isArray(i))return null;if(t&&n&&r&&o&&i){const e={platform:t,site:n,device:r,application:o,webview:s,initiatives:i.map((e=>Fe({i:e,sent:!1})))};return c&&(e[Le]=c),a&&(e.scope=a),e}return null},getConfiguration:(e,t="commons",n=null)=>e in Be[t]?Be[t][e]:n};const Ue=M,We=Te,{objectOperator:Ve}=p,{getConfiguration:Ge}=Pe,je="commons",Ye=/^([a-zA-Z]+)-(iOS|Android|AndroidNoPS|SmartPOS)?(?:\/|%2F)((?:\d+\.){2}\d+)/,Ze=[{original:"SmartPOS",translated:"Android"},{original:"AndroidNoPS",translated:"Android"}],He=(e,t=je)=>({tags:Ue(e,Ge("tags",t,[]))}),Ke=(e,t)=>{const n=Ue(t,["device","webview"]),r=n.webview&&"mobile"===n.device||!1,o=e["user-agent"]||"",i=Ye.exec(o),a=i?We(Ze,i[2]).toLowerCase():null;if(n.webview&&!a)throw new Error("Unknown device native type");return`${r?"webview":"web"}/${r?a:n.device}`};var ze={prepareTags:He,prepareEventTags:(e,t,n=je)=>{const{tags:r}=He(t,n);return{tags:Ve({tags:r,device:Ke(e,t)})}},prepareDeviceInfo:(e,t=je)=>({"device-info":Ue(e,Ge("deviceInfoMetrics",t,[]))}),prepareClientInfo:()=>({"client-info":{name:"perfill-agent",version:"3.14.0"}}),prepareConnectionInfo:(e,t=je)=>({"connection-info":Ue(e,Ge("connectionInfoMetrics",t,[]))}),prepareBrowserInfo:(e,t=je)=>({"browser-info":Ue(e,Ge("browserInfoMetrics",t,[]))}),prepareDeviceType:Ke};const Je=M,{A11Y:Xe}=l,{WINDOW_DOM:Qe,WINDOW_WIDTH:qe,WINDOW_HEIGHT:$e}=O,{deviceInfoMetrics:et,connectionInfoMetrics:tt,browserInfoMetrics:nt}=S,{prepareEventTags:rt,prepareClientInfo:ot}=ze,{arrayOperator:it,objectOperator:at}=p,st=[Qe,qe,$e];var ct=(e,t)=>{const{name:n,version:r}=ot()["client-info"],{tags:o}=rt(t,e,Xe),i=Je(t,it([et,tt,nt,st]));if(!Object.keys(i).length)throw new Error("Metrics not found");const a=at({metricsCollected:i,tags:o,client_name:n,client_version:r}),s=[];return Object.keys(a).forEach((e=>{if("window-dom"!==e)s.push([e.replace("-","_"),a[e]]);else{const e=new Blob([a["window-dom"]],{type:"text/html"});s.push(["file",e,"dom.html"])}})),{name:Xe,data:s}};const lt=M,{AVAILABILITY:dt}=l,{AVAILABILITY_FAILURE:ut,AVAILABILITY_TRANSFER_SIZE:ht,AVAILABILITY_BROWSER_ERRORS:pt}=O,mt=[ut,ht,pt];var ft=(e,t)=>{const n=lt(t,mt);if(!Object.keys(n).length)throw new Error("Metrics not found");return{name:dt,data:{[ut]:n[ut],[ht]:n[ht],[pt]:n[pt]}}};const gt=M,{objectOperator:vt}=p,{CDN_HEALTH:yt}=l,{DURATION_SUM:It,RESOURCE_SIZE:St,RESOURCE_FAILURE:Ct,RESOURCE_SUCCESS:Et,X_CDN:Tt,AVAILABILITY_FAILURE:bt}=O,wt=[Tt,St,It],At=[Tt];const Nt=me,Mt=ge,Ot=Ee,Dt=ct,Rt=ft,kt=(e,t)=>{const n=gt(t,wt);if(!Object.keys(n).length)throw new Error("Metrics not found");const r=Object.keys(n);if(!At.every((e=>-1!==r.indexOf(e))))throw new Error("Metrics missing");const o=(t[bt]||[]).length,i=n[St]-o;return{name:yt,data:vt({collection:n,[Ct]:o,[Et]:i})}},{WEB_VITALS:_t,PAGE_RENDER:xt,A11Y:Lt,AVAILABILITY:Ft,CDN_HEALTH:Bt,RESOURCE_TIMING:Pt}=l,{objectOperator:Ut}=p,{prepareEventTags:Wt,prepareDeviceInfo:Vt,prepareConnectionInfo:Gt,prepareClientInfo:jt,prepareBrowserInfo:Yt}=ze,Zt={[_t]:{builder:Nt},[Pt]:{builder:Mt},[xt]:{builder:Ot},[Lt]:{builder:Dt},[Ft]:{builder:Rt},[Bt]:{builder:kt}},Ht=(e,t,n)=>{const{builder:r}=(e=>{if(e.id in Zt)return Zt[e.id];throw new Error("Initiative not found")})(e);return r(t,n)};var Kt={preparePayload:(e,t,n)=>{const r=((e,t,n)=>{try{const r=Ht(e,t,n),o=Wt(n,t);return{"event-info":Ut({initiativePayload:r,tags:o})}}catch(e){return null}})(e,t,n);if(!r)return null;const o=jt(),i=Vt(n),a=Gt(n),s=Yt(n);return Ut({clientInfo:o,eventInfo:r,deviceInfo:i,connectionInfo:a,browserInfo:s})},prepareFormData:(e,t,n)=>{try{const{data:r}=Ht(e,t,n),o=new FormData;return r.forEach((e=>{const[t,n,r]=e;r?o.append(t,n,r):o.append(t,n)})),o}catch(e){return null}}};const zt=(e,t,n=!0)=>{window.fetch(e,{method:"POST",body:t,headers:{"Content-Type":"application/json"},keepalive:n}).then((e=>e.text())).catch((e=>e))};var Jt={beaconWithFetchFallback:(e,t)=>{const n=JSON.stringify(t);window.navigator&&window.navigator.sendBeacon&&window.navigator.sendBeacon(e,n)||zt(e,n)},sendWithFetch:zt,sendFormDataWithFetch:(e,t,n=!0)=>{window.fetch(e,{method:"POST",body:t,keepalive:n}).then((e=>e.text())).catch((e=>e))},getWithFetch:(e,t={})=>window.fetch(e,t)};const{endpoint:Xt}=u,{endpoint:Qt}=h,{endpoint:qt}=g,{endpoint:$t}=v,{endpoint:en}=S,{endpoint:tn}=b,{endpoint:nn}=N,{preparePayload:rn,prepareFormData:on}=Kt,{beaconWithFetchFallback:an,sendFormDataWithFetch:sn}=Jt,{WEB_VITALS:cn,PAGE_RENDER:ln,A11Y:dn,AVAILABILITY:un,CDN_HEALTH:hn,RESOURCE_TIMING:pn,SESSION_REPLAY:mn}=l,fn={},gn={[cn]:Xt,[ln]:Qt,[dn]:en,[un]:qt,[hn]:$t,[pn]:nn,[mn]:tn},vn=e=>void 0!==fn[e];var yn={trackMetric:(e,t)=>{fn[e]=t},appendMetric:(e,t)=>{(fn[e]=fn[e]||[]).push(t)},getMetricsCollected:()=>fn,sendMetrics:(e,t,n)=>{const r=rn(e,t,n);return!!r&&(an(gn[e.id],r),!0)},sendFormData:(e,t,n)=>{const r=on(e,t,n);return!!r&&(sn(gn[e.id],r,!1),!0)},clearMetric:e=>{vn(e)&&delete fn[e]},checkMetric:vn,getMetric:(e,t=null)=>vn(e)?fn[e]:t};const{trackMetric:In}=yn,{supportsNavigatorApi:Sn}=i,{RAM_SIZE:Cn}=O;var En=()=>{Sn()&&(window.navigator.deviceMemory&&In(Cn,`${window.navigator.deviceMemory}`),window.navigator.hardwareConcurrency&&In("cpu-cores",`${window.navigator.hardwareConcurrency}`))};const{trackMetric:Tn}=yn,{supportsNavigatorApi:bn}=i,{NETWORK_SPEED:wn,NETWORK_TYPE:An,USER_AGENT:Nn}=O;var Mn=()=>{if(!bn())return;const{navigator:e}=window;e.connection&&(e.connection.effectiveType&&Tn(An,e.connection.effectiveType),e.connection.downlink&&Tn(wn,`${e.connection.downlink}`),"saveData"in e.connection&&Tn("save-data",e.connection.saveData),e.connection.rtt&&Tn("rtt",`${e.connection.rtt}`)),e.userAgent&&Tn(Nn,e.userAgent)};var On={toFixedNumber:(e,t=6)=>Number.isNaN(e)||!e||Number.isInteger(e)||"string"==typeof e?e:parseFloat(e.toFixed(t)),truncateDecimals:(e,t=2)=>Number.isNaN(e)||!e||"string"==typeof e||Number.isNaN(t)||"string"==typeof t?e:Math.trunc(e*10**t)/10**t,BIGQUERY_MAX_DECIMALS:6};let Dn=-1;var Rn={getBFCacheRestoreTime:()=>Dn,onBFCacheRestore:e=>{window.addEventListener("pageshow",(t=>{t.persisted&&(Dn=t.timeStamp,e(t))}),!0)}};const{trackMetric:kn}=yn,{supportsPerformanceApi:_n}=i,{toFixedNumber:xn}=On,{getBFCacheRestoreTime:Ln,onBFCacheRestore:Fn}=Rn,{REDIRECT_COUNT:Bn,DOM_COMPLETE:Pn,DOM_INTERACTIVE:Un,DOM_CONTENT_LOADED_END:Wn,DOM_CONTENT_LOADED_START:Vn,DOM_CONTENT_LOADED:Gn,ONLOAD_END:jn,ONLOAD_START:Yn,ONLOAD:Zn,REQUEST_START:Hn,RESPONSE_START:Kn,RESPONSE_END:zn,RESPONSE_TIME:Jn,NAVIGATION_TYPE:Xn}=O,Qn=()=>{if(!_n())return;const[e]=window.performance.getEntriesByType("navigation");if(e){const{domComplete:t,domContentLoadedEventEnd:n,domContentLoadedEventStart:r,domInteractive:o,loadEventEnd:i,loadEventStart:a,redirectCount:s,requestStart:c,responseStart:l,responseEnd:d,type:u,activationStart:h}=e;if(s&&kn(Bn,s),t&&kn(Pn,xn(t)),o&&kn(Un,xn(o)),n&&kn(Wn,xn(n)),r&&kn(Vn,xn(r)),r&&n&&kn(Gn,xn(n-r)),i&&kn(jn,xn(i)),a&&kn(Yn,xn(a)),a&&i&&kn(Zn,xn(i-a)),c&&kn(Hn,xn(c)),l&&kn(Kn,xn(l)),d&&kn(zn,xn(d)),l&&d&&kn(Jn,xn(d-l)),u){let t=u;const n=e;Ln()>=0?t="back-forward-cache":n&&(document.prerendering||h>0?t="prerender":document.wasDiscarded?t="restore":n.type&&(t=n.type.replace(/_/g,"-"))),kn(Xn,t)}}};Fn((()=>{Qn()}));var qn,$n,er=Qn,tr={isResourceTiming:!1,isElementTiming:!1,maxTime:3e4,reportOptions:{}},nr=globalThis,rr=nr.console,or=nr.navigator,ir=nr.performance,ar=function(){return or.deviceMemory},sr=function(){return or.hardwareConcurrency},cr="mark.",lr=function(){return ir&&!!ir.getEntriesByType&&!!ir.now&&!!ir.mark},dr="4g",ur=!1,hr={},pr={value:0},mr={value:{beacon:0,css:0,fetch:0,img:0,other:0,script:0,total:0,xmlhttprequest:0}},fr={value:0},gr={value:0},vr={},yr={isHidden:!1,didChange:!1},Ir=function(){yr.isHidden=!1,document.hidden&&(yr.isHidden=document.hidden,yr.didChange=!0)},Sr=function(e,t){try{var n=new PerformanceObserver((function(e){t(e.getEntries())}));return n.observe({type:e,buffered:!0}),n}catch(e){rr.warn("Perfume.js:",e)}return null},Cr=function(){return!!(sr()&&sr()<=4)||!!(ar()&&ar()<=4)},Er=function(e,t){switch(e){case"slow-2g":case"2g":case"3g":return!0;default:return Cr()||t}},Tr=function(e){return parseFloat(e.toFixed(4))},br=function(e){return"number"!=typeof e?null:Tr(e/Math.pow(1024,2))},wr=function(e,t,n,r,o){var i,a=function(){tr.analyticsTracker&&(yr.isHidden&&!["CLS","INP"].includes(e)||tr.analyticsTracker({attribution:r,metricName:e,data:t,navigatorInformation:or?{deviceMemory:ar()||0,hardwareConcurrency:sr()||0,serviceWorkerStatus:"serviceWorker"in or?or.serviceWorker.controller?"controlled":"supported":"unsupported",isLowEndDevice:Cr(),isLowEndExperience:Er(dr,ur)}:{},rating:n,navigationType:o}))};["CLS","INP"].includes(e)?a():(i=a,"requestIdleCallback"in nr?nr.requestIdleCallback(i,{timeout:3e3}):i())},Ar=function(e){e.forEach((function(e){if(!("self"!==e.name||e.startTime<pr.value)){var t=e.duration-50;t>0&&(fr.value+=t,gr.value+=t)}}))};!function(e){e.instant="instant",e.quick="quick",e.moderate="moderate",e.slow="slow",e.unavoidable="unavoidable"}(qn||(qn={}));var Nr,Mr,Or,Dr,Rr,kr=(($n={})[qn.instant]={vitalsThresholds:[100,200],maxOutlierThreshold:1e4},$n[qn.quick]={vitalsThresholds:[200,500],maxOutlierThreshold:1e4},$n[qn.moderate]={vitalsThresholds:[500,1e3],maxOutlierThreshold:1e4},$n[qn.slow]={vitalsThresholds:[1e3,2e3],maxOutlierThreshold:1e4},$n[qn.unavoidable]={vitalsThresholds:[2e3,5e3],maxOutlierThreshold:2e4},$n),_r={RT:[100,200],TBT:[200,600],NTBT:[200,600]},xr=function(e,t){return _r[e]?t<=_r[e][0]?"good":t<=_r[e][1]?"needsImprovement":"poor":null},Lr=function(e,t,n){Object.keys(t).forEach((function(e){"number"==typeof t[e]&&(t[e]=Tr(t[e]))})),wr(e,t,null,n||{})},Fr=function(e){var t=e.attribution,n=e.name,r=e.rating,o=e.value,i=e.navigationType;"FCP"===n&&(pr.value=o),["FCP","LCP"].includes(n)&&!vr[0]&&(vr[0]=Sr("longtask",Ar)),"FID"===n&&setTimeout((function(){yr.didChange||(Fr({attribution:t,name:"TBT",rating:xr("TBT",fr.value),value:fr.value,navigationType:i}),Lr("dataConsumption",mr.value))}),1e4);var a=Tr(o);a<=tr.maxTime&&a>=0&&wr(n,a,r,t,i)},Br=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},Pr=function(e){if("loading"===document.readyState)return"loading";var t=Br();if(t){if(e<t.domInteractive)return"loading";if(0===t.domContentLoadedEventStart||e<t.domContentLoadedEventStart)return"dom-interactive";if(0===t.domComplete||e<t.domComplete)return"dom-content-loaded"}return"complete"},Ur=function(e){var t=e.nodeName;return 1===e.nodeType?t.toLowerCase():t.toUpperCase().replace(/^#/,"")},Wr=function(e,t){var n="";try{for(;e&&9!==e.nodeType;){var r=e,o=r.id?"#"+r.id:Ur(r)+(r.classList&&r.classList.value&&r.classList.value.trim()&&r.classList.value.trim().length?"."+r.classList.value.trim().replace(/\s+/g,"."):"");if(n.length+o.length>(t||100)-1)return n||o;if(n=n?o+">"+n:o,r.id)break;e=r.parentNode}}catch(e){}return n},Vr=-1,Gr=function(){return Vr},jr=function(e){addEventListener("pageshow",(function(t){t.persisted&&(Vr=t.timeStamp,e(t))}),!0)},Yr=function(){var e=Br();return e&&e.activationStart||0},Zr=function(e,t){var n=Br(),r="navigate";return Gr()>=0?r="back-forward-cache":n&&(document.prerendering||Yr()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},Hr=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},Kr=function(e,t,n,r){var o,i;return function(a){t.value>=0&&(a||r)&&((i=t.value-(o||0))||void 0===o)&&(o=t.value,t.delta=i,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},zr=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},Jr=function(e){var t=function(t){"pagehide"!==t.type&&"hidden"!==document.visibilityState||e(t)};addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0)},Xr=function(e){var t=!1;return function(n){t||(e(n),t=!0)}},Qr=-1,qr=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},$r=function(e){"hidden"===document.visibilityState&&Qr>-1&&(Qr="visibilitychange"===e.type?e.timeStamp:0,to())},eo=function(){addEventListener("visibilitychange",$r,!0),addEventListener("prerenderingchange",$r,!0)},to=function(){removeEventListener("visibilitychange",$r,!0),removeEventListener("prerenderingchange",$r,!0)},no=function(){return Qr<0&&(Qr=qr(),eo(),jr((function(){setTimeout((function(){Qr=qr(),eo()}),0)}))),{get firstHiddenTime(){return Qr}}},ro=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},oo=[1800,3e3],io=function(e,t){t=t||{},ro((function(){var n,r=no(),o=Zr("FCP"),i=Hr("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(i.disconnect(),e.startTime<r.firstHiddenTime&&(o.value=Math.max(e.startTime-Yr(),0),o.entries.push(e),n(!0)))}))}));i&&(n=Kr(e,o,oo,t.reportAllChanges),jr((function(r){o=Zr("FCP"),n=Kr(e,o,oo,t.reportAllChanges),zr((function(){o.value=performance.now()-r.timeStamp,n(!0)}))})))}))},ao=[.1,.25],so={passive:!0,capture:!0},co=new Date,lo=function(e,t){Nr||(Nr=t,Mr=e,Or=new Date,po(removeEventListener),uo())},uo=function(){if(Mr>=0&&Mr<Or-co){var e={entryType:"first-input",name:Nr.type,target:Nr.target,cancelable:Nr.cancelable,startTime:Nr.timeStamp,processingStart:Nr.timeStamp+Mr};Dr.forEach((function(t){t(e)})),Dr=[]}},ho=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){lo(e,t),o()},r=function(){o()},o=function(){removeEventListener("pointerup",n,so),removeEventListener("pointercancel",r,so)};addEventListener("pointerup",n,so),addEventListener("pointercancel",r,so)}(t,e):lo(t,e)}},po=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,ho,so)}))},mo=[100,300],fo=0,go=1/0,vo=0,yo=function(e){e.forEach((function(e){e.interactionId&&(go=Math.min(go,e.interactionId),vo=Math.max(vo,e.interactionId),fo=vo?(vo-go)/7+1:0)}))},Io=function(){return Rr?fo:performance.interactionCount||0},So=[200,500],Co=0,Eo=function(){return Io()-Co},To=[],bo={},wo=function(e){var t=To[To.length-1],n=bo[e.interactionId];if(n||To.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};bo[r.id]=r,To.push(r)}To.sort((function(e,t){return t.latency-e.latency})),To.splice(10).forEach((function(e){delete bo[e.id]}))}},Ao=function(e,t){!function(e,t){t=t||{},ro((function(){var n;"interactionCount"in performance||Rr||(Rr=Hr("event",yo,{type:"event",buffered:!0,durationThreshold:0}));var r,o=Zr("INP"),i=function(e){e.forEach((function(e){e.interactionId&&wo(e),"first-input"===e.entryType&&!To.some((function(t){return t.entries.some((function(t){return e.duration===t.duration&&e.startTime===t.startTime}))}))&&wo(e)}));var t,n=(t=Math.min(To.length-1,Math.floor(Eo()/50)),To[t]);n&&n.latency!==o.value&&(o.value=n.latency,o.entries=n.entries,r())},a=Hr("event",i,{durationThreshold:null!==(n=t.durationThreshold)&&void 0!==n?n:40});r=Kr(e,o,So,t.reportAllChanges),a&&("PerformanceEventTiming"in window&&"interactionId"in PerformanceEventTiming.prototype&&a.observe({type:"first-input",buffered:!0}),Jr((function(){i(a.takeRecords()),o.value<0&&Eo()>0&&(o.value=0,o.entries=[]),r(!0)})),jr((function(){To=[],Co=Io(),o=Zr("INP"),r=Kr(e,o,So,t.reportAllChanges)})))}))}((function(t){!function(e){if(e.entries.length){var t=e.entries.sort((function(e,t){return t.duration-e.duration||t.processingEnd-t.processingStart-(e.processingEnd-e.processingStart)}))[0],n=e.entries.find((function(e){return e.target}));e.attribution={eventTarget:Wr(n&&n.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:Pr(t.startTime)}}else e.attribution={}}(t),e(t)}),t)},No=[2500,4e3],Mo={},Oo=[800,1800],Do=function e(t){document.prerendering?ro((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},Ro=function(e,t){t=t||{};var n=Zr("TTFB"),r=Kr(e,n,Oo,t.reportAllChanges);Do((function(){var o=Br();if(o){var i=o.responseStart;if(i<=0||i>performance.now())return;n.value=Math.max(i-Yr(),0),n.entries=[o],r(!0),jr((function(){n=Zr("TTFB",0),(r=Kr(e,n,Oo,t.reportAllChanges))(!0)}))}}))},ko=function(e){e.forEach((function(e){e.identifier&&Fr({attribution:{identifier:e.identifier},name:"ET",rating:null,value:e.startTime})}))},_o=function(e){e.forEach((function(e){if(tr.isResourceTiming&&Lr("resourceTiming",e),e.decodedBodySize&&e.initiatorType){var t=e.decodedBodySize/1e3;mr.value[e.initiatorType]+=t,mr.value.total+=t}}))},xo=function(){!function(e,t){Ro((function(e){!function(e){if(e.entries.length){var t=e.entries[0],n=t.activationStart||0,r=Math.max(t.domainLookupStart-n,0),o=Math.max(t.connectStart-n,0),i=Math.max(t.requestStart-n,0);e.attribution={waitingTime:r,dnsTime:o-r,connectionTime:i-o,requestTime:e.value-i,navigationEntry:t}}else e.attribution={waitingTime:0,dnsTime:0,connectionTime:0,requestTime:0}}(e),function(e){e.value>0&&Fr(e)}(e)}),t)}(0,tr.reportOptions.ttfb),function(e,t){!function(e,t){t=t||{},io(Xr((function(){var n,r=Zr("CLS",0),o=0,i=[],a=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=i[0],n=i[i.length-1];o&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(o+=e.value,i.push(e)):(o=e.value,i=[e])}})),o>r.value&&(r.value=o,r.entries=i,n())},s=Hr("layout-shift",a);s&&(n=Kr(e,r,ao,t.reportAllChanges),Jr((function(){a(s.takeRecords()),n(!0)})),jr((function(){o=0,r=Zr("CLS",0),n=Kr(e,r,ao,t.reportAllChanges),zr((function(){return n()}))})),setTimeout(n,0))})))}((function(e){!function(e){if(e.entries.length){var t=e.entries.reduce((function(e,t){return e&&e.value>t.value?e:t}));if(t&&t.sources&&t.sources.length){var n=(r=t.sources).find((function(e){return e.node&&1===e.node.nodeType}))||r[0];if(n)return void(e.attribution={largestShiftTarget:Wr(n.node),largestShiftTime:t.startTime,largestShiftValue:t.value,largestShiftSource:n,largestShiftEntry:t,loadState:Pr(t.startTime)})}}var r;e.attribution={}}(e),function(e){Fr(e)}(e)}),t)}(0,tr.reportOptions.cls),function(e,t){io((function(e){!function(e){if(e.entries.length){var t=Br(),n=e.entries[e.entries.length-1];if(t){var r=t.activationStart||0,o=Math.max(0,t.responseStart-r);return void(e.attribution={timeToFirstByte:o,firstByteToFCP:e.value-o,loadState:Pr(e.entries[0].startTime),navigationEntry:t,fcpEntry:n})}}e.attribution={timeToFirstByte:0,firstByteToFCP:e.value,loadState:Pr(Gr())}}(e),function(e){Fr(e)}(e)}),t)}(0,tr.reportOptions.fcp),function(e,t){!function(e,t){t=t||{},ro((function(){var n,r=no(),o=Zr("FID"),i=function(e){e.startTime<r.firstHiddenTime&&(o.value=e.processingStart-e.startTime,o.entries.push(e),n(!0))},a=function(e){e.forEach(i)},s=Hr("first-input",a);n=Kr(e,o,mo,t.reportAllChanges),s&&Jr(Xr((function(){a(s.takeRecords()),s.disconnect()}))),s&&jr((function(){var r;o=Zr("FID"),n=Kr(e,o,mo,t.reportAllChanges),Dr=[],Mr=-1,Nr=null,po(addEventListener),r=i,Dr.push(r),uo()}))}))}((function(e){!function(e){var t=e.entries[0];e.attribution={eventTarget:Wr(t.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:Pr(t.startTime)}}(e),function(e){Fr(e)}(e)}),t)}(0,tr.reportOptions.fid),function(e,t){!function(e,t){t=t||{},ro((function(){var n,r=no(),o=Zr("LCP"),i=function(e){var t=e[e.length-1];t&&t.startTime<r.firstHiddenTime&&(o.value=Math.max(t.startTime-Yr(),0),o.entries=[t],n())},a=Hr("largest-contentful-paint",i);if(a){n=Kr(e,o,No,t.reportAllChanges);var s=Xr((function(){Mo[o.id]||(i(a.takeRecords()),a.disconnect(),Mo[o.id]=!0,n(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,(function(){return setTimeout(s,0)}),!0)})),Jr(s),jr((function(r){o=Zr("LCP"),n=Kr(e,o,No,t.reportAllChanges),zr((function(){o.value=performance.now()-r.timeStamp,Mo[o.id]=!0,n(!0)}))}))}}))}((function(e){!function(e){if(e.entries.length){var t=Br();if(t){var n=t.activationStart||0,r=e.entries[e.entries.length-1],o=r.url&&performance.getEntriesByType("resource").filter((function(e){return e.name===r.url}))[0],i=Math.max(0,t.responseStart-n),a=Math.max(i,o?(o.requestStart||o.startTime)-n:0),s=Math.max(a,o?o.responseEnd-n:0),c=Math.max(s,r?r.startTime-n:0),l={element:Wr(r.element),timeToFirstByte:i,resourceLoadDelay:a-i,resourceLoadTime:s-a,elementRenderDelay:c-s,navigationEntry:t,lcpEntry:r};return r.url&&(l.url=r.url),o&&(l.lcpResourceEntry=o),void(e.attribution=l)}}e.attribution={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadTime:0,elementRenderDelay:e.value}}(e),function(e){Fr(e)}(e)}),t)}(0,tr.reportOptions.lcp),Ao((function(e){return Fr(e)}),tr.reportOptions.inp),tr.isResourceTiming&&Sr("resource",_o),tr.isElementTiming&&Sr("element",ko)},Lo=function(e){var t="usageDetails"in e?e.usageDetails:{};Lr("storageEstimate",{quota:br(e.quota),usage:br(e.usage),caches:br(t.caches),indexedDB:br(t.indexedDB),serviceWorker:br(t.serviceWorkerRegistrations)})},Fo={finalMarkToStepsMap:{},startMarkToStepsMap:{},active:{},navigationSteps:{}},Bo=function(e){delete Fo.active[e]},Po=function(){return Fo.navigationSteps},Uo=function(e){var t;return null!==(t=Po()[e])&&void 0!==t?t:{}},Wo=function(e,t,n){var r="step."+e,o=ir.getEntriesByName(cr+t).length>0;if(ir.getEntriesByName(cr+n).length>0&&o&&tr.steps&&tr.steps[e]){var i=kr[tr.steps[e].threshold],a=i.maxOutlierThreshold,s=i.vitalsThresholds,c=ir.measure(r,cr+t,cr+n);if(c){var l=c.duration;if(l<=a){var d=function(e,t){return e<=t[0]?"good":e<=t[1]?"needsImprovement":"poor"}(l,s);l>=0&&(wr("userJourneyStep",l,d,{stepName:e},void 0),ir.measure("step.".concat(e,"_vitals_").concat(d),{start:c.startTime+c.duration,end:c.startTime+c.duration,detail:{type:"stepVital",duration:l}}))}}}},Vo=function(){var e=Po(),t=Fo.startMarkToStepsMap,n=Object.keys(e).length;if(0===n)return{};var r={},o=n-1,i=Uo(o);if(Object.keys(i).forEach((function(e){var n,o=null!==(n=t[e])&&void 0!==n?n:[];Object.keys(o).forEach((function(e){r[e]=!0}))})),n>1){var a=Uo(o-1);Object.keys(a).forEach((function(e){var n,o=null!==(n=t[e])&&void 0!==n?n:[];Object.keys(o).forEach((function(e){r[e]=!0}))}))}return r},Go=function(e){var t,n,r,o,i,a;if(Fo.finalMarkToStepsMap[e]){!function(e){var t=Fo.navigationSteps,n=Fo.finalMarkToStepsMap,r=Object.keys(t).length;if(0!==r){var o=r-1,i=Uo(o);if(i&&n[e]){var a=n[e];a&&Object.keys(a).forEach((function(e){if(i[e]){var n=Uo(o)||{};n[e]=!1,t[o]=n}if(r>1){var a=o-1,s=Uo(a);s[e]&&(s[e]=!1,t[a]=s)}}))}}}(e);var s=Fo.finalMarkToStepsMap[e];Object.keys(s).forEach((function(t){var n=s[t];n.forEach(Bo),Promise.all(n.map((function(n){return function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){return function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}(this,(function(r){switch(r.label){case 0:return[4,Wo(n,t,e)];case 1:return r.sent(),[2]}}))}))}))).catch((function(){}))}))}else n=e,r=Fo.navigationSteps,o=Object.keys(r).length,(a=Uo(i=(o>0?o:1)-1)||[])[n]=!0,r[i]=a,function(e){var t,n=null!==(t=Fo.startMarkToStepsMap[e])&&void 0!==t?t:[];Object.keys(n).forEach((function(e){Fo.active[e]||(Fo.active[e]=!0)}))}(e);var c=Vo();null===(t=tr.onMarkStep)||void 0===t||t.call(tr,e,Object.keys(c))},jo=function(e){lr()&&!hr[e]&&(hr[e]=!0,ir.mark("mark_".concat(e,"_start")))},Yo=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n=!0),lr()&&hr[e]){ir.mark("mark_".concat(e,"_end")),delete hr[e];var r=function(e){ir.measure(e,"mark_".concat(e,"_start"),"mark_".concat(e,"_end"));var t=ir.getEntriesByName(e).pop();return t&&"measure"===t.entryType?t.duration:-1}(e);n&&Lr(e,Tr(r),t)}},Zo=0,Ho=Object.freeze({__proto__:null,get IThresholdTier(){return qn},clear:function(e){delete hr[e],ir.clearMarks&&(ir.clearMarks("mark_".concat(e,"_start")),ir.clearMarks("mark_".concat(e,"_end")))},end:Yo,initPerfume:function(e){if(void 0===e&&(e={}),tr.analyticsTracker=e.analyticsTracker,tr.isResourceTiming=!!e.resourceTiming,tr.isElementTiming=!!e.elementTiming,tr.maxTime=e.maxMeasureTime||tr.maxTime,tr.reportOptions=e.reportOptions||tr.reportOptions,tr.steps=e.steps,tr.onMarkStep=e.onMarkStep,lr()){"PerformanceObserver"in nr&&xo(),void 0!==document.hidden&&document.addEventListener("visibilitychange",Ir);var t=function(){if(!lr())return{};var e=ir.getEntriesByType("navigation")[0];if(!e)return{};var t=e.responseStart,n=e.responseEnd;return{fetchTime:n-e.fetchStart,workerTime:e.workerStart>0?n-e.workerStart:0,totalTime:n-e.requestStart,downloadTime:n-t,timeToFirstByte:t-e.requestStart,headerSize:e.transferSize-e.encodedBodySize||0,dnsLookupTime:e.domainLookupEnd-e.domainLookupStart,redirectTime:e.redirectEnd-e.redirectStart}}();Lr("navigationTiming",t),t.redirectTime&&Fr({attribution:{},name:"RT",rating:xr("RT",t.redirectTime),value:t.redirectTime}),Lr("networkInformation",function(){if("connection"in or){var e=or.connection;return"object"!=typeof e?{}:(dr=e.effectiveType,ur=!!e.saveData,{downlink:e.downlink,effectiveType:e.effectiveType,rtt:e.rtt,saveData:!!e.saveData})}return{}}()),or&&or.storage&&"function"==typeof or.storage.estimate&&or.storage.estimate().then(Lo),tr.steps&&tr.steps&&(Fo.startMarkToStepsMap={},Fo.finalMarkToStepsMap={},Fo.active={},Fo.navigationSteps={},Object.entries(tr.steps).forEach((function(e){var t,n,r=e[0],o=e[1].marks,i=o[0],a=o[1],s=null!==(n=Fo.startMarkToStepsMap[i])&&void 0!==n?n:{};if(s[r]=!0,Fo.startMarkToStepsMap[i]=s,Fo.finalMarkToStepsMap[a]){var c=Fo.finalMarkToStepsMap[a][i]||[];c.push(r),Fo.finalMarkToStepsMap[a][i]=c}else Fo.finalMarkToStepsMap[a]=((t={})[i]=[r],t)})))}},markNTBT:function(){jo("ntbt"),gr.value=0,clearTimeout(Zo),Zo=setTimeout((function(){Yo("ntbt",{},!1),Fr({attribution:{},name:"NTBT",rating:xr("NTBT",gr.value),value:gr.value}),gr.value=0}),2e3)},markStep:function(e){lr()&&(ir.mark(cr+e),Go(e))},markStepOnce:function(e){0===ir.getEntriesByName(cr+e).length&&(ir.mark(cr+e),Go(e))},start:jo,trackUJNavigation:function(){var e,t=Object.keys(Fo.navigationSteps).length;Fo.navigationSteps[t]={};var n=Vo();null===(e=tr.onMarkStep)||void 0===e||e.call(tr,"",Object.keys(n))}}),Ko=t(Ho);const{initPerfume:zo}=Ko,{trackMetric:Jo,sendMetrics:Xo,getMetricsCollected:Qo}=yn,{onBFCacheRestore:qo}=Rn,{LCP:$o,CLS:ei,FID:ti,INP:ni,WORKER_TIME:ri,TOTAL_TIME:oi,TTFB:ii,HEADER_SIZE:ai,FETCH_TIME:si,DOWNLOAD_TIME:ci,DNS_LOOKUP_TIME:li,DEBUG_TARGET_LCP:di,DEBUG_TARGET_CLS:ui,DEBUG_TARGET_FID:hi,DEBUG_TARGET_INP:pi,NAVIGATION_TIMING:mi}=O;const{trackMetric:fi}=yn,{supportsEnvironment:gi,supportsMatchMediaApi:vi}=i,{D2ID:yi,DARK_MODE:Ii,REDUCED_MOTION:Si,REDUCED_COLOR:Ci,URL:Ei}=O,Ti=/(?:_d2id=)([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})/;var bi=()=>{const e=function(e){if(!e)return null;const t=e.match(Ti);return t?t[1]:t}("undefined"!=typeof document&&document.cookie);if(e&&fi(yi,`${e}`),gi()&&fi(Ei,`${window.location.origin}${window.location.pathname}`),vi()){fi(Ii,window.matchMedia("(prefers-color-scheme: dark)").matches);const e=!0===window.matchMedia("(prefers-reduced-motion: reduce)").matches||!0===window.matchMedia("(prefers-reduced-motion: reduce)").matches;fi(Si,e);const t=!0===window.matchMedia("(prefers-contrast: custom), (prefers-contrast: less), (prefers-contrast: more)").matches||!0===window.matchMedia("(forced-colors: active)").matches;fi(Ci,t)}};const{trackMetric:wi}=yn,{supportsPreloadState:Ai,supportsWeakSet:Ni}=i,{INITIAL_CONTENT_SIZE:Mi}=O;var Oi=()=>{try{if(Ai()&&Ni()){const e=JSON.stringify(window.__PRELOADED_STATE__,(()=>{const e=new WeakSet;return(t,n)=>{if("object"==typeof n&&null!==n){if(e.has(n))return;e.add(n)}return n}})());wi(Mi,e.length)}}catch(e){}};var Di={getCookie:(e,t=null)=>{const n=document.cookie.match(new RegExp(`(^| )${e}=([^;]+)`));return n?n[2]:t},setCookie:(e,t,n={})=>{document.cookie=`${e}=${t}; ${Object.keys(n).map((e=>`${e}=${n[e]}`)).join("; ")}`}};var Ri=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));const{trackMetric:ki}=yn,{SESSION_ID:_i,MLDATA_SESSION_ID:xi}=O,{getCookie:Li,setCookie:Fi}=Di,Bi=Ri;var Pi=()=>{const e=Li(xi);if(!e){const e=Bi();return Fi(xi,e,{"max-age":18e5}),void ki(_i,e)}ki(_i,e)};const Ui=En,Wi=Mn,Vi=er,Gi=(e,t)=>{let n=!1;return qo((()=>{n=!1})),zo({analyticsTracker:r=>{if(n)return;const{attribution:o,metricName:i,data:a}=r,s="string"==typeof i?i.toLowerCase():i;s===$o&&o&&Jo(di,o.element),s===ei&&o&&Jo(ui,o.largestShiftTarget),s===ti&&o&&Jo(hi,o.eventTarget),s===ni&&o&&Jo(pi,o.eventTarget),s===mi&&a&&"object"==typeof a&&(Jo(li,a.dnsLookupTime),Jo(ci,a.downloadTime),Jo(si,a.fetchTime),Jo(ai,a.headerSize),Jo(ii,a.timeToFirstByte),Jo(oi,a.totalTime),Jo(ri,a.workerTime)),Jo(s,a),n=Xo(t,e,Qo())}})},ji=bi,Yi=Oi,Zi=Pi,{prepareConfiguration:Hi}=Pe,{supportsPerformanceApi:Ki,supportsBeaconOrFetch:zi}=i;var Ji={start:(e,t)=>{const n=Hi(e);if(n)try{Ki()&&zi()&&(Gi(n,t),Ui(),Wi(),ji(),Vi(),Yi(),Zi())}catch(e){}}};const{initPerfume:Xi}=Ko,{RESOURCE_TIMING:Qi}=O,{metricSupport:qi}=N,{appendMetric:$i}=yn,{truncateDecimals:ea}=On;const{RESOURCE_TIMING:ta}=l,{RESOURCE_TIMING:na}=O,{sendMetrics:ra,getMetricsCollected:oa}=yn,ia=window.requestIdleCallback||(e=>setTimeout(e,200)),aa="resourceTimingEvent";let sa=!1;const ca=e=>{(e=>{const t=async()=>{if("hidden"===window.document.visibilityState){const n=oa()[na];ra({id:ta},e,{resources:n}),window.document.removeEventListener(aa,t),sa=!1}};sa||(window.document.addEventListener(aa,t),sa=!0),window.document.addEventListener("visibilitychange",(()=>{const e=new window.Event(aa);window.document.dispatchEvent(e)}))})(e)};var la=e=>{ia((()=>ca(e)))};const da=()=>Xi({resourceTiming:!0,analyticsTracker:({metricName:e,data:t})=>{if(e===Qi&&qi.includes(t.initiatorType)){const e=JSON.parse(JSON.stringify(t));Object.keys(e).forEach((t=>{"number"==typeof e[t]&&(e[t]=ea(e[t]))})),$i(Qi,e)}}}),ua=la,ha=Pi,{prepareConfiguration:pa}=Pe,{supportsPerformanceApi:ma,supportsBeaconOrFetch:fa}=i;var ga={start:e=>{const t=pa(e);if(t)try{ma()&&fa()&&(da(),ua(t),ha())}catch(e){}}};var va={commands:{SET_COOKIE:"set-cookie"},endpoint:"https://events.mercadolibre.com/v2/client-cookies"};const{CLIENT_COOKIES:ya}=l,{commands:Ia,endpoint:Sa}=va,{subscribe:Ca}=c,{beaconWithFetchFallback:Ea}=Jt,{objectOperator:Ta}=p,{prepareClientInfo:ba,prepareTags:wa}=ze;let Aa=[];const Na=e=>{if(1!==e.length||!e[0])throw new Error;return e[0]},Ma={path:Na,domain:Na,expires:Na,samesite:Na,"max-age":e=>{const t=parseInt(Na(e),10);if(Number.isNaN(t))throw new Error;return t},secure:e=>{if(e.length)throw new Error;return!0}},Oa=(e,t)=>{e["unknown-metadata"]=`${e["unknown-metadata"]?`${e["unknown-metadata"]};`:""}${t}`},Da=window.requestIdleCallback||(e=>setTimeout(e,200));let Ra=!1;const ka={[Ia.SET_COOKIE]:(e,t,n)=>{const r=((e,t=null)=>{if(!e)return null;const n=e.split(";").reduce(((e,t,n)=>{const r=t.trim();if(!r)return e;const o=r.split("=").map((e=>e.trim())),i=o[0];if(!n)return i&&2===o.length&&(e.name=i),e;const a=i.toLowerCase(),s=Ma[a];if(s)try{e[a]=s(o.slice(1))}catch(n){Oa(e,t)}else Oa(e,t);return e}),{name:null,path:null,domain:null,"max-age":null,expires:null,samesite:null,secure:null,"unknown-metadata":null,"user-preferences":t});return n.name?n:null})(e,n);r&&(Aa.push(r),(e=>{const t=()=>{if("hidden"===window.document.visibilityState){const n=ba(),r=wa(e);Ea(Sa,Ta({clientInfo:n,tags:r,cookies:Aa})),Aa=[],window.document.removeEventListener("visibilitychange",t),Ra=!1}};Ra||(window.document.addEventListener("visibilitychange",t),Ra=!0)})(t))}};var _a=e=>{Ca(ya,(t=>{t&&ka[t.type]&&Da((()=>ka[t.type](t.data,e,t.userPreferences)))}))};const xa=_a,{supportsBeaconOrFetch:La}=i;var Fa={start:e=>{try{La()&&xa(e)}catch(e){}}};const{PAGE_RENDER:Ba}=l,{trackMetric:Pa,sendMetrics:Ua,getMetricsCollected:Wa}=yn,{subscribe:Va}=c,Ga=window.requestIdleCallback||(e=>setTimeout(e,200)),ja="pageRenderEvent";let Ya=!1;const Za=(e,t)=>{e.forEach((e=>{Pa(e.metric,e.value)})),(e=>{const t=()=>{"hidden"===window.document.visibilityState&&(Ua({id:Ba},e,Wa()),window.document.removeEventListener(ja,t),Ya=!1)};Ya||(window.document.addEventListener(ja,t),Ya=!0),window.document.addEventListener("visibilitychange",(()=>{const e=new window.Event(ja);window.document.dispatchEvent(e)}))})(t)};var Ha=e=>{Va(Ba,(t=>{t&&Ga((()=>Za(t,e)))}))};const Ka=Ha,za=En,Ja=Mn,Xa=bi,Qa=Pi,{prepareConfiguration:qa}=Pe,{supportsBeaconOrFetch:$a}=i;var es={start:e=>{const t=qa(e);if(t)try{$a()&&(za(),Ja(),Ka(t),Xa(),Qa())}catch(e){}}};const{arrayOperator:ts}=p,ns=Te,rs=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9"],os={STYLE:!0,IFRAME:!0,SCRIPT:!0,svg:!0,path:!0},is={"data-hj-suppress":!0,"data-hj-suppressed":!0,"data-hj-masked":!0,"data-pii-mask":!0,"nav-header-username":!0},as={address:!0,address1:!0,address2:!0,addressline1:!0,addressline2:!0,cell:!0,cellphone:!0,dateofbirth:!0,dob:!0,email:!0,familyname:!0,firstname:!0,fullname:!0,lastname:!0,firstName:!0,fullName:!0,lastName:!0,phone:!0,postalcode:!0,postcode:!0,surname:!0,tel:!0,telephone:!0,username:!0,zip:!0,zipcode:!0,nationalinsurancenumber:!0,nin:!0,ppsn:!0,security:!0,securitynum:!0,socialsec:!0,socialsecuritynumber:!0,socsec:!0,ssn:!0,authpw:!0,contrasena:!0,contrasenya:!0,pass:!0,passord:!0,password:!0,passwort:!0,pw:!0,pwd:!0,pword:!0,pwrd:!0,sapwd:!0,senha:!0,userpw:!0,userpwd:!0,cc:!0,cccsc:!0,cccvc:!0,cccvv:!0,ccexp:!0,ccexpiry:!0,ccexpmonth:!0,ccexpyear:!0,ccname:!0,ccnum:!0,ccnumber:!0,cctype:!0,creditcard:!0,csc:!0,cvc:!0,cvv:!0,exp:!0,accountnum:!0,accountnumber:!0,bic:!0,iban:!0,ibanaccountnum:!0,ibanaccountnumber:!0,pin:!0,pinnum:!0,secq:!0,secret:!0,secretq:!0,secretquestion:!0,securityq:!0,securityquestion:!0,sortcode:!0,swift:!0,buyerEmail:!0,nickname:!0,buyerFullName:!0,buyerPhone:!0,buyerId:!0,sellerId:!0,first_name:!0,last_name:!0,secure_email:!0,issuerName:!0,expirationMonth:!0,expirationYear:!0,lastFourDigits:!0},ss={A:["href"],INPUT:["value","placeholder"],TEXTAREA:["value","placeholder"],OPTION:["label","value"],PROGRESS:["value"],OPTGROUP:["label"],IMG:["alt"],DIV:["title"],DEFAULT:["textContent"]},cs=/[.*+?^${}()|[\]\\]/g,ls=e=>e.replace(cs,"\\$&"),ds=e=>{const t=[];for(let n=0;n<e;n++)t.push(rs[Math.floor(Math.random()*rs.length)]);return t.join("")},us=new RegExp("[\\s_-]+","g"),hs=/([+(]{0,2}\d[-_ ()/]{0,4}){9,}/,ps=/\d+/,ms=/[^@\s]+@[^@\s]+\.[^@\s]+/,fs=/(?:\d{1,3}\.){3}\d{1,3}/,gs=/(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}/,vs=(e,t="")=>(e=>ts([e.classList||[]]).some((e=>is[e])))(e)||(e=>[e.name,e.id].map((e=>e?e.replace(us,"").toLowerCase():e)).some((e=>as[e])))(e)||(e=>ps.test(e))(t)||(e=>hs.test(e))(t)||(e=>e.indexOf("@")>-1&&ms.test(e))(t)||(e=>fs.test(e)||gs.test(e))(t),ys=e=>{const t=[];return ts([e]).forEach((e=>{if(os[e.tagName])return;if((e.children||[]).length>0)return;const n=ts([ss.DEFAULT,ss[e.tagName]||[]]).reduce(((t,n)=>{const r=e[n],o=vs(e,r);return r&&o&&t.push(r),t}),[]);n.length&&t.push({el:e.outerHTML,attrs:n})})),t},Is=new RegExp(/[a-zA-Z0-9äÄëËïÏöÖüÜáéíóúáéíóúÁÉÍÓÚÂÊÎÔÛâêîôûàèìòùÀÈÌÒÙ.]/,"i"),Ss=e=>{const t=[{original:"<iframe.*?>.*<\\/iframe>",translated:""},{original:"<noscript.*?>.*<\\/noscript>",translated:""},{original:'"(addresses)":+\\s*[[][\\s\\S]*?[]],*',translated:""},{original:'"(phone|address|address|alternative_phone|identification)":+\\s*[{][\\s\\S]*?[}],*',translated:""},{original:"(user)+\\s*:\\s*[{]+[\\s\\S]*?[}]+?",translated:"$1: {}"},{original:"[a-z0-9.+-]+@+[a-z0-9.+-]+",translated:"***@***.***"},{original:`"(${Object.keys(as).join("|")})"+\\s*:\\s*"+[a-z0-9.+-\\s]+"+?`,translated:'"$1":"abc123"'},{original:`"(${Object.keys(as).join("|")})"+\\s*:\\s*[^"][0-9]+`,translated:'"$1":123987546'}];return e.reduce(((e,t)=>{const n=t.el;return t.attrs.forEach((e=>{t.el=t.el.replace(e,(e=>e.startsWith("http")?"#":e.split(" ").map((e=>Is.test(e)?ds(e.length):e)).join(" "))(e))})),e.push({original:ls(n),translated:ls(t.el)}),e}),t)};var Cs={anonymizeDOM:e=>{const t=ys(((e="*")=>document.body.querySelectorAll(e))()),n=Ss(t);return ns(n,e)},generateRandomText:ds,shouldSuppressData:vs,extractMessages:ys,generateTranslations:Ss};const{A11Y:Es}=l,{WINDOW_DOM:Ts}=O,{trackMetric:bs,sendFormData:ws,getMetricsCollected:As}=yn,{anonymizeDOM:Ns}=Cs,Ms=window.requestIdleCallback||(e=>setTimeout(e,200));let Os=!1;const Ds=e=>{Os||(Os=ws({id:Es},e,As()))},Rs=e=>{try{(()=>{const{document:e}=window;if(!e||!e.documentElement||!e.documentElement.outerHTML)throw new Error("DOM not found");const t=Ns(e.documentElement.outerHTML);bs(Ts,t)})(),Ds(e)}catch(e){}};var ks=e=>{Ms((()=>Rs(e)))};const{trackMetric:_s}=yn,{WINDOW_HEIGHT:xs,WINDOW_WIDTH:Ls}=O;const Fs=ks,Bs=En,Ps=Mn,Us=bi,Ws=()=>{const{innerWidth:e,innerHeight:t}=window;e&&_s(Ls,`${e}`),t&&_s(xs,`${t}`)},Vs=Pi,{prepareConfiguration:Gs}=Pe,{supportsFetchApi:js}=i;var Ys={start:e=>{const t=Gs(e);if(t)try{js()&&(Bs(),Ps(),Ws(),Fs(t),Us(),Vs())}catch(e){}}};const{AVAILABILITY:Zs}=l,{AVAILABILITY_FAILURE:Hs,AVAILABILITY_TRANSFER_SIZE:Ks,AVAILABILITY_BROWSER_ERRORS:zs}=O,{appendMetric:Js,sendMetrics:Xs,getMetricsCollected:Qs}=yn,{subscribe:qs}=c,$s=window.requestIdleCallback||(e=>setTimeout(e,200)),ec="availabilityEvent";let tc=!1;const nc=e=>{(e=>{const t=()=>{"hidden"===window.document.visibilityState&&(Xs({id:Zs},e,Qs()),window.document.removeEventListener(ec,t),tc=!1)};tc||(window.document.addEventListener(ec,t),tc=!0),window.document.addEventListener("visibilitychange",(()=>{const e=new window.Event(ec);window.document.dispatchEvent(e)}))})(e)};var rc=e=>{qs(Hs,(e=>{e&&Js(Hs,e)})),qs(Ks,(e=>{e&&Js(Ks,e)})),qs(zs,(e=>{e&&Js(zs,e)})),$s((()=>nc(e)))};const{AVAILABILITY_FAILURE:oc}=O,{queue:ic}=c;var ac=()=>{const{_pfl:e}=window;(e||[]).forEach((e=>{const[t,n]=e;ic(oc,{filename:n,initiator:t,value:1})}))};const{appendMetric:sc}=yn,{supportsPerformanceApi:cc}=i,{AVAILABILITY_TRANSFER_SIZE:lc}=O,{thresholdEntries:dc,fileSupport:uc}=g,hc=e=>e.substring(e.lastIndexOf(".")+1,e.length),pc=e=>{const t=hc(e);return Object.keys(uc).find((e=>uc[e].some((e=>e===t))))},mc=e=>{const{type:t,value:n,name:r}=e;n>(dc[t]||0)&&sc(lc,{filename:r,initiator:t,value:n})};var fc=()=>{const e=(()=>{if(!cc())return[];const{performance:e}=window,t=Object.keys(uc).reduce(((e,t)=>e.concat(uc[t])),[]);return e.getEntries().filter((e=>t.some((t=>t===hc(e.name))))).filter(((e,t,n)=>n.findIndex((t=>t.name===e.name))===t)).map((e=>{const t=e.encodedBodySize&&e.encodedBodySize>0?e.encodedBodySize:e.transferSize;return{name:e.name,type:pc(e.name),value:t}}))})();e.forEach(mc)};const gc=rc,vc=En,yc=Mn,{prepareConfiguration:Ic}=Pe,Sc=bi,Cc=ac,Ec=fc,Tc=Pi,{supportsBeaconOrFetch:bc}=i;var wc={start:e=>{const t=Ic(e);if(t)try{bc()&&(vc(),yc(),gc(t),Cc(),Ec(),Sc(),Tc())}catch(e){}}};const{CDN_HEALTH:Ac}=l,{AVAILABILITY_FAILURE:Nc}=O,{appendMetric:Mc,sendMetrics:Oc,getMetricsCollected:Dc}=yn,{subscribe:Rc}=c,kc=window.requestIdleCallback||(e=>setTimeout(e,200)),_c="cdnHealthEvent";let xc=!1;const Lc=e=>{(e=>{const t=()=>{"hidden"===window.document.visibilityState&&(Oc({id:Ac},e,Dc()),window.document.removeEventListener(_c,t),xc=!1)};xc||(window.document.addEventListener(_c,t),xc=!0),window.document.addEventListener("visibilitychange",(()=>{const e=new window.Event(_c);window.document.dispatchEvent(e)}))})(e)};var Fc=e=>{Rc(Nc,(e=>{e&&Mc(Nc,e)})),kc((()=>Lc(e)))};const{trackMetric:Bc}=yn,{supportsFetchApi:Pc}=i,{getWithFetch:Uc}=Jt,{X_CDN:Wc}=O,Vc={g:"google",a:"akamai"};var Gc=()=>Pc()?Uc("https://http2.mlstatic.com/cdn/ping.gif").then((e=>{if(e.headers.has("x-cdn")){const t=e.headers.get("x-cdn");Bc(Wc,Vc[t])}})).catch((e=>e)):null;const{trackMetric:jc}=yn,{supportsPerformanceApi:Yc}=i,{toFixedNumber:Zc}=On,{DURATION_SUM:Hc,RESOURCE_SIZE:Kc}=O;var zc=()=>{if(!Yc())return;const e=window.performance.getEntriesByType("resource").filter((e=>new RegExp("http2.mlstatic.com").test(e.name))),t=e.reduce(((e,t)=>e+=t.duration),0);jc(Hc,Zc(t)),jc(Kc,e.length)};const Jc=Fc,Xc=Gc,Qc=En,qc=Mn,{prepareConfiguration:$c}=Pe,el=bi,tl=ac,nl=zc,rl=Pi,{supportsBeaconOrFetch:ol}=i;var il={start:e=>{const t=$c(e);if(t)try{ol()&&(Xc(),tl(),Jc(t),nl(),Qc(),qc(),el(),rl())}catch(e){}}};const{objectOperator:al}=p,{AVAILABILITY:sl,CDN_HEALTH:cl}=l,{start:ll}=il,{start:dl}=wc;var ul={start:e=>{ll(al({args:e,id:cl})),dl(al({args:e,id:sl}))}};const hl=(e,t,n)=>{let r=[];for(const o in e)e.hasOwnProperty(o)&&(o===t&&e[o]===n?r.push(e):"object"==typeof e[o]&&(r=r.concat(hl(e[o],t,n))));return r};var pl=hl;const{getCookie:ml}=Di,fl=pl;var gl={getUserId:(e=null)=>{const t=window.melidata_namespace&&window.melidata_namespace.actual_track&&window.melidata_namespace.actual_track.user&&window.melidata_namespace.actual_track.user.user_id,n=ml("orguseridp",t);return n&&!Number.isNaN(parseInt(n,10))?parseInt(n,10):e},getPath:()=>{const e=window.melidata_namespace&&window.melidata_namespace.actual_track&&window.melidata_namespace.actual_track.path?window.melidata_namespace.actual_track.path:null;if(e)return e;let t=null;try{t=(e=>{if(!e)return null;const t=fl(e,"provider","melidata"),n=fl(t,"type","view").pop();return n?n.path:null})(window.__PRELOADED_STATE__.floxResponse)}catch(e){}const n=window.location.pathname||null;return t||n}};const{trackMetric:vl}=yn,{APP_NAME:yl,SCOPE_NAME:Il,DEVICE:Sl,PLATFORM_ID:Cl,SITE_ID:El,WEBVIEW:Tl,REQUEST_ID:bl,VIEW_NAME:wl,USER_ID:Al}=O,Nl=M,{getUserId:Ml,getPath:Ol}=gl;var Dl,Rl=e=>{const t=Nl(e,[yl,Il,Sl,Cl,El,Tl,bl]),n=Ol();n&&vl(wl,n);const r=Ml();r&&vl(Al,parseInt(r,10)),Object.keys(t).forEach((e=>{t[e]&&vl(e,t[e])}))};function kl(e){return e.nodeType===e.ELEMENT_NODE}function _l(e){var t=null==e?void 0:e.host;return Boolean((null==t?void 0:t.shadowRoot)===e)}function xl(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function Ll(e){try{var t=e.rules||e.cssRules;return t?((n=Array.from(t).map(Fl).join("")).includes(" background-clip: text;")&&!n.includes(" -webkit-background-clip: text;")&&(n=n.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),n):null}catch(e){return null}var n}function Fl(e){var t;if(function(e){return"styleSheet"in e}(e))try{t=Ll(e.styleSheet)||function(e){var t=e.cssText;if(t.split('"').length<3)return t;var n=["@import","url(".concat(JSON.stringify(e.href),")")];return""===e.layerName?n.push("layer"):e.layerName&&n.push("layer(".concat(e.layerName,")")),e.supportsText&&n.push("supports(".concat(e.supportsText,")")),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(e){}return function(e){if(e.includes(":")){var t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}return e}(t||e.cssText)}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(Dl||(Dl={}));var Bl=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(e){var t;if(!e)return-1;var n=null===(t=this.getMeta(e))||void 0===t?void 0:t.id;return null!=n?n:-1},e.prototype.getNode=function(e){return this.idNodeMap.get(e)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(e){return this.nodeMetaMap.get(e)||null},e.prototype.removeNodeFromMap=function(e){var t=this,n=this.getId(e);this.idNodeMap.delete(n),e.childNodes&&e.childNodes.forEach((function(e){return t.removeNodeFromMap(e)}))},e.prototype.has=function(e){return this.idNodeMap.has(e)},e.prototype.hasNode=function(e){return this.nodeMetaMap.has(e)},e.prototype.add=function(e,t){var n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)},e.prototype.replace=function(e,t){var n=this.getNode(e);if(n){var r=this.nodeMetaMap.get(n);r&&this.nodeMetaMap.set(t,r)}this.idNodeMap.set(e,t)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();function Pl(){return new Bl}function Ul(e){var t=e.element,n=e.maskInputOptions,r=e.tagName,o=e.type,i=e.value,a=e.maskInputFn,s=i||"",c=o&&Wl(o);return(n[r.toLowerCase()]||c&&n[c])&&(s=a?a(s,t):"*".repeat(s.length)),s}function Wl(e){return e.toLowerCase()}var Vl="__rrweb_original__";function Gl(e){var t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Wl(t):null}var jl,Yl,Zl=1,Hl=new RegExp("[^a-z0-9-_:]"),Kl=-2;function zl(){return Zl++}var Jl=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Xl=/^(?:[a-z+]+:)?\/\//i,Ql=/^www\..*/i,ql=/^(data:)([^,]*),(.*)/i;function $l(e,t){return(e||"").replace(Jl,(function(e,n,r,o,i,a){var s,c=r||i||a,l=n||o||"";if(!c)return e;if(Xl.test(c)||Ql.test(c))return"url(".concat(l).concat(c).concat(l,")");if(ql.test(c))return"url(".concat(l).concat(c).concat(l,")");if("/"===c[0])return"url(".concat(l).concat((s=t,(s.indexOf("//")>-1?s.split("/").slice(0,3).join("/"):s.split("/")[0]).split("?")[0]+c)).concat(l,")");var d=t.split("/"),u=c.split("/");d.pop();for(var h=0,p=u;h<p.length;h++){var m=p[h];"."!==m&&(".."===m?d.pop():d.push(m))}return"url(".concat(l).concat(d.join("/")).concat(l,")")}))}var ed=/^[^ \t\n\r\u000c]+/,td=/^[, \t\n\r\u000c]+/;function nd(e,t){if(!t||""===t.trim())return t;var n=e.createElement("a");return n.href=t,n.href}function rd(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function od(){var e=document.createElement("a");return e.href="",e.href}function id(e,t,n,r){return r?"src"===n||"href"===n&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]?nd(e,r):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;var n=0;function r(e){var r,o=e.exec(t.substring(n));return o?(r=o[0],n+=r.length,r):""}for(var o=[];r(td),!(n>=t.length);){var i=r(ed);if(","===i.slice(-1))i=nd(e,i.substring(0,i.length-1)),o.push(i);else{var a="";i=nd(e,i);for(var s=!1;;){var c=t.charAt(n);if(""===c){o.push((i+a).trim());break}if(s)")"===c&&(s=!1);else{if(","===c){n+=1,o.push((i+a).trim());break}"("===c&&(s=!0)}a+=c,n+=1}}}return o.join(", ")}(e,r):"style"===n?$l(r,od()):"object"===t&&"data"===n?nd(e,r):r:nd(e,r):r}function ad(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function sd(e,t,n){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return!!n&&sd(e.parentNode,t,n);for(var r=e.classList.length;r--;){var o=e.classList[r];if(t.test(o))return!0}return!!n&&sd(e.parentNode,t,n)}function cd(e,t,n){try{var r=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===r)return!1;if("string"==typeof t){if(r.classList.contains(t))return!0;if(r.closest(".".concat(t)))return!0}else if(sd(r,t,!0))return!0;if(n){if(r.matches(n))return!0;if(r.closest(n))return!0}}catch(e){}return!1}function ld(e,t){var n=t.doc,r=t.mirror,o=t.blockClass,i=t.blockSelector,a=t.maskTextClass,s=t.maskTextSelector,c=t.inlineStylesheet,l=t.maskInputOptions,d=void 0===l?{}:l,u=t.maskTextFn,h=t.maskInputFn,p=t.dataURLOptions,m=void 0===p?{}:p,f=t.inlineImages,g=t.recordCanvas,v=t.keepIframeSrcFn,y=t.newlyAddedElement,I=void 0!==y&&y,S=function(e,t){if(!t.hasNode(e))return;var n=t.getId(e);return 1===n?void 0:n}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:Dl.Document,childNodes:[],compatMode:e.compatMode}:{type:Dl.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Dl.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:S};case e.ELEMENT_NODE:return function(e,t){for(var n=t.doc,r=t.blockClass,o=t.blockSelector,i=t.inlineStylesheet,a=t.maskInputOptions,s=void 0===a?{}:a,c=t.maskInputFn,l=t.dataURLOptions,d=void 0===l?{}:l,u=t.inlineImages,h=t.recordCanvas,p=t.keepIframeSrcFn,m=t.newlyAddedElement,f=void 0!==m&&m,g=t.rootId,v=function(e,t,n){try{if("string"==typeof t){if(e.classList.contains(t))return!0}else for(var r=e.classList.length;r--;){var o=e.classList[r];if(t.test(o))return!0}if(n)return e.matches(n)}catch(e){}return!1}(e,r,o),y=function(e){if(e instanceof HTMLFormElement)return"form";var t=Wl(e.tagName);return Hl.test(t)?"div":t}(e),I={},S=e.attributes.length,C=0;C<S;C++){var E=e.attributes[C];ad(y,E.name,E.value)||(I[E.name]=id(n,y,Wl(E.name),E.value))}if("link"===y&&i){var T=Array.from(n.styleSheets).find((function(t){return t.href===e.href})),b=null;T&&(b=Ll(T)),b&&(delete I.rel,delete I.href,I._cssText=$l(b,T.href))}if("style"===y&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){(b=Ll(e.sheet))&&(I._cssText=$l(b,od()))}if("input"===y||"textarea"===y||"select"===y){var w=e.value,A=e.checked;if("radio"!==I.type&&"checkbox"!==I.type&&"submit"!==I.type&&"button"!==I.type&&w){var N=Gl(e);I.value=Ul({element:e,type:N,tagName:y,value:w,maskInputOptions:s,maskInputFn:c})}else A&&(I.checked=A)}"option"===y&&(e.selected&&!s.select?I.selected=!0:delete I.selected);if("canvas"===y&&h)if("2d"===e.__context)(function(e){var t=e.getContext("2d");if(!t)return!0;for(var n=0;n<e.width;n+=50)for(var r=0;r<e.height;r+=50){var o=t.getImageData,i=Vl in o?o[Vl]:o;if(new Uint32Array(i.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some((function(e){return 0!==e})))return!1}return!0})(e)||(I.rr_dataURL=e.toDataURL(d.type,d.quality));else if(!("__context"in e)){var M=e.toDataURL(d.type,d.quality),O=document.createElement("canvas");O.width=e.width,O.height=e.height,M!==O.toDataURL(d.type,d.quality)&&(I.rr_dataURL=M)}if("img"===y&&u){jl||(jl=n.createElement("canvas"),Yl=jl.getContext("2d"));var D=e,R=D.crossOrigin;D.crossOrigin="anonymous";var k=function(){D.removeEventListener("load",k);try{jl.width=D.naturalWidth,jl.height=D.naturalHeight,Yl.drawImage(D,0,0),I.rr_dataURL=jl.toDataURL(d.type,d.quality)}catch(e){console.warn("Cannot inline img src=".concat(D.currentSrc,"! Error: ").concat(e))}R?I.crossOrigin=R:D.removeAttribute("crossorigin")};D.complete&&0!==D.naturalWidth?k():D.addEventListener("load",k)}"audio"!==y&&"video"!==y||(I.rr_mediaState=e.paused?"paused":"played",I.rr_mediaCurrentTime=e.currentTime);f||(e.scrollLeft&&(I.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(I.rr_scrollTop=e.scrollTop));if(v){var _=e.getBoundingClientRect(),x=_.width,L=_.height;I={class:I.class,rr_width:"".concat(x,"px"),rr_height:"".concat(L,"px")}}"iframe"!==y||p(I.src)||(e.contentDocument||(I.rr_src=I.src),delete I.src);return{type:Dl.Element,tagName:y,attributes:I,childNodes:[],isSVG:rd(e)||void 0,needBlock:v,rootId:g}}(e,{doc:n,blockClass:o,blockSelector:i,inlineStylesheet:c,maskInputOptions:d,maskInputFn:h,dataURLOptions:m,inlineImages:f,recordCanvas:g,keepIframeSrcFn:v,newlyAddedElement:I,rootId:S});case e.TEXT_NODE:return function(e,t){var n,r=t.maskTextClass,o=t.maskTextSelector,i=t.maskTextFn,a=t.rootId,s=e.parentNode&&e.parentNode.tagName,c=e.textContent,l="STYLE"===s||void 0,d="SCRIPT"===s||void 0;if(l&&c){try{e.nextSibling||e.previousSibling||(null===(n=e.parentNode.sheet)||void 0===n?void 0:n.cssRules)&&(c=Ll(e.parentNode.sheet))}catch(t){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(t),e)}c=$l(c,od())}d&&(c="SCRIPT_PLACEHOLDER");!l&&!d&&c&&cd(e,r,o)&&(c=i?i(c):c.replace(/[\S]/g,"*"));return{type:Dl.Text,textContent:c||"",isStyle:l,rootId:a}}(e,{maskTextClass:a,maskTextSelector:s,maskTextFn:u,rootId:S});case e.CDATA_SECTION_NODE:return{type:Dl.CDATA,textContent:"",rootId:S};case e.COMMENT_NODE:return{type:Dl.Comment,textContent:e.textContent||"",rootId:S};default:return!1}}function dd(e){return null==e?"":e.toLowerCase()}function ud(e,t){var n,r=t.doc,o=t.mirror,i=t.blockClass,a=t.blockSelector,s=t.maskTextClass,c=t.maskTextSelector,l=t.skipChild,d=void 0!==l&&l,u=t.inlineStylesheet,h=void 0===u||u,p=t.maskInputOptions,m=void 0===p?{}:p,f=t.maskTextFn,g=t.maskInputFn,v=t.slimDOMOptions,y=t.dataURLOptions,I=void 0===y?{}:y,S=t.inlineImages,C=void 0!==S&&S,E=t.recordCanvas,T=void 0!==E&&E,b=t.onSerialize,w=t.onIframeLoad,A=t.iframeLoadTimeout,N=void 0===A?5e3:A,M=t.onStylesheetLoad,O=t.stylesheetLoadTimeout,D=void 0===O?5e3:O,R=t.keepIframeSrcFn,k=void 0===R?function(){return!1}:R,_=t.newlyAddedElement,x=void 0!==_&&_,L=t.preserveWhiteSpace,F=void 0===L||L,B=ld(e,{doc:r,mirror:o,blockClass:i,blockSelector:a,maskTextClass:s,maskTextSelector:c,inlineStylesheet:h,maskInputOptions:m,maskTextFn:f,maskInputFn:g,dataURLOptions:I,inlineImages:C,recordCanvas:T,keepIframeSrcFn:k,newlyAddedElement:x});if(!B)return console.warn(e,"not serialized"),null;n=o.hasNode(e)?o.getId(e):!function(e,t){if(t.comment&&e.type===Dl.Comment)return!0;if(e.type===Dl.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(dd(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===dd(e.attributes.name)||"icon"===dd(e.attributes.rel)||"apple-touch-icon"===dd(e.attributes.rel)||"shortcut icon"===dd(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&dd(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(dd(e.attributes.property).match(/^(og|twitter|fb):/)||dd(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===dd(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===dd(e.attributes.name)||"googlebot"===dd(e.attributes.name)||"bingbot"===dd(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===dd(e.attributes.name)||"generator"===dd(e.attributes.name)||"framework"===dd(e.attributes.name)||"publisher"===dd(e.attributes.name)||"progid"===dd(e.attributes.name)||dd(e.attributes.property).match(/^article:/)||dd(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===dd(e.attributes.name)||"yandex-verification"===dd(e.attributes.name)||"csrf-token"===dd(e.attributes.name)||"p:domain_verify"===dd(e.attributes.name)||"verify-v1"===dd(e.attributes.name)||"verification"===dd(e.attributes.name)||"shopify-checkout-api-token"===dd(e.attributes.name)))return!0}}return!1}(B,v)&&(F||B.type!==Dl.Text||B.isStyle||B.textContent.replace(/^\s+|\s+$/gm,"").length)?zl():Kl;var P=Object.assign(B,{id:n});if(o.add(e,P),n===Kl)return null;b&&b(e);var U=!d;if(P.type===Dl.Element){U=U&&!P.needBlock,delete P.needBlock;var W=e.shadowRoot;W&&xl(W)&&(P.isShadowHost=!0)}if((P.type===Dl.Document||P.type===Dl.Element)&&U){v.headWhitespace&&P.type===Dl.Element&&"head"===P.tagName&&(F=!1);for(var V={doc:r,mirror:o,blockClass:i,blockSelector:a,maskTextClass:s,maskTextSelector:c,skipChild:d,inlineStylesheet:h,maskInputOptions:m,maskTextFn:f,maskInputFn:g,slimDOMOptions:v,dataURLOptions:I,inlineImages:C,recordCanvas:T,preserveWhiteSpace:F,onSerialize:b,onIframeLoad:w,iframeLoadTimeout:N,onStylesheetLoad:M,stylesheetLoadTimeout:D,keepIframeSrcFn:k},G=0,j=Array.from(e.childNodes);G<j.length;G++){(H=ud(j[G],V))&&P.childNodes.push(H)}if(kl(e)&&e.shadowRoot)for(var Y=0,Z=Array.from(e.shadowRoot.childNodes);Y<Z.length;Y++){var H;(H=ud(Z[Y],V))&&(xl(e.shadowRoot)&&(H.isShadow=!0),P.childNodes.push(H))}}return e.parentNode&&_l(e.parentNode)&&xl(e.parentNode)&&(P.isShadow=!0),P.type===Dl.Element&&"iframe"===P.tagName&&function(e,t,n){var r=e.contentWindow;if(r){var o,i=!1;try{o=r.document.readyState}catch(e){return}if("complete"===o){var a="about:blank";if(r.location.href!==a||e.src===a||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}else{var s=setTimeout((function(){i||(t(),i=!0)}),n);e.addEventListener("load",(function(){clearTimeout(s),i=!0,t()}))}}}(e,(function(){var t=e.contentDocument;if(t&&w){var n=ud(t,{doc:t,mirror:o,blockClass:i,blockSelector:a,maskTextClass:s,maskTextSelector:c,skipChild:!1,inlineStylesheet:h,maskInputOptions:m,maskTextFn:f,maskInputFn:g,slimDOMOptions:v,dataURLOptions:I,inlineImages:C,recordCanvas:T,preserveWhiteSpace:F,onSerialize:b,onIframeLoad:w,iframeLoadTimeout:N,onStylesheetLoad:M,stylesheetLoadTimeout:D,keepIframeSrcFn:k});n&&w(e,n)}}),N),P.type===Dl.Element&&"link"===P.tagName&&"stylesheet"===P.attributes.rel&&function(e,t,n){var r,o=!1;try{r=e.sheet}catch(e){return}if(!r){var i=setTimeout((function(){o||(t(),o=!0)}),n);e.addEventListener("load",(function(){clearTimeout(i),o=!0,t()}))}}(e,(function(){if(M){var t=ud(e,{doc:r,mirror:o,blockClass:i,blockSelector:a,maskTextClass:s,maskTextSelector:c,skipChild:!1,inlineStylesheet:h,maskInputOptions:m,maskTextFn:f,maskInputFn:g,slimDOMOptions:v,dataURLOptions:I,inlineImages:C,recordCanvas:T,preserveWhiteSpace:F,onSerialize:b,onIframeLoad:w,iframeLoadTimeout:N,onStylesheetLoad:M,stylesheetLoadTimeout:D,keepIframeSrcFn:k});t&&M(e,t)}}),D),P}var hd=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;function pd(e,t){void 0===t&&(t={});var n=1,r=1;function o(e){var t=e.match(/\n/g);t&&(n+=t.length);var o=e.lastIndexOf("\n");r=-1===o?r+e.length:e.length-o}function i(){var e={line:n,column:r};return function(t){return t.position=new a(e),p(),t}}var a=function(e){this.start=e,this.end={line:n,column:r},this.source=t.source};a.prototype.content=e;var s=[];function c(o){var i=new Error("".concat(t.source||"",":").concat(n,":").concat(r,": ").concat(o));if(i.reason=o,i.filename=t.source,i.line=n,i.column=r,i.source=e,!t.silent)throw i;s.push(i)}function l(){return h(/^{\s*/)}function d(){return h(/^}/)}function u(){var t,n=[];for(p(),m(n);e.length&&"}"!==e.charAt(0)&&(t=w()||A());)t&&(n.push(t),m(n));return n}function h(t){var n=t.exec(e);if(n){var r=n[0];return o(r),e=e.slice(r.length),n}}function p(){h(/^\s*/)}function m(e){var t;for(void 0===e&&(e=[]);t=f();)t&&e.push(t),t=f();return e}function f(){var t=i();if("/"===e.charAt(0)&&"*"===e.charAt(1)){for(var n=2;""!==e.charAt(n)&&("*"!==e.charAt(n)||"/"!==e.charAt(n+1));)++n;if(n+=2,""===e.charAt(n-1))return c("End of comment missing");var a=e.slice(2,n-2);return r+=2,o(a),e=e.slice(n),r+=2,t({type:"comment",comment:a})}}function g(){var e=h(/^([^{]+)/);if(e)return md(e[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,(function(e){return e.replace(/,/g,"‌")})).split(/\s*(?![^(]*\)),\s*/).map((function(e){return e.replace(/\u200C/g,",")}))}function v(){var e=i(),t=h(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(t){var n=md(t[0]);if(!h(/^:\s*/))return c("property missing ':'");var r=h(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),o=e({type:"declaration",property:n.replace(hd,""),value:r?md(r[0]).replace(hd,""):""});return h(/^[;\s]*/),o}}function y(){var e,t=[];if(!l())return c("missing '{'");for(m(t);e=v();)!1!==e&&(t.push(e),m(t)),e=v();return d()?t:c("missing '}'")}function I(){for(var e,t=[],n=i();e=h(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)t.push(e[1]),h(/^,\s*/);if(t.length)return n({type:"keyframe",values:t,declarations:y()})}var S,C=b("import"),E=b("charset"),T=b("namespace");function b(e){var t=new RegExp("^@"+e+"\\s*([^;]+);");return function(){var n=i(),r=h(t);if(r){var o={type:e};return o[e]=r[1].trim(),n(o)}}}function w(){if("@"===e[0])return function(){var e=i(),t=h(/^@([-\w]+)?keyframes\s*/);if(t){var n=t[1];if(!(t=h(/^([-\w]+)\s*/)))return c("@keyframes missing name");var r,o=t[1];if(!l())return c("@keyframes missing '{'");for(var a=m();r=I();)a.push(r),a=a.concat(m());return d()?e({type:"keyframes",name:o,vendor:n,keyframes:a}):c("@keyframes missing '}'")}}()||function(){var e=i(),t=h(/^@media *([^{]+)/);if(t){var n=md(t[1]);if(!l())return c("@media missing '{'");var r=m().concat(u());return d()?e({type:"media",media:n,rules:r}):c("@media missing '}'")}}()||function(){var e=i(),t=h(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(t)return e({type:"custom-media",name:md(t[1]),media:md(t[2])})}()||function(){var e=i(),t=h(/^@supports *([^{]+)/);if(t){var n=md(t[1]);if(!l())return c("@supports missing '{'");var r=m().concat(u());return d()?e({type:"supports",supports:n,rules:r}):c("@supports missing '}'")}}()||C()||E()||T()||function(){var e=i(),t=h(/^@([-\w]+)?document *([^{]+)/);if(t){var n=md(t[1]),r=md(t[2]);if(!l())return c("@document missing '{'");var o=m().concat(u());return d()?e({type:"document",document:r,vendor:n,rules:o}):c("@document missing '}'")}}()||function(){var e=i();if(h(/^@page */)){var t=g()||[];if(!l())return c("@page missing '{'");for(var n,r=m();n=v();)r.push(n),r=r.concat(m());return d()?e({type:"page",selectors:t,declarations:r}):c("@page missing '}'")}}()||function(){var e=i();if(h(/^@host\s*/)){if(!l())return c("@host missing '{'");var t=m().concat(u());return d()?e({type:"host",rules:t}):c("@host missing '}'")}}()||function(){var e=i();if(h(/^@font-face\s*/)){if(!l())return c("@font-face missing '{'");for(var t,n=m();t=v();)n.push(t),n=n.concat(m());return d()?e({type:"font-face",declarations:n}):c("@font-face missing '}'")}}()}function A(){var e=i(),t=g();return t?(m(),e({type:"rule",selectors:t,declarations:y()})):c("selector missing")}return fd((S=u(),{type:"stylesheet",stylesheet:{source:t.source,rules:S,parsingErrors:s}}))}function md(e){return e?e.replace(/^\s+|\s+$/g,""):""}function fd(e,t){for(var n=e&&"string"==typeof e.type,r=n?e:t,o=0,i=Object.keys(e);o<i.length;o++){var a=e[i[o]];Array.isArray(a)?a.forEach((function(e){fd(e,r)})):a&&"object"==typeof a&&fd(a,r)}return n&&Object.defineProperty(e,"parent",{configurable:!0,writable:!0,enumerable:!1,value:t||null}),e}var gd={script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};var vd=/([^\\]):hover/,yd=new RegExp(vd.source,"g");function Id(e,t){var n=null==t?void 0:t.stylesWithHoverClass.get(e);if(n)return n;var r=pd(e,{silent:!0});if(!r.stylesheet)return e;var o=[];if(r.stylesheet.rules.forEach((function(e){"selectors"in e&&(e.selectors||[]).forEach((function(e){vd.test(e)&&o.push(e)}))})),0===o.length)return e;var i=new RegExp(o.filter((function(e,t){return o.indexOf(e)===t})).sort((function(e,t){return t.length-e.length})).map((function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})).join("|"),"g"),a=e.replace(i,(function(e){var t=e.replace(yd,"$1.\\:hover");return"".concat(e,", ").concat(t)}));return null==t||t.stylesWithHoverClass.set(e,a),a}function Sd(){return{stylesWithHoverClass:new Map}}function Cd(e,t){var n=t.doc,r=t.hackCss,o=t.cache;switch(e.type){case Dl.Document:return n.implementation.createDocument(null,"",null);case Dl.DocumentType:return n.implementation.createDocumentType(e.name||"html",e.publicId,e.systemId);case Dl.Element:var i,a=function(e){var t=gd[e.tagName]?gd[e.tagName]:e.tagName;return"link"===t&&e.attributes._cssText&&(t="style"),t}(e);i=e.isSVG?n.createElementNS("http://www.w3.org/2000/svg",a):n.createElement(a);var s={};for(var c in e.attributes)if(Object.prototype.hasOwnProperty.call(e.attributes,c)){var l=e.attributes[c];if(("option"!==a||"selected"!==c||!1!==l)&&null!==l)if(!0===l&&(l=""),c.startsWith("rr_"))s[c]=l;else{var d="textarea"===a&&"value"===c,u="style"===a&&"_cssText"===c;if(u&&r&&"string"==typeof l&&(l=Id(l,o)),!d&&!u||"string"!=typeof l)try{if(e.isSVG&&"xlink:href"===c)i.setAttributeNS("http://www.w3.org/1999/xlink",c,l.toString());else if("onload"===c||"onclick"===c||"onmouse"===c.substring(0,7))i.setAttribute("_"+c,l.toString());else{if("meta"===a&&"Content-Security-Policy"===e.attributes["http-equiv"]&&"content"===c){i.setAttribute("csp-content",l.toString());continue}("link"!==a||"preload"!==e.attributes.rel&&"modulepreload"!==e.attributes.rel||"script"!==e.attributes.as)&&("link"===a&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")||("img"===a&&e.attributes.srcset&&e.attributes.rr_dataURL?i.setAttribute("rrweb-original-srcset",e.attributes.srcset):i.setAttribute(c,l.toString())))}}catch(e){}else{for(var h=n.createTextNode(l),p=0,m=Array.from(i.childNodes);p<m.length;p++){var f=m[p];f.nodeType===i.TEXT_NODE&&i.removeChild(f)}i.appendChild(h)}}}var g=function(t){var n=s[t];if("canvas"===a&&"rr_dataURL"===t){var r=document.createElement("img");r.onload=function(){var e=i.getContext("2d");e&&e.drawImage(r,0,0,r.width,r.height)},r.src=n.toString(),i.RRNodeType&&(i.rr_dataURL=n.toString())}else if("img"===a&&"rr_dataURL"===t){var o=i;o.currentSrc.startsWith("data:")||(o.setAttribute("rrweb-original-src",e.attributes.src),o.src=n.toString())}if("rr_width"===t)i.style.width=n.toString();else if("rr_height"===t)i.style.height=n.toString();else if("rr_mediaCurrentTime"===t&&"number"==typeof n)i.currentTime=n;else if("rr_mediaState"===t)switch(n){case"played":i.play().catch((function(e){return console.warn("media playback error",e)}));break;case"paused":i.pause()}};for(var v in s)g(v);if(e.isShadowHost)if(i.shadowRoot)for(;i.shadowRoot.firstChild;)i.shadowRoot.removeChild(i.shadowRoot.firstChild);else i.attachShadow({mode:"open"});return i;case Dl.Text:return n.createTextNode(e.isStyle&&r?Id(e.textContent,o):e.textContent);case Dl.CDATA:return n.createCDATASection(e.textContent);case Dl.Comment:return n.createComment(e.textContent);default:return null}}function Ed(e,t){var n=t.doc,r=t.mirror,o=t.skipChild,i=void 0!==o&&o,a=t.hackCss,s=void 0===a||a,c=t.afterAppend,l=t.cache;if(r.has(e.id)){var d=r.getNode(e.id);if(function(e,t){return!(!e||!t||e.type!==t.type)&&(e.type===Dl.Document?e.compatMode===t.compatMode:e.type===Dl.DocumentType?e.name===t.name&&e.publicId===t.publicId&&e.systemId===t.systemId:e.type===Dl.Comment||e.type===Dl.Text||e.type===Dl.CDATA?e.textContent===t.textContent:e.type===Dl.Element&&e.tagName===t.tagName&&JSON.stringify(e.attributes)===JSON.stringify(t.attributes)&&e.isSVG===t.isSVG&&e.needBlock===t.needBlock)}(r.getMeta(d),e))return r.getNode(e.id)}var u=Cd(e,{doc:n,hackCss:s,cache:l});if(!u)return null;if(e.rootId&&r.getNode(e.rootId)!==n&&r.replace(e.rootId,n),e.type===Dl.Document&&(n.close(),n.open(),"BackCompat"===e.compatMode&&e.childNodes&&e.childNodes[0].type!==Dl.DocumentType&&(e.childNodes[0].type===Dl.Element&&"xmlns"in e.childNodes[0].attributes&&"http://www.w3.org/1999/xhtml"===e.childNodes[0].attributes.xmlns?n.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'):n.write('<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">')),u=n),r.add(u,e),(e.type===Dl.Document||e.type===Dl.Element)&&!i)for(var h=function(t){var o=Ed(t,{doc:n,mirror:r,skipChild:!1,hackCss:s,afterAppend:c,cache:l});if(!o)return console.warn("Failed to rebuild",t),"continue";if(t.isShadow&&kl(u)&&u.shadowRoot)u.shadowRoot.appendChild(o);else if(e.type===Dl.Document&&t.type==Dl.Element){var i=o,a=null;i.childNodes.forEach((function(e){"BODY"===e.nodeName&&(a=e)})),a?(i.removeChild(a),u.appendChild(o),i.appendChild(a)):u.appendChild(o)}else u.appendChild(o);c&&c(o,t.id)},p=0,m=e.childNodes;p<m.length;p++){h(m[p])}return u}function Td(e,t){var n=t.doc,r=t.onVisit,o=t.hackCss,i=void 0===o||o,a=t.afterAppend,s=t.cache,c=t.mirror,l=void 0===c?new Bl:c,d=Ed(e,{doc:n,mirror:l,skipChild:!1,hackCss:i,afterAppend:a,cache:s});return function(e,t){for(var n=0,r=e.getIds();n<r.length;n++){var o=r[n];e.has(o)&&t(e.getNode(o))}}(l,(function(e){r&&r(e),function(e,t){var n=t.getMeta(e);if((null==n?void 0:n.type)===Dl.Element){var r=e;for(var o in n.attributes)if(Object.prototype.hasOwnProperty.call(n.attributes,o)&&o.startsWith("rr_")){var i=n.attributes[o];"rr_scrollLeft"===o&&(r.scrollLeft=i),"rr_scrollTop"===o&&(r.scrollTop=i)}}}(e,l)})),d}function bd(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const wd="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let Ad={map:{},getId:()=>(console.error(wd),-1),getNode:()=>(console.error(wd),null),removeNodeFromMap(){console.error(wd)},has:()=>(console.error(wd),!1),reset(){console.error(wd)}};function Nd(e,t,n={}){let r=null,o=0;return function(...i){const a=Date.now();o||!1!==n.leading||(o=a);const s=t-(a-o),c=this;s<=0||s>t?(r&&(clearTimeout(r),r=null),o=a,e.apply(c,i)):r||!1===n.trailing||(r=setTimeout((()=>{o=!1===n.leading?0:Date.now(),r=null,e.apply(c,i)}),s))}}function Md(e,t,n,r,o=window){const i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){setTimeout((()=>{n.set.call(this,e)}),0),i&&i.set&&i.set.call(this,e)}}),()=>Md(e,t,i||{},!0)}function Od(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"==typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(e){return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(Ad=new Proxy(Ad,{get:(e,t,n)=>("map"===t&&console.error(wd),Reflect.get(e,t,n))}));let Dd=Date.now;function Rd(e){var t,n,r,o,i,a;const s=e.document;return{left:s.scrollingElement?s.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:(null==s?void 0:s.documentElement.scrollLeft)||(null===(n=null===(t=null==s?void 0:s.body)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.scrollLeft)||(null===(r=null==s?void 0:s.body)||void 0===r?void 0:r.scrollLeft)||0,top:s.scrollingElement?s.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:(null==s?void 0:s.documentElement.scrollTop)||(null===(i=null===(o=null==s?void 0:s.body)||void 0===o?void 0:o.parentElement)||void 0===i?void 0:i.scrollTop)||(null===(a=null==s?void 0:s.body)||void 0===a?void 0:a.scrollTop)||0}}function kd(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function _d(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function xd(e,t,n,r){if(!e)return!1;const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(!o)return!1;try{if("string"==typeof t){if(o.classList.contains(t))return!0;if(r&&null!==o.closest("."+t))return!0}else if(sd(o,t,r))return!0}catch(e){}if(n){if(o.matches(n))return!0;if(r&&null!==o.closest(n))return!0}return!1}function Ld(e,t){return-1!==t.getId(e)}function Fd(e,t){return t.getId(e)===Kl}function Bd(e,t){if(_l(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||Bd(e.parentNode,t))}function Pd(e){return Boolean(e.changedTouches)}function Ud(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}function Wd(e){const t={},n=(e,n)=>{const r={value:e,parent:n,children:[]};return t[e.node.id]=r,r},r=[];for(const o of e){const{nextId:e,parentId:i}=o;if(e&&e in t){const i=t[e];if(i.parent){const e=i.parent.children.indexOf(i);i.parent.children.splice(e,0,n(o,i.parent))}else{const e=r.indexOf(i);r.splice(e,0,n(o,null))}}else if(i in t){const e=t[i];e.children.push(n(o,e))}else r.push(n(o,null))}return r}function Vd(e,t){t(e.value);for(let n=e.children.length-1;n>=0;n--)Vd(e.children[n],t)}function Gd(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function jd(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function Yd(e,t){var n,r;const o=null===(r=null===(n=e.ownerDocument)||void 0===n?void 0:n.defaultView)||void 0===r?void 0:r.frameElement;if(!o||o===t)return{x:0,y:0,relativeScale:1,absoluteScale:1};const i=o.getBoundingClientRect(),a=Yd(o,t),s=i.height/o.clientHeight;return{x:i.x*a.relativeScale+a.x,y:i.y*a.relativeScale+a.y,relativeScale:s,absoluteScale:a.absoluteScale*s}}function Zd(e){return Boolean(null==e?void 0:e.shadowRoot)}function Hd(e,t){const n=e[t[0]];return 1===t.length?n:Hd(n.cssRules[t[1]].cssRules,t.slice(2))}function Kd(e){const t=[...e],n=t.pop();return{positions:t,index:n}}function zd(e){const t=new Set,n=[];for(let r=e.length;r--;){const o=e[r];t.has(o.id)||(n.push(o),t.add(o.id))}return n}/[1-9][0-9]{12}/.test(Date.now().toString())||(Dd=()=>(new Date).getTime());class Jd{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){var t;return null!==(t=this.styleIDMap.get(e))&&void 0!==t?t:-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Xd(e){var t,n;let r=null;return(null===(n=null===(t=e.getRootNode)||void 0===t?void 0:t.call(e))||void 0===n?void 0:n.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(r=e.getRootNode().host),r}function Qd(e){let t,n=e;for(;t=Xd(n);)n=t;return n}function qd(e){const t=e.ownerDocument;if(!t)return!1;const n=Qd(e);return t.contains(n)}function $d(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||qd(e))}var eu=Object.freeze({__proto__:null,StyleSheetMirror:Jd,get _mirror(){return Ad},getBaseDimension:Yd,getNestedRule:Hd,getPositionsAndIndex:Kd,getRootShadowHost:Qd,getShadowHost:Xd,getWindowHeight:kd,getWindowScroll:Rd,getWindowWidth:_d,hasShadowRoot:Zd,hookSetter:Md,inDom:$d,isAncestorRemoved:Bd,isBlocked:xd,isIgnored:Fd,isSerialized:Ld,isSerializedIframe:Gd,isSerializedStylesheet:jd,iterateResolveTree:Vd,legacy_isTouchEvent:Pd,get nowTimestamp(){return Dd},on:bd,patch:Od,polyfill:Ud,queueToResolveTrees:Wd,shadowHostInDom:qd,throttle:Nd,uniqueTextMutations:zd}),tu=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(tu||{}),nu=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e))(nu||{}),ru=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(ru||{}),ou=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(ou||{}),iu=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(iu||{}),au=(e=>(e.Start="start",e.Pause="pause",e.Resume="resume",e.Resize="resize",e.Finish="finish",e.FullsnapshotRebuilded="fullsnapshot-rebuilded",e.LoadStylesheetStart="load-stylesheet-start",e.LoadStylesheetEnd="load-stylesheet-end",e.SkipStart="skip-start",e.SkipEnd="skip-end",e.MouseInteraction="mouse-interaction",e.EventCast="event-cast",e.CustomEvent="custom-event",e.Flush="flush",e.StateChange="state-change",e.PlayBack="play-back",e.Destroy="destroy",e))(au||{});function su(e){return"__ln"in e}class cu{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=(null==t?void 0:t.next)||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&su(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&su(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const lu=(e,t)=>`${e}@${t}`;class du{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new cu,r=e=>{let t=e,n=Kl;for(;n===Kl;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},o=o=>{if(!o.parentNode||!$d(o))return;const i=_l(o.parentNode)?this.mirror.getId(Xd(o)):this.mirror.getId(o.parentNode),a=r(o);if(-1===i||-1===a)return n.addNode(o);const s=ud(o,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{Gd(e,this.mirror)&&this.iframeManager.addIframe(e),jd(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),Zd(o)&&this.shadowDomManager.addShadowRoot(o.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});s&&(e.push({parentId:i,nextId:a,node:s}),t.add(s.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const e of this.movedSet)hu(this.removes,e,this.mirror)&&!this.movedSet.has(e.parentNode)||o(e);for(const e of this.addedSet)mu(this.droppedSet,e)||hu(this.removes,e,this.mirror)?mu(this.movedSet,e)?o(e):this.droppedSet.add(e):o(e);let i=null;for(;n.length;){let e=null;if(i){const t=this.mirror.getId(i.value.parentNode),n=r(i.value);-1!==t&&-1!==n&&(e=i)}if(!e){let t=n.tail;for(;t;){const n=t;if(t=t.previous,n){const t=this.mirror.getId(n.value.parentNode);if(-1===r(n.value))continue;if(-1!==t){e=n;break}{const t=n.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const r=t.parentNode.host;if(-1!==this.mirror.getId(r)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}i=e.previous,n.removeNode(e.value),o(e.value)}const a={texts:this.texts.map((e=>({id:this.mirror.getId(e.node),value:e.value}))).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),attributes:this.attributes.map((e=>{const{attributes:t}=e;if("string"==typeof t.style){const n=JSON.stringify(e.styleDiff),r=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+r).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}})).filter((e=>!t.has(e.id))).filter((e=>this.mirror.has(e.id))),removes:this.removes,adds:e};(a.texts.length||a.attributes.length||a.removes.length||a.adds.length)&&(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=e=>{if(Fd(e.target,this.mirror))return;let t;try{t=document.implementation.createHTMLDocument()}catch(e){t=this.doc}switch(e.type){case"characterData":{const t=e.target.textContent;xd(e.target,this.blockClass,this.blockSelector,!1)||t===e.oldValue||this.texts.push({value:cd(e.target,this.maskTextClass,this.maskTextSelector)&&t?this.maskTextFn?this.maskTextFn(t):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const n=e.target;let r=e.attributeName,o=e.target.getAttribute(r);if("value"===r){const e=Gl(n);o=Ul({element:n,maskInputOptions:this.maskInputOptions,tagName:n.tagName,type:e,value:o,maskInputFn:this.maskInputFn})}if(xd(e.target,this.blockClass,this.blockSelector,!1)||o===e.oldValue)return;let i=this.attributes.find((t=>t.node===e.target));if("IFRAME"===n.tagName&&"src"===r&&!this.keepIframeSrcFn(o)){if(n.contentDocument)return;r="rr_src"}if(i||(i={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i)),"type"===r&&"INPUT"===n.tagName&&"password"===(e.oldValue||"").toLowerCase()&&n.setAttribute("data-rr-is-password","true"),!ad(n.tagName,r)&&(i.attributes[r]=id(this.doc,Wl(n.tagName),Wl(r),o),"style"===r)){const r=t.createElement("span");e.oldValue&&r.setAttribute("style",e.oldValue);for(const e of Array.from(n.style)){const t=n.style.getPropertyValue(e),o=n.style.getPropertyPriority(e);t!==r.style.getPropertyValue(e)||o!==r.style.getPropertyPriority(e)?i.styleDiff[e]=""===o?t:[t,o]:i._unchangedStyles[e]=[t,o]}for(const e of Array.from(r.style))""===n.style.getPropertyValue(e)&&(i.styleDiff[e]=!1)}break}case"childList":if(xd(e.target,this.blockClass,this.blockSelector,!0))return;e.addedNodes.forEach((t=>this.genAdds(t,e.target))),e.removedNodes.forEach((t=>{const n=this.mirror.getId(t),r=_l(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);xd(e.target,this.blockClass,this.blockSelector,!1)||Fd(t,this.mirror)||!Ld(t,this.mirror)||(this.addedSet.has(t)?(uu(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||Bd(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[lu(n,r)]?uu(this.movedSet,t):this.removes.push({parentId:r,id:n,isShadow:!(!_l(e.target)||!xl(e.target))||void 0})),this.mapRemoves.push(t))}))}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(Fd(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[lu(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);xd(e,this.blockClass,this.blockSelector,!1)||(e.childNodes.forEach((e=>this.genAdds(e))),Zd(e)&&e.shadowRoot.childNodes.forEach((t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)})))}}}init(e){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((t=>{this[t]=e[t]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function uu(e,t){e.delete(t),t.childNodes.forEach((t=>uu(e,t)))}function hu(e,t,n){return 0!==e.length&&pu(e,t,n)}function pu(e,t,n){const{parentNode:r}=t;if(!r)return!1;const o=n.getId(r);return!!e.some((e=>e.id===o))||pu(e,r,n)}function mu(e,t){return 0!==e.size&&fu(e,t)}function fu(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||fu(e,n))}let gu;function vu(e){gu=e}function yu(){gu=void 0}const Iu=e=>{if(!gu)return e;return(...t)=>{try{return e(...t)}catch(e){if(gu&&!0===gu(e))return;throw e}}},Su=[];function Cu(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(e){}return e&&e.target}function Eu(e,t){var n,r;const o=new du;Su.push(o),o.init(e);let i=window.MutationObserver||window.__rrMutationObserver;const a=null===(r=null===(n=null===window||void 0===window?void 0:window.Zone)||void 0===n?void 0:n.__symbol__)||void 0===r?void 0:r.call(n,"MutationObserver");a&&window[a]&&(i=window[a]);const s=new i(Iu(o.processMutations.bind(o)));return s.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function Tu({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,sampling:i}){if(!1===i.mouseInteraction)return()=>{};const a=!0===i.mouseInteraction||void 0===i.mouseInteraction?{}:i.mouseInteraction,s=[];let c=null;return Object.keys(ru).filter((e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e])).forEach((i=>{let a=Wl(i);const l=(t=>i=>{const a=Cu(i);if(xd(a,r,o,!0))return;let s=null,l=t;if("pointerType"in i){switch(i.pointerType){case"mouse":s=ou.Mouse;break;case"touch":s=ou.Touch;break;case"pen":s=ou.Pen}s===ou.Touch?ru[t]===ru.MouseDown?l="TouchStart":ru[t]===ru.MouseUp&&(l="TouchEnd"):ou.Pen}else Pd(i)&&(s=ou.Touch);null!==s?(c=s,(l.startsWith("Touch")&&s===ou.Touch||l.startsWith("Mouse")&&s===ou.Mouse)&&(s=null)):ru[t]===ru.Click&&(s=c,c=null);const d=Pd(i)?i.changedTouches[0]:i;if(!d)return;const u=n.getId(a),{clientX:h,clientY:p}=d;Iu(e)(Object.assign({type:ru[l],id:u,x:h,y:p},null!==s&&{pointerType:s}))})(i);if(window.PointerEvent)switch(ru[i]){case ru.MouseDown:case ru.MouseUp:a=a.replace("mouse","pointer");break;case ru.TouchStart:case ru.TouchEnd:return}s.push(bd(a,l,t))})),Iu((()=>{s.forEach((e=>e()))}))}function bu({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,sampling:i}){return bd("scroll",Iu(Nd(Iu((i=>{const a=Cu(i);if(!a||xd(a,r,o,!0))return;const s=n.getId(a);if(a===t&&t.defaultView){const n=Rd(t.defaultView);e({id:s,x:n.left,y:n.top})}else e({id:s,x:a.scrollLeft,y:a.scrollTop})})),i.scroll||100)),t)}function wu(e,t){const n=Object.assign({},e);return t||delete n.userTriggered,n}const Au=["INPUT","TEXTAREA","SELECT"],Nu=new WeakMap;function Mu(e){return function(e,t){if(ku("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||ku("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||ku("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||ku("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function Ou(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function Du({mirror:e,stylesheetManager:t},n){var r,o,i;let a=null;a="#document"===n.nodeName?e.getId(n):e.getId(n.host);const s="#document"===n.nodeName?null===(r=n.defaultView)||void 0===r?void 0:r.Document:null===(i=null===(o=n.ownerDocument)||void 0===o?void 0:o.defaultView)||void 0===i?void 0:i.ShadowRoot,c=Object.getOwnPropertyDescriptor(null==s?void 0:s.prototype,"adoptedStyleSheets");return null!==a&&-1!==a&&s&&c?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get(){var e;return null===(e=c.get)||void 0===e?void 0:e.call(this)},set(e){var n;const r=null===(n=c.set)||void 0===n?void 0:n.call(this,e);if(null!==a&&-1!==a)try{t.adoptStyleSheets(e,a)}catch(e){}return r}}),Iu((()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get:c.get,set:c.set})}))):()=>{}}function Ru(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};!function(e,t){const{mutationCb:n,mousemoveCb:r,mouseInteractionCb:o,scrollCb:i,viewportResizeCb:a,inputCb:s,mediaInteractionCb:c,styleSheetRuleCb:l,styleDeclarationCb:d,canvasMutationCb:u,fontCb:h,selectionCb:p}=e;e.mutationCb=(...e)=>{t.mutation&&t.mutation(...e),n(...e)},e.mousemoveCb=(...e)=>{t.mousemove&&t.mousemove(...e),r(...e)},e.mouseInteractionCb=(...e)=>{t.mouseInteraction&&t.mouseInteraction(...e),o(...e)},e.scrollCb=(...e)=>{t.scroll&&t.scroll(...e),i(...e)},e.viewportResizeCb=(...e)=>{t.viewportResize&&t.viewportResize(...e),a(...e)},e.inputCb=(...e)=>{t.input&&t.input(...e),s(...e)},e.mediaInteractionCb=(...e)=>{t.mediaInteaction&&t.mediaInteaction(...e),c(...e)},e.styleSheetRuleCb=(...e)=>{t.styleSheetRule&&t.styleSheetRule(...e),l(...e)},e.styleDeclarationCb=(...e)=>{t.styleDeclaration&&t.styleDeclaration(...e),d(...e)},e.canvasMutationCb=(...e)=>{t.canvasMutation&&t.canvasMutation(...e),u(...e)},e.fontCb=(...e)=>{t.font&&t.font(...e),h(...e)},e.selectionCb=(...e)=>{t.selection&&t.selection(...e),p(...e)}}(e,t);const r=Eu(e,e.doc),o=function({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(!1===t.mousemove)return()=>{};const o="number"==typeof t.mousemove?t.mousemove:50,i="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let a,s=[];const c=Nd(Iu((t=>{const n=Date.now()-a;e(s.map((e=>(e.timeOffset-=n,e))),t),s=[],a=null})),i),l=Iu(Nd(Iu((e=>{const t=Cu(e),{clientX:n,clientY:o}=Pd(e)?e.changedTouches[0]:e;a||(a=Dd()),s.push({x:n,y:o,id:r.getId(t),timeOffset:Dd()-a}),c("undefined"!=typeof DragEvent&&e instanceof DragEvent?nu.Drag:e instanceof MouseEvent?nu.MouseMove:nu.TouchMove)})),o,{trailing:!1})),d=[bd("mousemove",l,n),bd("touchmove",l,n),bd("drag",l,n)];return Iu((()=>{d.forEach((e=>e()))}))}(e),i=Tu(e),a=bu(e),s=function({viewportResizeCb:e},{win:t}){let n=-1,r=-1;return bd("resize",Iu(Nd(Iu((()=>{const t=kd(),o=_d();n===t&&r===o||(e({width:Number(o),height:Number(t)}),n=t,r=o)})),200)),t)}(e,{win:n}),c=function({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,ignoreClass:i,ignoreSelector:a,maskInputOptions:s,maskInputFn:c,sampling:l,userTriggeredOnInput:d}){function u(e){let n=Cu(e);const l=e.isTrusted,u=n&&n.tagName;if(n&&"OPTION"===u&&(n=n.parentElement),!n||!u||Au.indexOf(u)<0||xd(n,r,o,!0))return;if(n.classList.contains(i)||a&&n.matches(a))return;let p=n.value,m=!1;const f=Gl(n)||"";"radio"===f||"checkbox"===f?m=n.checked:(s[u.toLowerCase()]||s[f])&&(p=Ul({element:n,maskInputOptions:s,tagName:u,type:f,value:p,maskInputFn:c})),h(n,Iu(wu)({text:p,isChecked:m,userTriggered:l},d));const g=n.name;"radio"===f&&g&&m&&t.querySelectorAll(`input[type="radio"][name="${g}"]`).forEach((e=>{e!==n&&h(e,Iu(wu)({text:e.value,isChecked:!m,userTriggered:!1},d))}))}function h(t,r){const o=Nu.get(t);if(!o||o.text!==r.text||o.isChecked!==r.isChecked){Nu.set(t,r);const o=n.getId(t);Iu(e)(Object.assign(Object.assign({},r),{id:o}))}}const p=("last"===l.input?["change"]:["input","change"]).map((e=>bd(e,Iu(u),t))),m=t.defaultView;if(!m)return()=>{p.forEach((e=>e()))};const f=m.Object.getOwnPropertyDescriptor(m.HTMLInputElement.prototype,"value"),g=[[m.HTMLInputElement.prototype,"value"],[m.HTMLInputElement.prototype,"checked"],[m.HTMLSelectElement.prototype,"value"],[m.HTMLTextAreaElement.prototype,"value"],[m.HTMLSelectElement.prototype,"selectedIndex"],[m.HTMLOptionElement.prototype,"selected"]];return f&&f.set&&p.push(...g.map((e=>Md(e[0],e[1],{set(){Iu(u)({target:this,isTrusted:!1})}},!1,m)))),Iu((()=>{p.forEach((e=>e()))}))}(e),l=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,mirror:r,sampling:o,doc:i}){const a=Iu((i=>Nd(Iu((o=>{const a=Cu(o);if(!a||xd(a,t,n,!0))return;const{currentTime:s,volume:c,muted:l,playbackRate:d}=a;e({type:i,id:r.getId(a),currentTime:s,volume:c,muted:l,playbackRate:d})})),o.media||500))),s=[bd("play",a(0),i),bd("pause",a(1),i),bd("seeked",a(2),i),bd("volumechange",a(3),i),bd("ratechange",a(4),i)];return Iu((()=>{s.forEach((e=>e()))}))}(e),d=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:Iu(((r,o,i)=>{const[a,s]=i,{id:c,styleId:l}=Ou(o,t,n.styleMirror);return(c&&-1!==c||l&&-1!==l)&&e({id:c,styleId:l,adds:[{rule:a,index:s}]}),r.apply(o,i)}))});const i=r.CSSStyleSheet.prototype.deleteRule;let a,s;r.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:Iu(((r,o,i)=>{const[a]=i,{id:s,styleId:c}=Ou(o,t,n.styleMirror);return(s&&-1!==s||c&&-1!==c)&&e({id:s,styleId:c,removes:[{index:a}]}),r.apply(o,i)}))}),r.CSSStyleSheet.prototype.replace&&(a=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(a,{apply:Iu(((r,o,i)=>{const[a]=i,{id:s,styleId:c}=Ou(o,t,n.styleMirror);return(s&&-1!==s||c&&-1!==c)&&e({id:s,styleId:c,replace:a}),r.apply(o,i)}))})),r.CSSStyleSheet.prototype.replaceSync&&(s=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(s,{apply:Iu(((r,o,i)=>{const[a]=i,{id:s,styleId:c}=Ou(o,t,n.styleMirror);return(s&&-1!==s||c&&-1!==c)&&e({id:s,styleId:c,replaceSync:a}),r.apply(o,i)}))}));const c={};_u("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(_u("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),_u("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),_u("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const l={};return Object.entries(c).forEach((([r,o])=>{l[r]={insertRule:o.prototype.insertRule,deleteRule:o.prototype.deleteRule},o.prototype.insertRule=new Proxy(l[r].insertRule,{apply:Iu(((r,o,i)=>{const[a,s]=i,{id:c,styleId:l}=Ou(o.parentStyleSheet,t,n.styleMirror);return(c&&-1!==c||l&&-1!==l)&&e({id:c,styleId:l,adds:[{rule:a,index:[...Mu(o),s||0]}]}),r.apply(o,i)}))}),o.prototype.deleteRule=new Proxy(l[r].deleteRule,{apply:Iu(((r,o,i)=>{const[a]=i,{id:s,styleId:c}=Ou(o.parentStyleSheet,t,n.styleMirror);return(s&&-1!==s||c&&-1!==c)&&e({id:s,styleId:c,removes:[{index:[...Mu(o),a]}]}),r.apply(o,i)}))})})),Iu((()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=i,a&&(r.CSSStyleSheet.prototype.replace=a),s&&(r.CSSStyleSheet.prototype.replaceSync=s),Object.entries(c).forEach((([e,t])=>{t.prototype.insertRule=l[e].insertRule,t.prototype.deleteRule=l[e].deleteRule}))}))}(e,{win:n}),u=Du(e,e.doc),h=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){const i=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:Iu(((o,a,s)=>{var c;const[l,d,u]=s;if(n.has(l))return i.apply(a,[l,d,u]);const{id:h,styleId:p}=Ou(null===(c=a.parentRule)||void 0===c?void 0:c.parentStyleSheet,t,r.styleMirror);return(h&&-1!==h||p&&-1!==p)&&e({id:h,styleId:p,set:{property:l,value:d,priority:u},index:Mu(a.parentRule)}),o.apply(a,s)}))});const a=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(a,{apply:Iu(((o,i,s)=>{var c;const[l]=s;if(n.has(l))return a.apply(i,[l]);const{id:d,styleId:u}=Ou(null===(c=i.parentRule)||void 0===c?void 0:c.parentStyleSheet,t,r.styleMirror);return(d&&-1!==d||u&&-1!==u)&&e({id:d,styleId:u,remove:{property:l},index:Mu(i.parentRule)}),o.apply(i,s)}))}),Iu((()=>{o.CSSStyleDeclaration.prototype.setProperty=i,o.CSSStyleDeclaration.prototype.removeProperty=a}))}(e,{win:n}),p=e.collectFonts?function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],o=new WeakMap,i=n.FontFace;n.FontFace=function(e,t,n){const r=new i(e,t,n);return o.set(r,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};const a=Od(t.fonts,"add",(function(t){return function(n){return setTimeout(Iu((()=>{const t=o.get(n);t&&(e(t),o.delete(n))})),0),t.apply(this,[n])}}));return r.push((()=>{n.FontFace=i})),r.push(a),Iu((()=>{r.forEach((e=>e()))}))}(e):()=>{},m=function(e){const{doc:t,mirror:n,blockClass:r,blockSelector:o,selectionCb:i}=e;let a=!0;const s=Iu((()=>{const e=t.getSelection();if(!e||a&&(null==e?void 0:e.isCollapsed))return;a=e.isCollapsed||!1;const s=[],c=e.rangeCount||0;for(let t=0;t<c;t++){const i=e.getRangeAt(t),{startContainer:a,startOffset:c,endContainer:l,endOffset:d}=i;xd(a,r,o,!0)||xd(l,r,o,!0)||s.push({start:n.getId(a),startOffset:c,end:n.getId(l),endOffset:d})}i({ranges:s})}));return s(),bd("selectionchange",s)}(e),f=[];for(const t of e.plugins)f.push(t.observer(t.callback,n,t.options));return Iu((()=>{Su.forEach((e=>e.reset())),r.disconnect(),o(),i(),a(),s(),c(),l(),d(),u(),h(),p(),m(),f.forEach((e=>e()))}))}function ku(e){return void 0!==window[e]}function _u(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class xu{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,r){const o=n||this.getIdToRemoteIdMap(e),i=r||this.getRemoteIdToIdMap(e);let a=o.get(t);return a||(a=this.generateIdFn(),o.set(t,a),i.set(a,t)),a}getIds(e,t){const n=this.getIdToRemoteIdMap(e),r=this.getRemoteIdToIdMap(e);return t.map((t=>this.getId(e,t,n,r)))}getRemoteId(e,t,n){const r=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const o=r.get(t);return o||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map((t=>this.getRemoteId(e,t,n)))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}class Lu{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new xu(zl),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new xu(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){var n;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),null===(n=this.loadListener)||void 0===n||n.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const r=this.transformCrossOriginEvent(n,t.data.event);r&&this.wrappedEmit(r,t.data.isCheckout)}transformCrossOriginEvent(e,t){var n;switch(t.type){case tu.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:tu.IncrementalSnapshot,data:{source:nu.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case tu.Meta:case tu.Load:case tu.DomContentLoaded:return!1;case tu.Plugin:return t;case tu.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case tu.IncrementalSnapshot:switch(t.data.source){case nu.Mutation:return t.data.adds.forEach((t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)})),t.data.removes.forEach((t=>{this.replaceIds(t,e,["parentId","id"])})),t.data.attributes.forEach((t=>{this.replaceIds(t,e,["id"])})),t.data.texts.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case nu.Drag:case nu.TouchMove:case nu.MouseMove:return t.data.positions.forEach((t=>{this.replaceIds(t,e,["id"])})),t;case nu.ViewportResize:return!1;case nu.MediaInteraction:case nu.MouseInteraction:case nu.Scroll:case nu.CanvasMutation:case nu.Input:return this.replaceIds(t.data,e,["id"]),t;case nu.StyleSheetRule:case nu.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case nu.Font:return t;case nu.Selection:return t.data.ranges.forEach((t=>{this.replaceIds(t,e,["start","end"])})),t;case nu.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),null===(n=t.data.styles)||void 0===n||n.forEach((t=>{this.replaceStyleIds(t,e,["styleId"])})),t}}}replace(e,t,n,r){for(const o of r)(Array.isArray(t[o])||"number"==typeof t[o])&&(Array.isArray(t[o])?t[o]=e.getIds(n,t[o]):t[o]=e.getId(n,t[o]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach((e=>{this.replaceIdOnNode(e,t)}))}patchRootIdOnNode(e,t){e.type===Dl.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach((e=>{this.patchRootIdOnNode(e,t)}))}}class Fu{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!xl(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e);const n=Eu(Object.assign(Object.assign({},this.bypassOptions),{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(bu(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))),setTimeout((()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(Du({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))}),0)}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(Od(e.prototype,"attachShadow",(function(e){return function(r){const o=e.call(this,r);return this.shadowRoot&&$d(this)&&n.addShadowRoot(this.shadowRoot,t),o}})))}reset(){this.restoreHandlers.forEach((e=>{try{e()}catch(e){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */function Bu(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}for(var Pu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Uu="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Wu=0;Wu<64;Wu++)Uu[Pu.charCodeAt(Wu)]=Wu;var Vu=function(e){var t,n,r,o,i,a=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var l=new ArrayBuffer(a),d=new Uint8Array(l);for(t=0;t<s;t+=4)n=Uu[e.charCodeAt(t)],r=Uu[e.charCodeAt(t+1)],o=Uu[e.charCodeAt(t+2)],i=Uu[e.charCodeAt(t+3)],d[c++]=n<<2|r>>4,d[c++]=(15&r)<<4|o>>2,d[c++]=(3&o)<<6|63&i;return l};const Gu=new Map;const ju=(e,t,n)=>{if(!e||!Hu(e,t)&&"object"!=typeof e)return;const r=function(e,t){let n=Gu.get(e);return n||(n=new Map,Gu.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}(n,e.constructor.name);let o=r.indexOf(e);return-1===o&&(o=r.length,r.push(e)),o};function Yu(e,t,n){if(e instanceof Array)return e.map((e=>Yu(e,t,n)));if(null===e)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray){return{rr_type:e.constructor.name,args:[Object.values(e)]}}if(e instanceof ArrayBuffer){const t=e.constructor.name,n=function(e){var t,n=new Uint8Array(e),r=n.length,o="";for(t=0;t<r;t+=3)o+=Pu[n[t]>>2],o+=Pu[(3&n[t])<<4|n[t+1]>>4],o+=Pu[(15&n[t+1])<<2|n[t+2]>>6],o+=Pu[63&n[t+2]];return r%3==2?o=o.substring(0,o.length-1)+"=":r%3==1&&(o=o.substring(0,o.length-2)+"=="),o}(e);return{rr_type:t,base64:n}}if(e instanceof DataView){return{rr_type:e.constructor.name,args:[Yu(e.buffer,t,n),e.byteOffset,e.byteLength]}}if(e instanceof HTMLImageElement){const t=e.constructor.name,{src:n}=e;return{rr_type:t,src:n}}if(e instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:e.toDataURL()}}if(e instanceof ImageData){return{rr_type:e.constructor.name,args:[Yu(e.data,t,n),e.width,e.height]}}if(Hu(e,t)||"object"==typeof e){return{rr_type:e.constructor.name,index:ju(e,t,n)}}return e}const Zu=(e,t,n)=>[...e].map((e=>Yu(e,t,n))),Hu=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((e=>"function"==typeof t[e]));return Boolean(n.find((n=>e instanceof t[n])))};function Ku(e,t,n,r){const o=[];try{const i=Od(e.HTMLCanvasElement.prototype,"getContext",(function(e){return function(o,...i){if(!xd(this,t,n,!0)){const e=function(e){return"experimental-webgl"===e?"webgl":e}(o);if("__context"in this||(this.__context=e),r&&["webgl","webgl2"].includes(e))if(i[0]&&"object"==typeof i[0]){const e=i[0];e.preserveDrawingBuffer||(e.preserveDrawingBuffer=!0)}else i.splice(0,1,{preserveDrawingBuffer:!0})}return e.apply(this,[o,...i])}}));o.push(i)}catch(e){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{o.forEach((e=>e()))}}function zu(e,t,n,r,o,i,a){const s=[],c=Object.getOwnPropertyNames(e);for(const i of c)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(i))try{if("function"!=typeof e[i])continue;const c=Od(e,i,(function(e){return function(...s){const c=e.apply(this,s);if(ju(c,a,this),"tagName"in this.canvas&&!xd(this.canvas,r,o,!0)){const e=Zu([...s],a,this),r={type:t,property:i,args:e};n(this.canvas,r)}return c}}));s.push(c)}catch(r){const o=Md(e,i,{set(e){n(this.canvas,{type:t,property:i,args:[e],setter:!0})}});s.push(o)}return s}function Ju(e,t,n){var r=void 0===t?null:t,o=function(e,t){var n=atob(e);if(t){for(var r=new Uint8Array(n.length),o=0,i=n.length;o<i;++o)r[o]=n.charCodeAt(o);return String.fromCharCode.apply(null,new Uint16Array(r.buffer))}return n}(e,void 0!==n&&n),i=o.indexOf("\n",10)+1,a=o.substring(i)+(r?"//# sourceMappingURL="+r:""),s=new Blob([a],{type:"application/javascript"});return URL.createObjectURL(s)}var Xu,Qu,qu,$u,eh=(Xu="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIC8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKg0KICAgIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLg0KDQogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55DQogICAgcHVycG9zZSB3aXRoIG9yIHdpdGhvdXQgZmVlIGlzIGhlcmVieSBncmFudGVkLg0KDQogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgNCiAgICBSRUdBUkQgVE8gVEhJUyBTT0ZUV0FSRSBJTkNMVURJTkcgQUxMIElNUExJRUQgV0FSUkFOVElFUyBPRiBNRVJDSEFOVEFCSUxJVFkNCiAgICBBTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsDQogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NDQogICAgTE9TUyBPRiBVU0UsIERBVEEgT1IgUFJPRklUUywgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIE5FR0xJR0VOQ0UgT1INCiAgICBPVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SDQogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4NCiAgICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqLw0KDQogICAgZnVuY3Rpb24gX19hd2FpdGVyKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikgew0KICAgICAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH0NCiAgICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7DQogICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvclsidGhyb3ciXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9DQogICAgICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfQ0KICAgICAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpOw0KICAgICAgICB9KTsNCiAgICB9CgogICAgLyoKICAgICAqIGJhc2U2NC1hcnJheWJ1ZmZlciAxLjAuMSA8aHR0cHM6Ly9naXRodWIuY29tL25pa2xhc3ZoL2Jhc2U2NC1hcnJheWJ1ZmZlcj4KICAgICAqIENvcHlyaWdodCAoYykgMjAyMSBOaWtsYXMgdm9uIEhlcnR6ZW4gPGh0dHBzOi8vaGVydHplbi5jb20+CiAgICAgKiBSZWxlYXNlZCB1bmRlciBNSVQgTGljZW5zZQogICAgICovCiAgICB2YXIgY2hhcnMgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyc7CiAgICAvLyBVc2UgYSBsb29rdXAgdGFibGUgdG8gZmluZCB0aGUgaW5kZXguCiAgICB2YXIgbG9va3VwID0gdHlwZW9mIFVpbnQ4QXJyYXkgPT09ICd1bmRlZmluZWQnID8gW10gOiBuZXcgVWludDhBcnJheSgyNTYpOwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykgewogICAgICAgIGxvb2t1cFtjaGFycy5jaGFyQ29kZUF0KGkpXSA9IGk7CiAgICB9CiAgICB2YXIgZW5jb2RlID0gZnVuY3Rpb24gKGFycmF5YnVmZmVyKSB7CiAgICAgICAgdmFyIGJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXlidWZmZXIpLCBpLCBsZW4gPSBieXRlcy5sZW5ndGgsIGJhc2U2NCA9ICcnOwogICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW47IGkgKz0gMykgewogICAgICAgICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaV0gPj4gMl07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1soKGJ5dGVzW2ldICYgMykgPDwgNCkgfCAoYnl0ZXNbaSArIDFdID4+IDQpXTsKICAgICAgICAgICAgYmFzZTY0ICs9IGNoYXJzWygoYnl0ZXNbaSArIDFdICYgMTUpIDw8IDIpIHwgKGJ5dGVzW2kgKyAyXSA+PiA2KV07CiAgICAgICAgICAgIGJhc2U2NCArPSBjaGFyc1tieXRlc1tpICsgMl0gJiA2M107CiAgICAgICAgfQogICAgICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgJz0nOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgICAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgJz09JzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGJhc2U2NDsKICAgIH07CgogICAgY29uc3QgbGFzdEJsb2JNYXAgPSBuZXcgTWFwKCk7DQogICAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gbmV3IE1hcCgpOw0KICAgIGZ1bmN0aW9uIGdldFRyYW5zcGFyZW50QmxvYkZvcih3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucykgew0KICAgICAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiogKCkgew0KICAgICAgICAgICAgY29uc3QgaWQgPSBgJHt3aWR0aH0tJHtoZWlnaHR9YDsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgaWYgKHRyYW5zcGFyZW50QmxvYk1hcC5oYXMoaWQpKQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNwYXJlbnRCbG9iTWFwLmdldChpZCk7DQogICAgICAgICAgICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsNCiAgICAgICAgICAgICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgnMmQnKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0geWllbGQgYmxvYi5hcnJheUJ1ZmZlcigpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7DQogICAgICAgICAgICAgICAgdHJhbnNwYXJlbnRCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTY0Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZWxzZSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCiAgICB9DQogICAgY29uc3Qgd29ya2VyID0gc2VsZjsNCiAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHsNCiAgICAgICAgcmV0dXJuIF9fYXdhaXRlcih0aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHsNCiAgICAgICAgICAgIGlmICgnT2Zmc2NyZWVuQ2FudmFzJyBpbiBnbG9iYWxUaGlzKSB7DQogICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgYml0bWFwLCB3aWR0aCwgaGVpZ2h0LCBkYXRhVVJMT3B0aW9ucyB9ID0gZS5kYXRhOw0KICAgICAgICAgICAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zKTsNCiAgICAgICAgICAgICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOw0KICAgICAgICAgICAgICAgIGNvbnN0IGN0eCA9IG9mZnNjcmVlbi5nZXRDb250ZXh0KCcyZCcpOw0KICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoYml0bWFwLCAwLCAwKTsNCiAgICAgICAgICAgICAgICBiaXRtYXAuY2xvc2UoKTsNCiAgICAgICAgICAgICAgICBjb25zdCBibG9iID0geWllbGQgb2Zmc2NyZWVuLmNvbnZlcnRUb0Jsb2IoZGF0YVVSTE9wdGlvbnMpOw0KICAgICAgICAgICAgICAgIGNvbnN0IHR5cGUgPSBibG9iLnR5cGU7DQogICAgICAgICAgICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSB5aWVsZCBibG9iLmFycmF5QnVmZmVyKCk7DQogICAgICAgICAgICAgICAgY29uc3QgYmFzZTY0ID0gZW5jb2RlKGFycmF5QnVmZmVyKTsNCiAgICAgICAgICAgICAgICBpZiAoIWxhc3RCbG9iTWFwLmhhcyhpZCkgJiYgKHlpZWxkIHRyYW5zcGFyZW50QmFzZTY0KSA9PT0gYmFzZTY0KSB7DQogICAgICAgICAgICAgICAgICAgIGxhc3RCbG9iTWFwLnNldChpZCwgYmFzZTY0KTsNCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KQ0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7DQogICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHsNCiAgICAgICAgICAgICAgICAgICAgaWQsDQogICAgICAgICAgICAgICAgICAgIHR5cGUsDQogICAgICAgICAgICAgICAgICAgIGJhc2U2NCwNCiAgICAgICAgICAgICAgICAgICAgd2lkdGgsDQogICAgICAgICAgICAgICAgICAgIGhlaWdodCwNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBlbHNlIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfSk7DQogICAgfTsKCn0pKCk7Cgo=",Qu=null,qu=!1,function(e){return $u=$u||Ju(Xu,Qu,qu),new Worker($u,e)});class th{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(e,t)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(e)||this.pendingCanvasMutations.set(e,[]),this.pendingCanvasMutations.get(e).push(t)};const{sampling:t="all",win:n,blockClass:r,blockSelector:o,recordCanvas:i,dataURLOptions:a}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,i&&"all"===t&&this.initCanvasMutationObserver(n,r,o),i&&"number"==typeof t&&this.initCanvasFPSObserver(t,n,r,o,{dataURLOptions:a})}initCanvasFPSObserver(e,t,n,r,o){const i=Ku(t,n,r,!0),a=new Map,s=new eh;s.onmessage=e=>{const{id:t}=e.data;if(a.set(t,!1),!("base64"in e.data))return;const{base64:n,type:r,width:o,height:i}=e.data;this.mutationCb({id:t,type:iu["2D"],commands:[{property:"clearRect",args:[0,0,o,i]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:n}],type:r}]},0,0]}]})};const c=1e3/e;let l,d=0;const u=e=>{d&&e-d<c||(d=e,(()=>{const e=[];return t.document.querySelectorAll("canvas").forEach((t=>{xd(t,n,r,!0)||e.push(t)})),e})().forEach((e=>Bu(this,void 0,void 0,(function*(){var t;const n=this.mirror.getId(e);if(a.get(n))return;if(a.set(n,!0),["webgl","webgl2"].includes(e.__context)){const n=e.getContext(e.__context);!1===(null===(t=null==n?void 0:n.getContextAttributes())||void 0===t?void 0:t.preserveDrawingBuffer)&&n.clear(n.COLOR_BUFFER_BIT)}const r=yield createImageBitmap(e);s.postMessage({id:n,bitmap:r,width:e.width,height:e.height,dataURLOptions:o.dataURLOptions},[r])}))))),l=requestAnimationFrame(u)};l=requestAnimationFrame(u),this.resetObservers=()=>{i(),cancelAnimationFrame(l)}}initCanvasMutationObserver(e,t,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const r=Ku(e,t,n,!1),o=function(e,t,n,r){const o=[],i=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const a of i)try{if("function"!=typeof t.CanvasRenderingContext2D.prototype[a])continue;const i=Od(t.CanvasRenderingContext2D.prototype,a,(function(o){return function(...i){return xd(this.canvas,n,r,!0)||setTimeout((()=>{const n=Zu([...i],t,this);e(this.canvas,{type:iu["2D"],property:a,args:n})}),0),o.apply(this,i)}}));o.push(i)}catch(n){const r=Md(t.CanvasRenderingContext2D.prototype,a,{set(t){e(this.canvas,{type:iu["2D"],property:a,args:[t],setter:!0})}});o.push(r)}return()=>{o.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n),i=function(e,t,n,r){const o=[];return o.push(...zu(t.WebGLRenderingContext.prototype,iu.WebGL,e,n,r,0,t)),void 0!==t.WebGL2RenderingContext&&o.push(...zu(t.WebGL2RenderingContext.prototype,iu.WebGL2,e,n,r,0,t)),()=>{o.forEach((e=>e()))}}(this.processMutation.bind(this),e,t,n,this.mirror);this.resetObservers=()=>{r(),o(),i()}}startPendingCanvasMutationFlusher(){requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const e=t=>{this.rafStamps.latestId=t,requestAnimationFrame(e)};requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((e,t)=>{const n=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,n)})),requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(e);if(!n||-1===t)return;const r=n.map((e=>{const t=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["type"]);return t})),{type:o}=n[0];this.mutationCb({id:t,type:o,commands:r}),this.pendingCanvasMutations.delete(e)}}class nh{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new Jd,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},r=[];for(const t of e){let e;if(this.styleMirror.has(t))e=this.styleMirror.getId(t);else{e=this.styleMirror.add(t);const n=Array.from(t.rules||CSSRule);r.push({styleId:e,rules:n.map(((e,t)=>({rule:Fl(e),index:t})))})}n.styleIds.push(e)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class rh{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){requestAnimationFrame((()=>{this.clear(),this.loop&&this.periodicallyClear()}))}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some((e=>e!==t))}add(e,t){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}function oh(e){return Object.assign(Object.assign({},e),{timestamp:Dd()})}let ih,ah,sh,ch=!1;const lh=Pl();function dh(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:i=null,ignoreClass:a="rr-ignore",ignoreSelector:s=null,maskTextClass:c="rr-mask",maskTextSelector:l=null,inlineStylesheet:d=!0,maskAllInputs:u,maskInputOptions:h,slimDOMOptions:p,maskInputFn:m,maskTextFn:f,hooks:g,packFn:v,sampling:y={},dataURLOptions:I={},mousemoveWait:S,recordCanvas:C=!1,recordCrossOriginIframes:E=!1,recordAfter:T=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:b=!1,collectFonts:w=!1,inlineImages:A=!1,plugins:N,keepIframeSrcFn:M=()=>!1,ignoreCSSAttributes:O=new Set([]),errorHandler:D}=e;vu(D);const R=!E||window.parent===window;let k=!1;if(!R)try{window.parent.document&&(k=!1)}catch(e){k=!0}if(R&&!t)throw new Error("emit function is required");void 0!==S&&void 0===y.mousemove&&(y.mousemove=S),lh.reset();const _=!0===u?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==h?h:{password:!0},x=!0===p||"all"===p?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===p,headMetaDescKeywords:"all"===p}:p||{};let L;Ud();let F=0;const B=e=>{for(const t of N||[])t.eventProcessor&&(e=t.eventProcessor(e));return v&&!k&&(e=v(e)),e};ih=(e,o)=>{var i;if(!(null===(i=Su[0])||void 0===i?void 0:i.isFrozen())||e.type===tu.FullSnapshot||e.type===tu.IncrementalSnapshot&&e.data.source===nu.Mutation||Su.forEach((e=>e.unfreeze())),R)null==t||t(B(e),o);else if(k){const t={type:"rrweb",event:B(e),origin:window.location.origin,isCheckout:o};window.parent.postMessage(t,"*")}if(e.type===tu.FullSnapshot)L=e,F=0;else if(e.type===tu.IncrementalSnapshot){if(e.data.source===nu.Mutation&&e.data.isAttachIframe)return;F++;const t=r&&F>=r,o=n&&e.timestamp-L.timestamp>n;(t||o)&&ah(!0)}};const P=e=>{ih(oh({type:tu.IncrementalSnapshot,data:Object.assign({source:nu.Mutation},e)}))},U=e=>ih(oh({type:tu.IncrementalSnapshot,data:Object.assign({source:nu.Scroll},e)})),W=e=>ih(oh({type:tu.IncrementalSnapshot,data:Object.assign({source:nu.CanvasMutation},e)})),V=new nh({mutationCb:P,adoptedStyleSheetCb:e=>ih(oh({type:tu.IncrementalSnapshot,data:Object.assign({source:nu.AdoptedStyleSheet},e)}))}),G=new Lu({mirror:lh,mutationCb:P,stylesheetManager:V,recordCrossOriginIframes:E,wrappedEmit:ih});for(const e of N||[])e.getMirror&&e.getMirror({nodeMirror:lh,crossOriginIframeMirror:G.crossOriginIframeMirror,crossOriginIframeStyleMirror:G.crossOriginIframeStyleMirror});const j=new rh;sh=new th({recordCanvas:C,mutationCb:W,win:window,blockClass:o,blockSelector:i,mirror:lh,sampling:y.canvas,dataURLOptions:I});const Y=new Fu({mutationCb:P,scrollCb:U,bypassOptions:{blockClass:o,blockSelector:i,maskTextClass:c,maskTextSelector:l,inlineStylesheet:d,maskInputOptions:_,dataURLOptions:I,maskTextFn:f,maskInputFn:m,recordCanvas:C,inlineImages:A,sampling:y,slimDOMOptions:x,iframeManager:G,stylesheetManager:V,canvasManager:sh,keepIframeSrcFn:M,processedNodeManager:j},mirror:lh});ah=(e=!1)=>{ih(oh({type:tu.Meta,data:{href:window.location.href,width:_d(),height:kd()}}),e),V.reset(),Y.init(),Su.forEach((e=>e.lock()));const t=function(e,t){var n=t||{},r=n.mirror,o=void 0===r?new Bl:r,i=n.blockClass,a=void 0===i?"rr-block":i,s=n.blockSelector,c=void 0===s?null:s,l=n.maskTextClass,d=void 0===l?"rr-mask":l,u=n.maskTextSelector,h=void 0===u?null:u,p=n.inlineStylesheet,m=void 0===p||p,f=n.inlineImages,g=void 0!==f&&f,v=n.recordCanvas,y=void 0!==v&&v,I=n.maskAllInputs,S=void 0!==I&&I,C=n.maskTextFn,E=n.maskInputFn,T=n.slimDOM,b=void 0!==T&&T,w=n.dataURLOptions,A=n.preserveWhiteSpace,N=n.onSerialize,M=n.onIframeLoad,O=n.iframeLoadTimeout,D=n.onStylesheetLoad,R=n.stylesheetLoadTimeout,k=n.keepIframeSrcFn;return ud(e,{doc:e,mirror:o,blockClass:a,blockSelector:c,maskTextClass:d,maskTextSelector:h,skipChild:!1,inlineStylesheet:m,maskInputOptions:!0===S?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===S?{password:!0}:S,maskTextFn:C,maskInputFn:E,slimDOMOptions:!0===b||"all"===b?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===b,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===b?{}:b,dataURLOptions:w,inlineImages:g,recordCanvas:y,preserveWhiteSpace:A,onSerialize:N,onIframeLoad:M,iframeLoadTimeout:O,onStylesheetLoad:D,stylesheetLoadTimeout:R,keepIframeSrcFn:void 0===k?function(){return!1}:k,newlyAddedElement:!1})}(document,{mirror:lh,blockClass:o,blockSelector:i,maskTextClass:c,maskTextSelector:l,inlineStylesheet:d,maskAllInputs:_,maskTextFn:f,slimDOM:x,dataURLOptions:I,recordCanvas:C,inlineImages:A,onSerialize:e=>{Gd(e,lh)&&G.addIframe(e),jd(e,lh)&&V.trackLinkElement(e),Zd(e)&&Y.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{G.attachIframe(e,t),Y.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{V.attachLinkElement(e,t)},keepIframeSrcFn:M});if(!t)return console.warn("Failed to snapshot the document");ih(oh({type:tu.FullSnapshot,data:{node:t,initialOffset:Rd(window)}}),e),Su.forEach((e=>e.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&V.adoptStyleSheets(document.adoptedStyleSheets,lh.getId(document))};try{const e=[],t=e=>{var t;return Iu(Ru)({mutationCb:P,mousemoveCb:(e,t)=>ih(oh({type:tu.IncrementalSnapshot,data:{source:t,positions:e}})),mouseInteractionCb:e=>ih(oh({type:tu.IncrementalSnapshot,data:Object.assign({source:nu.MouseInteraction},e)})),scrollCb:U,viewportResizeCb:e=>ih(oh({type:tu.IncrementalSnapshot,data:Object.assign({source:nu.ViewportResize},e)})),inputCb:e=>ih(oh({type:tu.IncrementalSnapshot,data:Object.assign({source:nu.Input},e)})),mediaInteractionCb:e=>ih(oh({type:tu.IncrementalSnapshot,data:Object.assign({source:nu.MediaInteraction},e)})),styleSheetRuleCb:e=>ih(oh({type:tu.IncrementalSnapshot,data:Object.assign({source:nu.StyleSheetRule},e)})),styleDeclarationCb:e=>ih(oh({type:tu.IncrementalSnapshot,data:Object.assign({source:nu.StyleDeclaration},e)})),canvasMutationCb:W,fontCb:e=>ih(oh({type:tu.IncrementalSnapshot,data:Object.assign({source:nu.Font},e)})),selectionCb:e=>{ih(oh({type:tu.IncrementalSnapshot,data:Object.assign({source:nu.Selection},e)}))},blockClass:o,ignoreClass:a,ignoreSelector:s,maskTextClass:c,maskTextSelector:l,maskInputOptions:_,inlineStylesheet:d,sampling:y,recordCanvas:C,inlineImages:A,userTriggeredOnInput:b,collectFonts:w,doc:e,maskInputFn:m,maskTextFn:f,keepIframeSrcFn:M,blockSelector:i,slimDOMOptions:x,dataURLOptions:I,mirror:lh,iframeManager:G,stylesheetManager:V,shadowDomManager:Y,processedNodeManager:j,canvasManager:sh,ignoreCSSAttributes:O,plugins:(null===(t=null==N?void 0:N.filter((e=>e.observer)))||void 0===t?void 0:t.map((e=>({observer:e.observer,options:e.options,callback:t=>ih(oh({type:tu.Plugin,data:{plugin:e.name,payload:t}}))}))))||[]},g)};G.addLoadListener((n=>{try{e.push(t(n.contentDocument))}catch(e){console.warn(e)}}));const n=()=>{ah(),e.push(t(document)),ch=!0};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(bd("DOMContentLoaded",(()=>{ih(oh({type:tu.DomContentLoaded,data:{}})),"DOMContentLoaded"===T&&n()}))),e.push(bd("load",(()=>{ih(oh({type:tu.Load,data:{}})),"load"===T&&n()}),window))),()=>{e.forEach((e=>e())),j.destroy(),ch=!1,yu()}}catch(e){console.warn(e)}}var uh;dh.addCustomEvent=(e,t)=>{if(!ch)throw new Error("please add custom event after start recording");ih(oh({type:tu.Custom,data:{tag:e,payload:t}}))},dh.freezePage=()=>{Su.forEach((e=>e.freeze()))},dh.takeFullSnapshot=e=>{if(!ch)throw new Error("please take full snapshot after start recording");ah(e)},dh.mirror=lh,function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(uh||(uh={}));var hh=function(){function e(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}return e.prototype.getId=function(e){var t;if(!e)return-1;var n=null===(t=this.getMeta(e))||void 0===t?void 0:t.id;return null!=n?n:-1},e.prototype.getNode=function(e){return this.idNodeMap.get(e)||null},e.prototype.getIds=function(){return Array.from(this.idNodeMap.keys())},e.prototype.getMeta=function(e){return this.nodeMetaMap.get(e)||null},e.prototype.removeNodeFromMap=function(e){var t=this,n=this.getId(e);this.idNodeMap.delete(n),e.childNodes&&e.childNodes.forEach((function(e){return t.removeNodeFromMap(e)}))},e.prototype.has=function(e){return this.idNodeMap.has(e)},e.prototype.hasNode=function(e){return this.nodeMetaMap.has(e)},e.prototype.add=function(e,t){var n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)},e.prototype.replace=function(e,t){var n=this.getNode(e);if(n){var r=this.nodeMetaMap.get(n);r&&this.nodeMetaMap.set(t,r)}this.idNodeMap.set(e,t)},e.prototype.reset=function(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap},e}();function ph(e){const t=[];for(const n in e){const r=e[n];if("string"!=typeof r)continue;const o=yh(n);t.push(`${o}: ${r};`)}return t.join(" ")}const mh=/-([a-z])/g,fh=/^--[a-zA-Z0-9-]+$/,gh=e=>fh.test(e)?e:e.replace(mh,((e,t)=>t?t.toUpperCase():"")),vh=/\B([A-Z])/g,yh=e=>e.replace(vh,"-$1").toLowerCase();class Ih{constructor(...e){this.parentElement=null,this.parentNode=null,this.firstChild=null,this.lastChild=null,this.previousSibling=null,this.nextSibling=null,this.ELEMENT_NODE=Oh.ELEMENT_NODE,this.TEXT_NODE=Oh.TEXT_NODE}get childNodes(){const e=[];let t=this.firstChild;for(;t;)e.push(t),t=t.nextSibling;return e}contains(e){if(!(e instanceof Ih))return!1;if(e.ownerDocument!==this.ownerDocument)return!1;if(e===this)return!0;for(;e.parentNode;){if(e.parentNode===this)return!0;e=e.parentNode}return!1}appendChild(e){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(e,t){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(e){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}function Sh(e){return class extends e{constructor(e,t,n){super(),this.nodeType=Oh.DOCUMENT_TYPE_NODE,this.RRNodeType=uh.DocumentType,this.name=e,this.publicId=t,this.systemId=n,this.nodeName=e,this.textContent=null}toString(){return"RRDocumentType"}}}function Ch(e){return class extends e{constructor(e){super(),this.nodeType=Oh.ELEMENT_NODE,this.RRNodeType=uh.Element,this.attributes={},this.shadowRoot=null,this.tagName=e.toUpperCase(),this.nodeName=e.toUpperCase()}get textContent(){let e="";return this.childNodes.forEach((t=>e+=t.textContent)),e}set textContent(e){this.firstChild=null,this.lastChild=null,this.appendChild(this.ownerDocument.createTextNode(e))}get classList(){return new wh(this.attributes.class,(e=>{this.attributes.class=e}))}get id(){return this.attributes.id||""}get className(){return this.attributes.class||""}get style(){const e=this.attributes.style?function(e){const t={},n=/:(.+)/;return e.replace(/\/\*.*?\*\//g,"").split(/;(?![^(]*\))/g).forEach((function(e){if(e){const r=e.split(n);r.length>1&&(t[gh(r[0].trim())]=r[1].trim())}})),t}(this.attributes.style):{},t=/\B([A-Z])/g;return e.setProperty=(n,r,o)=>{if(t.test(n))return;const i=gh(n);r?e[i]=r:delete e[i],"important"===o&&(e[i]+=" !important"),this.attributes.style=ph(e)},e.removeProperty=n=>{if(t.test(n))return"";const r=gh(n),o=e[r]||"";return delete e[r],this.attributes.style=ph(e),o},e}getAttribute(e){return this.attributes[e]||null}setAttribute(e,t){this.attributes[e]=t}setAttributeNS(e,t,n){this.setAttribute(t,n)}removeAttribute(e){delete this.attributes[e]}appendChild(e){return Ah(this,e)}insertBefore(e,t){return Nh(this,e,t)}removeChild(e){return Mh(this,e)}attachShadow(e){const t=this.ownerDocument.createElement("SHADOWROOT");return this.shadowRoot=t,t}dispatchEvent(e){return!0}toString(){let e="";for(const t in this.attributes)e+=`${t}="${this.attributes[t]}" `;return`${this.tagName} ${e}`}}}function Eh(e){return class extends e{constructor(e){super(),this.nodeType=Oh.TEXT_NODE,this.nodeName="#text",this.RRNodeType=uh.Text,this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRText text=${JSON.stringify(this.data)}`}}}function Th(e){return class extends e{constructor(e){super(),this.nodeType=Oh.COMMENT_NODE,this.nodeName="#comment",this.RRNodeType=uh.Comment,this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRComment text=${JSON.stringify(this.data)}`}}}function bh(e){return class extends e{constructor(e){super(),this.nodeName="#cdata-section",this.nodeType=Oh.CDATA_SECTION_NODE,this.RRNodeType=uh.CDATA,this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRCDATASection data=${JSON.stringify(this.data)}`}}}class wh{constructor(e,t){if(this.classes=[],this.add=(...e)=>{for(const t of e){const e=String(t);this.classes.indexOf(e)>=0||this.classes.push(e)}this.onChange&&this.onChange(this.classes.join(" "))},this.remove=(...e)=>{this.classes=this.classes.filter((t=>-1===e.indexOf(t))),this.onChange&&this.onChange(this.classes.join(" "))},e){const t=e.trim().split(/\s+/);this.classes.push(...t)}this.onChange=t}}function Ah(e,t){return t.parentNode&&t.parentNode.removeChild(t),e.lastChild?(e.lastChild.nextSibling=t,t.previousSibling=e.lastChild):(e.firstChild=t,t.previousSibling=null),e.lastChild=t,t.nextSibling=null,t.parentNode=e,t.parentElement=e,t.ownerDocument=e.ownerDocument,t}function Nh(e,t,n){if(!n)return Ah(e,t);if(n.parentNode!==e)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return t===n||(t.parentNode&&t.parentNode.removeChild(t),t.previousSibling=n.previousSibling,n.previousSibling=t,t.nextSibling=n,t.previousSibling?t.previousSibling.nextSibling=t:e.firstChild=t,t.parentElement=e,t.parentNode=e,t.ownerDocument=e.ownerDocument),t}function Mh(e,t){if(t.parentNode!==e)throw new Error("Failed to execute 'removeChild' on 'RRNode': The RRNode to be removed is not a child of this RRNode.");return t.previousSibling?t.previousSibling.nextSibling=t.nextSibling:e.firstChild=t.nextSibling,t.nextSibling?t.nextSibling.previousSibling=t.previousSibling:e.lastChild=t.previousSibling,t.previousSibling=null,t.nextSibling=null,t.parentElement=null,t.parentNode=null,t}var Oh;!function(e){e[e.PLACEHOLDER=0]="PLACEHOLDER",e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",e[e.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",e[e.ENTITY_NODE=6]="ENTITY_NODE",e[e.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE",e[e.DOCUMENT_NODE=9]="DOCUMENT_NODE",e[e.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",e[e.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE"}(Oh||(Oh={}));const Dh={svg:"http://www.w3.org/2000/svg","xlink:href":"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/xmlns/"},Rh={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};let kh=null;function _h(e,t,n,r=t.mirror||t.ownerDocument.mirror){e=function(e,t,n,r){var o;n.afterAppend&&!kh&&(kh=new WeakSet,setTimeout((()=>{kh=null}),0));if(!Fh(e,t)){const i=Lh(t,n.mirror,r);null===(o=e.parentNode)||void 0===o||o.replaceChild(i,e),e=i}switch(t.RRNodeType){case uh.Document:if(!Bh(e,t,n.mirror,r)){const o=r.getMeta(t);o&&(n.mirror.removeNodeFromMap(e),e.close(),e.open(),n.mirror.add(e,o),null==kh||kh.add(e))}break;case uh.Element:{const o=e,i=t;switch(i.tagName){case"IFRAME":{const o=e.contentDocument;if(!o)break;_h(o,t.contentDocument,n,r);break}}i.shadowRoot&&(o.shadowRoot||o.attachShadow({mode:"open"}),xh(o.shadowRoot,i.shadowRoot,n,r));break}}return e}(e,t,n,r),xh(e,t,n,r),function(e,t,n,r){var o;switch(t.RRNodeType){case uh.Document:{const e=t.scrollData;e&&n.applyScroll(e,!0);break}case uh.Element:{const o=e,i=t;switch(function(e,t,n){const r=e.attributes,o=t.attributes;for(const r in o){const i=o[r],a=n.getMeta(t);if((null==a?void 0:a.isSVG)&&Dh[r])e.setAttributeNS(Dh[r],r,i);else if("CANVAS"===t.tagName&&"rr_dataURL"===r){const t=document.createElement("img");t.src=i,t.onload=()=>{const n=e.getContext("2d");n&&n.drawImage(t,0,0,t.width,t.height)}}else{if("IFRAME"===t.tagName&&"srcdoc"===r)continue;e.setAttribute(r,i)}}for(const{name:t}of Array.from(r))t in o||e.removeAttribute(t);t.scrollLeft&&(e.scrollLeft=t.scrollLeft),t.scrollTop&&(e.scrollTop=t.scrollTop)}(o,i,r),i.scrollData&&n.applyScroll(i.scrollData,!0),i.inputData&&n.applyInput(i.inputData),i.tagName){case"AUDIO":case"VIDEO":{const t=e,n=i;void 0!==n.paused&&(n.paused?t.pause():t.play()),void 0!==n.muted&&(t.muted=n.muted),void 0!==n.volume&&(t.volume=n.volume),void 0!==n.currentTime&&(t.currentTime=n.currentTime),void 0!==n.playbackRate&&(t.playbackRate=n.playbackRate);break}case"CANVAS":{const r=t;if(null!==r.rr_dataURL){const e=document.createElement("img");e.onload=()=>{const t=o.getContext("2d");t&&t.drawImage(e,0,0,e.width,e.height)},e.src=r.rr_dataURL}r.canvasMutations.forEach((t=>n.applyCanvas(t.event,t.mutation,e)));break}case"STYLE":{const e=o.sheet;e&&t.rules.forEach((t=>n.applyStyleSheetMutation(t,e)));break}}break}case uh.Text:case uh.Comment:case uh.CDATA:e.textContent!==t.data&&(e.textContent=t.data)}(null==kh?void 0:kh.has(e))&&(kh.delete(e),null===(o=n.afterAppend)||void 0===o||o.call(n,e,n.mirror.getId(e)))}(e,t,n,r)}function xh(e,t,n,r){const o=Array.from(e.childNodes),i=t.childNodes;if(0===o.length&&0===i.length)return;let a,s,c=0,l=o.length-1,d=0,u=i.length-1,h=o[c],p=o[l],m=i[d],f=i[u];for(;c<=l&&d<=u;)if(void 0===h)h=o[++c];else if(void 0===p)p=o[--l];else if(Bh(h,m,n.mirror,r))h=o[++c],m=i[++d];else if(Bh(p,f,n.mirror,r))p=o[--l],f=i[--u];else if(Bh(h,f,n.mirror,r)){try{e.insertBefore(h,p.nextSibling)}catch(e){console.warn(e)}h=o[++c],f=i[--u]}else if(Bh(p,m,n.mirror,r)){try{e.insertBefore(p,h)}catch(e){console.warn(e)}p=o[--l],m=i[++d]}else{if(!a){a={};for(let e=c;e<=l;e++){const t=o[e];t&&n.mirror.hasNode(t)&&(a[n.mirror.getId(t)]=e)}}s=a[r.getId(m)];const t=o[s];if(void 0!==s&&t&&Bh(t,m,n.mirror,r)){try{e.insertBefore(t,h)}catch(e){console.warn(e)}o[s]=void 0}else{const t=Lh(m,n.mirror,r);"#document"===e.nodeName&&h&&(t.nodeType===t.DOCUMENT_TYPE_NODE&&h.nodeType===h.DOCUMENT_TYPE_NODE||t.nodeType===t.ELEMENT_NODE&&h.nodeType===h.ELEMENT_NODE)&&(e.removeChild(h),n.mirror.removeNodeFromMap(h),h=o[++c]);try{e.insertBefore(t,h||null)}catch(e){console.warn(e)}}m=i[++d]}if(c>l){const t=i[u+1];let o=null;for(t&&(o=n.mirror.getNode(r.getId(t)));d<=u;++d){const t=Lh(i[d],n.mirror,r);try{e.insertBefore(t,o)}catch(e){console.warn(e)}}}else if(d>u)for(;c<=l;c++){const t=o[c];if(t&&t.parentNode===e)try{e.removeChild(t),n.mirror.removeNodeFromMap(t)}catch(e){console.warn(e)}}let g=e.firstChild,v=t.firstChild;for(;null!==g&&null!==v;)_h(g,v,n,r),g=g.nextSibling,v=v.nextSibling}function Lh(e,t,n){const r=n.getId(e),o=n.getMeta(e);let i=null;if(r>-1&&(i=t.getNode(r)),null!==i&&Fh(i,e))return i;switch(e.RRNodeType){case uh.Document:i=new Document;break;case uh.DocumentType:i=document.implementation.createDocumentType(e.name,e.publicId,e.systemId);break;case uh.Element:{let t=e.tagName.toLowerCase();t=Rh[t]||t,i=o&&"isSVG"in o&&(null==o?void 0:o.isSVG)?document.createElementNS(Dh.svg,t):document.createElement(e.tagName);break}case uh.Text:i=document.createTextNode(e.data);break;case uh.Comment:i=document.createComment(e.data);break;case uh.CDATA:i=document.createCDATASection(e.data)}o&&t.add(i,Object.assign({},o));try{null==kh||kh.add(i)}catch(e){}return i}function Fh(e,t){return e.nodeType===t.nodeType&&(e.nodeType!==e.ELEMENT_NODE||e.tagName.toUpperCase()===t.tagName)}function Bh(e,t,n,r){const o=n.getId(e),i=r.getId(t);return-1!==o&&o===i&&Fh(e,t)}class Ph extends(function(e){return class t extends e{constructor(...e){super(e),this.nodeType=Oh.DOCUMENT_NODE,this.nodeName="#document",this.compatMode="CSS1Compat",this.RRNodeType=uh.Document,this.textContent=null,this.ownerDocument=this}get documentElement(){return this.childNodes.find((e=>e.RRNodeType===uh.Element&&"HTML"===e.tagName))||null}get body(){var e;return(null===(e=this.documentElement)||void 0===e?void 0:e.childNodes.find((e=>e.RRNodeType===uh.Element&&"BODY"===e.tagName)))||null}get head(){var e;return(null===(e=this.documentElement)||void 0===e?void 0:e.childNodes.find((e=>e.RRNodeType===uh.Element&&"HEAD"===e.tagName)))||null}get implementation(){return this}get firstElementChild(){return this.documentElement}appendChild(e){const t=e.RRNodeType;if((t===uh.Element||t===uh.DocumentType)&&this.childNodes.some((e=>e.RRNodeType===t)))throw new Error(`RRDomException: Failed to execute 'appendChild' on 'RRNode': Only one ${t===uh.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);const n=Ah(this,e);return n.parentElement=null,n}insertBefore(e,t){const n=e.RRNodeType;if((n===uh.Element||n===uh.DocumentType)&&this.childNodes.some((e=>e.RRNodeType===n)))throw new Error(`RRDomException: Failed to execute 'insertBefore' on 'RRNode': Only one ${n===uh.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);const r=Nh(this,e,t);return r.parentElement=null,r}removeChild(e){return Mh(this,e)}open(){this.firstChild=null,this.lastChild=null}close(){}write(e){let t;if('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'===e?t="-//W3C//DTD XHTML 1.0 Transitional//EN":'<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">'===e&&(t="-//W3C//DTD HTML 4.0 Transitional//EN"),t){const e=this.createDocumentType("html",t,"");this.open(),this.appendChild(e)}}createDocument(e,n,r){return new t}createDocumentType(e,t,n){const r=new(Sh(Ih))(e,t,n);return r.ownerDocument=this,r}createElement(e){const t=new(Ch(Ih))(e);return t.ownerDocument=this,t}createElementNS(e,t){return this.createElement(t)}createTextNode(e){const t=new(Eh(Ih))(e);return t.ownerDocument=this,t}createComment(e){const t=new(Th(Ih))(e);return t.ownerDocument=this,t}createCDATASection(e){const t=new(bh(Ih))(e);return t.ownerDocument=this,t}toString(){return"RRDocument"}}}(Ih)){get unserializedId(){return this._unserializedId--}constructor(e){super(),this.UNSERIALIZED_STARTING_ID=-2,this._unserializedId=this.UNSERIALIZED_STARTING_ID,this.mirror=new Xh,this.scrollData=null,e&&(this.mirror=e)}createDocument(e,t,n){return new Ph}createDocumentType(e,t,n){const r=new Uh(e,t,n);return r.ownerDocument=this,r}createElement(e){const t=e.toUpperCase();let n;switch(t){case"AUDIO":case"VIDEO":n=new Vh(t);break;case"IFRAME":n=new Yh(t,this.mirror);break;case"CANVAS":n=new Gh(t);break;case"STYLE":n=new jh(t);break;default:n=new Wh(t)}return n.ownerDocument=this,n}createComment(e){const t=new Hh(e);return t.ownerDocument=this,t}createCDATASection(e){const t=new Kh(e);return t.ownerDocument=this,t}createTextNode(e){const t=new Zh(e);return t.ownerDocument=this,t}destroyTree(){this.firstChild=null,this.lastChild=null,this.mirror.reset()}open(){super.open(),this._unserializedId=this.UNSERIALIZED_STARTING_ID}}const Uh=Sh(Ih);class Wh extends(Ch(Ih)){constructor(){super(...arguments),this.inputData=null,this.scrollData=null}}class Vh extends(function(e){return class extends e{attachShadow(e){throw new Error("RRDomException: Failed to execute 'attachShadow' on 'RRElement': This RRElement does not support attachShadow")}play(){this.paused=!1}pause(){this.paused=!0}}}(Wh)){}class Gh extends Wh{constructor(){super(...arguments),this.rr_dataURL=null,this.canvasMutations=[]}getContext(){return null}}class jh extends Wh{constructor(){super(...arguments),this.rules=[]}}class Yh extends Wh{constructor(e,t){super(e),this.contentDocument=new Ph,this.contentDocument.mirror=t}}const Zh=Eh(Ih),Hh=Th(Ih),Kh=bh(Ih);function zh(e,t,n,r){let o;switch(e.nodeType){case Oh.DOCUMENT_NODE:r&&"IFRAME"===r.nodeName?o=r.contentDocument:(o=t,o.compatMode=e.compatMode);break;case Oh.DOCUMENT_TYPE_NODE:{const n=e;o=t.createDocumentType(n.name,n.publicId,n.systemId);break}case Oh.ELEMENT_NODE:{const n=e,r=(i=n)instanceof HTMLFormElement?"FORM":i.tagName.toUpperCase();o=t.createElement(r);const a=o;for(const{name:e,value:t}of Array.from(n.attributes))a.attributes[e]=t;n.scrollLeft&&(a.scrollLeft=n.scrollLeft),n.scrollTop&&(a.scrollTop=n.scrollTop);break}case Oh.TEXT_NODE:o=t.createTextNode(e.textContent||"");break;case Oh.CDATA_SECTION_NODE:o=t.createCDATASection(e.data);break;case Oh.COMMENT_NODE:o=t.createComment(e.textContent||"");break;case Oh.DOCUMENT_FRAGMENT_NODE:o=r.attachShadow({mode:"open"});break;default:return null}var i;let a=n.getMeta(e);return t instanceof Ph&&(a||(a=Qh(o,t.unserializedId),n.add(e,a)),t.mirror.add(o,Object.assign({},a))),o}function Jh(e,t=function(){return new hh}(),n=new Ph){return function e(r,o){const i=zh(r,n,t,o);if(null!==i)if("IFRAME"!==(null==o?void 0:o.nodeName)&&r.nodeType!==Oh.DOCUMENT_FRAGMENT_NODE&&(null==o||o.appendChild(i),i.parentNode=o,i.parentElement=o),"IFRAME"===r.nodeName){const t=r.contentDocument;t&&e(t,i)}else r.nodeType!==Oh.DOCUMENT_NODE&&r.nodeType!==Oh.ELEMENT_NODE&&r.nodeType!==Oh.DOCUMENT_FRAGMENT_NODE||(r.nodeType===Oh.ELEMENT_NODE&&r.shadowRoot&&e(r.shadowRoot,i),r.childNodes.forEach((t=>e(t,i))))}(e,null),n}class Xh{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){var t;if(!e)return-1;const n=null===(t=this.getMeta(e))||void 0===t?void 0:t.id;return null!=n?n:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach((e=>this.removeNodeFromMap(e)))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Qh(e,t){switch(e.RRNodeType){case uh.Document:return{id:t,type:e.RRNodeType,childNodes:[]};case uh.DocumentType:{const n=e;return{id:t,type:e.RRNodeType,name:n.name,publicId:n.publicId,systemId:n.systemId}}case uh.Element:return{id:t,type:e.RRNodeType,tagName:e.tagName.toLowerCase(),attributes:{},childNodes:[]};case uh.Text:case uh.Comment:return{id:t,type:e.RRNodeType,textContent:e.textContent||""};case uh.CDATA:return{id:t,type:e.RRNodeType,textContent:""}}}const{addCustomEvent:qh}=dh,{freezePage:$h}=dh;var ep=Uint8Array,tp=Uint16Array,np=Uint32Array,rp=new ep([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),op=new ep([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ip=new ep([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ap=function(e,t){for(var n=new tp(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var o=new np(n[30]);for(r=1;r<30;++r)for(var i=n[r];i<n[r+1];++i)o[i]=i-n[r]<<5|r;return[n,o]},sp=ap(rp,2),cp=sp[0],lp=sp[1];cp[28]=258,lp[258]=28;for(var dp=ap(op,0),up=dp[0],hp=dp[1],pp=new tp(32768),mp=0;mp<32768;++mp){var fp=(43690&mp)>>>1|(21845&mp)<<1;fp=(61680&(fp=(52428&fp)>>>2|(13107&fp)<<2))>>>4|(3855&fp)<<4,pp[mp]=((65280&fp)>>>8|(255&fp)<<8)>>>1}var gp=function(e,t,n){for(var r=e.length,o=0,i=new tp(t);o<r;++o)++i[e[o]-1];var a,s=new tp(t);for(o=0;o<t;++o)s[o]=s[o-1]+i[o-1]<<1;if(n){a=new tp(1<<t);var c=15-t;for(o=0;o<r;++o)if(e[o])for(var l=o<<4|e[o],d=t-e[o],u=s[e[o]-1]++<<d,h=u|(1<<d)-1;u<=h;++u)a[pp[u]>>>c]=l}else for(a=new tp(r),o=0;o<r;++o)a[o]=pp[s[e[o]-1]++]>>>15-e[o];return a},vp=new ep(288);for(mp=0;mp<144;++mp)vp[mp]=8;for(mp=144;mp<256;++mp)vp[mp]=9;for(mp=256;mp<280;++mp)vp[mp]=7;for(mp=280;mp<288;++mp)vp[mp]=8;var yp=new ep(32);for(mp=0;mp<32;++mp)yp[mp]=5;var Ip=gp(vp,9,0),Sp=gp(vp,9,1),Cp=gp(yp,5,0),Ep=gp(yp,5,1),Tp=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},bp=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>>(7&t)&n},wp=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>>(7&t)},Ap=function(e){return(e/8|0)+(7&e&&1)},Np=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof tp?tp:e instanceof np?np:ep)(n-t);return r.set(e.subarray(t,n)),r},Mp=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},Op=function(e,t,n){n<<=7&t;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},Dp=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var o=n.length,i=n.slice();if(!o)return[new ep(0),0];if(1==o){var a=new ep(n[0].s+1);return a[n[0].s]=1,[a,1]}n.sort((function(e,t){return e.f-t.f})),n.push({s:-1,f:25001});var s=n[0],c=n[1],l=0,d=1,u=2;for(n[0]={s:-1,f:s.f+c.f,l:s,r:c};d!=o-1;)s=n[n[l].f<n[u].f?l++:u++],c=n[l!=d&&n[l].f<n[u].f?l++:u++],n[d++]={s:-1,f:s.f+c.f,l:s,r:c};var h=i[0].s;for(r=1;r<o;++r)i[r].s>h&&(h=i[r].s);var p=new tp(h+1),m=Rp(n[d-1],p,0);if(m>t){r=0;var f=0,g=m-t,v=1<<g;for(i.sort((function(e,t){return p[t.s]-p[e.s]||e.f-t.f}));r<o;++r){var y=i[r].s;if(!(p[y]>t))break;f+=v-(1<<m-p[y]),p[y]=t}for(f>>>=g;f>0;){var I=i[r].s;p[I]<t?f-=1<<t-p[I]++-1:++r}for(;r>=0&&f;--r){var S=i[r].s;p[S]==t&&(--p[S],++f)}m=t}return[new ep(p),m]},Rp=function(e,t,n){return-1==e.s?Math.max(Rp(e.l,t,n+1),Rp(e.r,t,n+1)):t[e.s]=n},kp=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new tp(++t),r=0,o=e[0],i=1,a=function(e){n[r++]=e},s=1;s<=t;++s)if(e[s]==o&&s!=t)++i;else{if(!o&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(o),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(o);i=1,o=e[s]}return[n.subarray(0,r),t]},_p=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},xp=function(e,t,n){var r=n.length,o=Ap(t+2);e[o]=255&r,e[o+1]=r>>>8,e[o+2]=255^e[o],e[o+3]=255^e[o+1];for(var i=0;i<r;++i)e[o+i+4]=n[i];return 8*(o+4+r)},Lp=function(e,t,n,r,o,i,a,s,c,l,d){Mp(t,d++,n),++o[256];for(var u=Dp(o,15),h=u[0],p=u[1],m=Dp(i,15),f=m[0],g=m[1],v=kp(h),y=v[0],I=v[1],S=kp(f),C=S[0],E=S[1],T=new tp(19),b=0;b<y.length;++b)T[31&y[b]]++;for(b=0;b<C.length;++b)T[31&C[b]]++;for(var w=Dp(T,7),A=w[0],N=w[1],M=19;M>4&&!A[ip[M-1]];--M);var O,D,R,k,_=l+5<<3,x=_p(o,vp)+_p(i,yp)+a,L=_p(o,h)+_p(i,f)+a+14+3*M+_p(T,A)+(2*T[16]+3*T[17]+7*T[18]);if(_<=x&&_<=L)return xp(t,d,e.subarray(c,c+l));if(Mp(t,d,1+(L<x)),d+=2,L<x){O=gp(h,p,0),D=h,R=gp(f,g,0),k=f;var F=gp(A,N,0);Mp(t,d,I-257),Mp(t,d+5,E-1),Mp(t,d+10,M-4),d+=14;for(b=0;b<M;++b)Mp(t,d+3*b,A[ip[b]]);d+=3*M;for(var B=[y,C],P=0;P<2;++P){var U=B[P];for(b=0;b<U.length;++b){var W=31&U[b];Mp(t,d,F[W]),d+=A[W],W>15&&(Mp(t,d,U[b]>>>5&127),d+=U[b]>>>12)}}}else O=Ip,D=vp,R=Cp,k=yp;for(b=0;b<s;++b)if(r[b]>255){W=r[b]>>>18&31;Op(t,d,O[W+257]),d+=D[W+257],W>7&&(Mp(t,d,r[b]>>>23&31),d+=rp[W]);var V=31&r[b];Op(t,d,R[V]),d+=k[V],V>3&&(Op(t,d,r[b]>>>5&8191),d+=op[V])}else Op(t,d,O[r[b]]),d+=D[r[b]];return Op(t,d,O[256]),d+D[256]},Fp=new np([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Bp=new ep(0),Pp=function(e,t,n,r,o){return function(e,t,n,r,o,i){var a=e.length,s=new ep(r+a+5*(1+Math.floor(a/7e3))+o),c=s.subarray(r,s.length-o),l=0;if(!t||a<8)for(var d=0;d<=a;d+=65535){var u=d+65535;u<a?l=xp(c,l,e.subarray(d,u)):(c[d]=i,l=xp(c,l,e.subarray(d,a)))}else{for(var h=Fp[t-1],p=h>>>13,m=8191&h,f=(1<<n)-1,g=new tp(32768),v=new tp(f+1),y=Math.ceil(n/3),I=2*y,S=function(t){return(e[t]^e[t+1]<<y^e[t+2]<<I)&f},C=new np(25e3),E=new tp(288),T=new tp(32),b=0,w=0,A=(d=0,0),N=0,M=0;d<a;++d){var O=S(d),D=32767&d,R=v[O];if(g[D]=R,v[O]=D,N<=d){var k=a-d;if((b>7e3||A>24576)&&k>423){l=Lp(e,c,0,C,E,T,w,A,M,d-M,l),A=b=w=0,M=d;for(var _=0;_<286;++_)E[_]=0;for(_=0;_<30;++_)T[_]=0}var x=2,L=0,F=m,B=D-R&32767;if(k>2&&O==S(d-B))for(var P=Math.min(p,k)-1,U=Math.min(32767,d),W=Math.min(258,k);B<=U&&--F&&D!=R;){if(e[d+x]==e[d+x-B]){for(var V=0;V<W&&e[d+V]==e[d+V-B];++V);if(V>x){if(x=V,L=B,V>P)break;var G=Math.min(B,V-2),j=0;for(_=0;_<G;++_){var Y=d-B+_+32768&32767,Z=Y-g[Y]+32768&32767;Z>j&&(j=Z,R=Y)}}}B+=(D=R)-(R=g[D])+32768&32767}if(L){C[A++]=268435456|lp[x]<<18|hp[L];var H=31&lp[x],K=31&hp[L];w+=rp[H]+op[K],++E[257+H],++T[K],N=d+x,++b}else C[A++]=e[d],++E[e[d]]}}l=Lp(e,c,i,C,E,T,w,A,M,d-M,l),i||(l=xp(c,l,Bp))}return Np(s,0,r+Ap(l)+o)}(e,null==t.level?6:t.level,null==t.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(e.length)))):12+t.mem,n,r,!o)};function Up(e,t){void 0===t&&(t={});var n=function(){var e=1,t=0;return{p:function(n){for(var r=e,o=t,i=n.length,a=0;a!=i;){for(var s=Math.min(a+5552,i);a<s;++a)o+=r+=n[a];r%=65521,o%=65521}e=r,t=o},d:function(){return(e>>>8<<16|(255&t)<<8|t>>>8)+2*((255&e)<<23)}}}();n.p(e);var r=Pp(e,t,2,4);return function(e,t){var n=t.level,r=0==n?0:n<6?1:9==n?3:2;e[0]=120,e[1]=r<<6|(r?32-2*r:1)}(r,t),function(e,t,n){for(;n;++t)e[t]=n,n>>>=8}(r,r.length-4,n.d()),r}function Wp(e,t){return function(e,t,n){var r=e.length,o=!t||n,i=!n||n.i;n||(n={}),t||(t=new ep(3*r));var a=function(e){var n=t.length;if(e>n){var r=new ep(Math.max(2*n,e));r.set(t),t=r}},s=n.f||0,c=n.p||0,l=n.b||0,d=n.l,u=n.d,h=n.m,p=n.n,m=8*r;do{if(!d){n.f=s=bp(e,c,1);var f=bp(e,c+1,3);if(c+=3,!f){var g=e[(N=Ap(c)+4)-4]|e[N-3]<<8,v=N+g;if(v>r){if(i)throw"unexpected EOF";break}o&&a(l+g),t.set(e.subarray(N,v),l),n.b=l+=g,n.p=c=8*v;continue}if(1==f)d=Sp,u=Ep,h=9,p=5;else{if(2!=f)throw"invalid block type";var y=bp(e,c,31)+257,I=bp(e,c+10,15)+4,S=y+bp(e,c+5,31)+1;c+=14;for(var C=new ep(S),E=new ep(19),T=0;T<I;++T)E[ip[T]]=bp(e,c+3*T,7);c+=3*I;var b=Tp(E),w=(1<<b)-1;if(!i&&c+S*(b+7)>m)break;var A=gp(E,b,1);for(T=0;T<S;){var N,M=A[bp(e,c,w)];if(c+=15&M,(N=M>>>4)<16)C[T++]=N;else{var O=0,D=0;for(16==N?(D=3+bp(e,c,3),c+=2,O=C[T-1]):17==N?(D=3+bp(e,c,7),c+=3):18==N&&(D=11+bp(e,c,127),c+=7);D--;)C[T++]=O}}var R=C.subarray(0,y),k=C.subarray(y);h=Tp(R),p=Tp(k),d=gp(R,h,1),u=gp(k,p,1)}if(c>m)throw"unexpected EOF"}o&&a(l+131072);for(var _=(1<<h)-1,x=(1<<p)-1,L=h+p+18;i||c+L<m;){var F=(O=d[wp(e,c)&_])>>>4;if((c+=15&O)>m)throw"unexpected EOF";if(!O)throw"invalid length/literal";if(F<256)t[l++]=F;else{if(256==F){d=null;break}var B=F-254;if(F>264){var P=rp[T=F-257];B=bp(e,c,(1<<P)-1)+cp[T],c+=P}var U=u[wp(e,c)&x],W=U>>>4;if(!U)throw"invalid distance";if(c+=15&U,k=up[W],W>3&&(P=op[W],k+=wp(e,c)&(1<<P)-1,c+=P),c>m)throw"unexpected EOF";o&&a(l+131072);for(var V=l+B;l<V;l+=4)t[l]=t[l-k],t[l+1]=t[l+1-k],t[l+2]=t[l+2-k],t[l+3]=t[l+3-k];l=V}}n.l=d,n.p=c,n.b=l,d&&(s=1,n.m=h,n.d=u,n.n=p)}while(!s);return l==t.length?t:Np(t,0,l)}((function(e){if(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"}(e),e.subarray(2,-4)),t)}function Vp(e,t){var n=e.length;if(!t&&"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var r=new ep(e.length+(e.length>>>1)),o=0,i=function(e){r[o++]=e},a=0;a<n;++a){if(o+5>r.length){var s=new ep(o+8+(n-a<<1));s.set(r),r=s}var c=e.charCodeAt(a);c<128||t?i(c):c<2048?(i(192|c>>>6),i(128|63&c)):c>55295&&c<57344?(i(240|(c=65536+(1047552&c)|1023&e.charCodeAt(++a))>>>18),i(128|c>>>12&63),i(128|c>>>6&63),i(128|63&c)):(i(224|c>>>12),i(128|c>>>6&63),i(128|63&c))}return Np(r,0,o)}function Gp(e,t){var n="";if(!t&&"undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var r=0;r<e.length;){var o=e[r++];o<128||t?n+=String.fromCharCode(o):o<224?n+=String.fromCharCode((31&o)<<6|63&e[r++]):o<240?n+=String.fromCharCode((15&o)<<12|(63&e[r++])<<6|63&e[r++]):(o=((15&o)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536,n+=String.fromCharCode(55296|o>>10,56320|1023&o))}return n}const jp="v1";class Yp{constructor(e){this.fileName=e.fileName||"",this.functionName=e.functionName||"",this.lineNumber=e.lineNumber,this.columnNumber=e.columnNumber}toString(){const e=this.lineNumber||"",t=this.columnNumber||"";return this.functionName?`${this.functionName} (${this.fileName}:${e}:${t})`:`${this.fileName}:${e}:${t}`}}const Zp=/(^|@)\S+:\d+/,Hp=/^\s*at .*(\S+:\d+|\(native\))/m,Kp=/^(eval@)?(\[native code])?$/,zp={parse:function(e){return e?void 0!==e.stacktrace||void 0!==e["opera#sourceloc"]?this.parseOpera(e):e.stack&&e.stack.match(Hp)?this.parseV8OrIE(e):e.stack?this.parseFFOrSafari(e):(console.warn("[console-record-plugin]: Failed to parse error object:",e),[]):[]},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];const t=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(e.replace(/[()]/g,""));if(!t)throw new Error(`Cannot parse given url: ${e}`);return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(e){return e.stack.split("\n").filter((function(e){return!!e.match(Hp)}),this).map((function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));let t=e.replace(/^\s+/,"").replace(/\(eval code/g,"(");const n=t.match(/ (\((.+):(\d+):(\d+)\)$)/);t=n?t.replace(n[0],""):t;const r=t.split(/\s+/).slice(1),o=this.extractLocation(n?n[1]:r.pop()),i=r.join(" ")||void 0,a=["eval","<anonymous>"].indexOf(o[0])>-1?void 0:o[0];return new Yp({functionName:i,fileName:a,lineNumber:o[1],columnNumber:o[2]})}),this)},parseFFOrSafari:function(e){return e.stack.split("\n").filter((function(e){return!e.match(Kp)}),this).map((function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return new Yp({functionName:e});{const t=/((.*".+"[^@]*)?[^@]*)(?:@)/,n=e.match(t),r=n&&n[1]?n[1]:void 0,o=this.extractLocation(e.replace(t,""));return new Yp({functionName:r,fileName:o[0],lineNumber:o[1],columnNumber:o[2]})}}),this)},parseOpera:function(e){return!e.stacktrace||e.message.indexOf("\n")>-1&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){const t=/Line (\d+).*script (?:in )?(\S+)/i,n=e.message.split("\n"),r=[];for(let e=2,o=n.length;e<o;e+=2){const o=t.exec(n[e]);o&&r.push(new Yp({fileName:o[2],lineNumber:parseFloat(o[1])}))}return r},parseOpera10:function(e){const t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=e.stacktrace.split("\n"),r=[];for(let e=0,o=n.length;e<o;e+=2){const o=t.exec(n[e]);o&&r.push(new Yp({functionName:o[3]||void 0,fileName:o[2],lineNumber:parseFloat(o[1])}))}return r},parseOpera11:function(e){return e.stack.split("\n").filter((function(e){return!!e.match(Zp)&&!e.match(/^Error created at/)}),this).map((function(e){const t=e.split("@"),n=this.extractLocation(t.pop()),r=(t.shift()||"").replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;return new Yp({functionName:r,fileName:n[0],lineNumber:n[1],columnNumber:n[2]})}),this)}};function Jp(e){if(!e||!e.outerHTML)return"";let t="";for(;e.parentElement;){let n=e.localName;if(!n)break;n=n.toLowerCase();const r=e.parentElement,o=[];if(r.children&&r.children.length>0)for(let e=0;e<r.children.length;e++){const t=r.children[e];t.localName&&t.localName.toLowerCase&&t.localName.toLowerCase()===n&&o.push(t)}o.length>1&&(n+=`:eq(${o.indexOf(e)})`),t=n+(t?">"+t:""),e=r}return t}function Xp(e){return"[object Object]"===Object.prototype.toString.call(e)}function Qp(e,t){if(0===t)return!0;const n=Object.keys(e);for(const r of n)if(Xp(e[r])&&Qp(e[r],t-1))return!0;return!1}function qp(e,t){const n={numOfKeysLimit:50,depthOfLimit:4};Object.assign(n,t);const r=[],o=[];return JSON.stringify(e,(function(e,t){if(r.length>0){const n=r.indexOf(this);~n?r.splice(n+1):r.push(this),~n?o.splice(n,1/0,e):o.push(e),~r.indexOf(t)&&(t=r[0]===t?"[Circular ~]":"[Circular ~."+o.slice(0,r.indexOf(t)).join(".")+"]")}else r.push(t);if(null===t)return t;if(void 0===t)return"undefined";if(function(e){if(Xp(e)&&Object.keys(e).length>n.numOfKeysLimit)return!0;if("function"==typeof e)return!0;if(Xp(e)&&Qp(e,n.depthOfLimit))return!0;return!1}(t))return function(e){let t=e.toString();n.stringLengthLimit&&t.length>n.stringLengthLimit&&(t=`${t.slice(0,n.stringLengthLimit)}...`);return t}(t);if(t instanceof Event){const e={};for(const n in t){const r=t[n];Array.isArray(r)?e[n]=Jp(r.length?r[0]:null):e[n]=r}return e}return t instanceof Node?t instanceof HTMLElement?t?t.outerHTML:"":t.nodeName:t instanceof Error?t.stack?t.stack+"\nEnd of stack for Error object":t.name+": "+t.message:t}))}const $p={level:["assert","clear","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],lengthThreshold:1e3,logger:"console"};function em(e,t,n){const r=n?Object.assign({},$p,n):$p,o=r.logger;if(!o)return()=>{};let i;i="string"==typeof o?t[o]:o;let a=0,s=!1;const c=[];if(r.level.includes("error")){const n=t=>{const n=t.message,o=t.error,i=zp.parse(o).map((e=>e.toString())),a=[qp(n,r.stringifyOptions)];e({level:"error",trace:i,payload:a})};t.addEventListener("error",n),c.push((()=>{t.removeEventListener("error",n)}));const o=t=>{let n,o;t.reason instanceof Error?(n=t.reason,o=[qp(`Uncaught (in promise) ${n.name}: ${n.message}`,r.stringifyOptions)]):(n=new Error,o=[qp("Uncaught (in promise)",r.stringifyOptions),qp(t.reason,r.stringifyOptions)]);const i=zp.parse(n).map((e=>e.toString()));e({level:"error",trace:i,payload:o})};t.addEventListener("unhandledrejection",o),c.push((()=>{t.removeEventListener("unhandledrejection",o)}))}for(const e of r.level)c.push(l(i,e));return()=>{c.forEach((e=>e()))};function l(t,n){return t[n]?Od(t,n,(t=>(...o)=>{if(t.apply(this,o),!s){s=!0;try{const t=zp.parse(new Error).map((e=>e.toString())).splice(1),i=o.map((e=>qp(e,r.stringifyOptions)));a++,a<r.lengthThreshold?e({level:n,trace:t,payload:i}):a===r.lengthThreshold&&e({level:"warn",trace:[],payload:[qp("The number of log records reached the threshold.")]})}catch(e){t("rrweb logger error:",e,...o)}finally{s=!1}}})):()=>{}}}const tm="rrweb/console@1",nm="__rrweb_original__",rm={level:["assert","clear","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],replayLogger:void 0};class om{constructor(e){this.config=Object.assign(rm,e)}getConsoleLogger(){const e={};for(const t of this.config.level)e[t]="trace"===t?e=>{(console.log[nm]?console.log[nm]:console.log)(...e.payload.map((e=>JSON.parse(e))),this.formatMessage(e))}:e=>{(console[t][nm]?console[t][nm]:console[t])(...e.payload.map((e=>JSON.parse(e))),this.formatMessage(e))};return e}formatMessage(e){if(0===e.trace.length)return"";const t="\n\tat ";let n=t;return n+=e.trace.join(t),n}}function im(e){return{all:e=e||new Map,on:function(t,n){var r=e.get(t);r?r.push(n):e.set(t,[n])},off:function(t,n){var r=e.get(t);r&&(n?r.splice(r.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var r=e.get(t);r&&r.slice().map((function(e){e(n)})),(r=e.get("*"))&&r.slice().map((function(e){e(t,n)}))}}}var am,sm=Object.freeze({__proto__:null,default:im});function cm(e=window,t=document){if("scrollBehavior"in t.documentElement.style&&!0!==e.__forceSmoothScrollPolyfill__)return;const n=e.HTMLElement||e.Element,r=468,o={scroll:e.scroll||e.scrollTo,scrollBy:e.scrollBy,elementScroll:n.prototype.scroll||c,scrollIntoView:n.prototype.scrollIntoView},i=e.performance&&e.performance.now?e.performance.now.bind(e.performance):Date.now;const a=(s=e.navigator.userAgent,new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(s)?1:0);var s;function c(e,t){this.scrollLeft=e,this.scrollTop=t}function l(e){if(null===e||"object"!=typeof e||void 0===e.behavior||"auto"===e.behavior||"instant"===e.behavior)return!0;if("object"==typeof e&&"smooth"===e.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+e.behavior+" is not a valid value for enumeration ScrollBehavior.")}function d(e,t){return"Y"===t?e.clientHeight+a<e.scrollHeight:"X"===t?e.clientWidth+a<e.scrollWidth:void 0}function u(t,n){const r=e.getComputedStyle(t,null)["overflow"+n];return"auto"===r||"scroll"===r}function h(e){const t=d(e,"Y")&&u(e,"Y"),n=d(e,"X")&&u(e,"X");return t||n}function p(t){let n,o,a,s=(i()-t.startTime)/r;s=s>1?1:s,n=function(e){return.5*(1-Math.cos(Math.PI*e))}(s),o=t.startX+(t.x-t.startX)*n,a=t.startY+(t.y-t.startY)*n,t.method.call(t.scrollable,o,a),o===t.x&&a===t.y||e.requestAnimationFrame(p.bind(e,t))}function m(n,r,a){let s,l,d,u;const h=i();n===t.body?(s=e,l=e.scrollX||e.pageXOffset,d=e.scrollY||e.pageYOffset,u=o.scroll):(s=n,l=n.scrollLeft,d=n.scrollTop,u=c),p({scrollable:s,method:u,startTime:h,startX:l,startY:d,x:r,y:a})}e.scroll=e.scrollTo=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?m.call(e,t.body,void 0!==arguments[0].left?~~arguments[0].left:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:e.scrollY||e.pageYOffset):o.scroll.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:e.scrollX||e.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:e.scrollY||e.pageYOffset))},e.scrollBy=function(){void 0!==arguments[0]&&(l(arguments[0])?o.scrollBy.call(e,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):m.call(e,t.body,~~arguments[0].left+(e.scrollX||e.pageXOffset),~~arguments[0].top+(e.scrollY||e.pageYOffset)))},n.prototype.scroll=n.prototype.scrollTo=function(){if(void 0===arguments[0])return;if(!0===l(arguments[0])){if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");return void o.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}const e=arguments[0].left,t=arguments[0].top;m.call(this,this,void 0===e?this.scrollLeft:~~e,void 0===t?this.scrollTop:~~t)},n.prototype.scrollBy=function(){void 0!==arguments[0]&&(!0!==l(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):o.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))},n.prototype.scrollIntoView=function(){if(!0===l(arguments[0]))return void o.scrollIntoView.call(this,void 0===arguments[0]||arguments[0]);const n=function(e){for(;e!==t.body&&!1===h(e);)e=e.parentNode||e.host;return e}(this),r=n.getBoundingClientRect(),i=this.getBoundingClientRect();n!==t.body?(m.call(this,n,n.scrollLeft+i.left-r.left,n.scrollTop+i.top-r.top),"fixed"!==e.getComputedStyle(n).position&&e.scrollBy({left:r.left,top:r.top,behavior:"smooth"})):e.scrollBy({left:i.left,top:i.top,behavior:"smooth"})}}class lm{constructor(e=[],t){this.timeOffset=0,this.raf=null,this.actions=e,this.speed=t.speed}addAction(e){const t=!0===this.raf;if(!this.actions.length||this.actions[this.actions.length-1].delay<=e.delay)this.actions.push(e);else{const t=this.findActionIndex(e);this.actions.splice(t,0,e)}t&&(this.raf=requestAnimationFrame(this.rafCheck.bind(this)))}start(){this.timeOffset=0,this.lastTimestamp=performance.now(),this.raf=requestAnimationFrame(this.rafCheck.bind(this))}rafCheck(){const e=performance.now();for(this.timeOffset+=(e-this.lastTimestamp)*this.speed,this.lastTimestamp=e;this.actions.length;){const e=this.actions[0];if(!(this.timeOffset>=e.delay))break;this.actions.shift(),e.doAction()}this.actions.length>0?this.raf=requestAnimationFrame(this.rafCheck.bind(this)):this.raf=!0}clear(){this.raf&&(!0!==this.raf&&cancelAnimationFrame(this.raf),this.raf=null),this.actions.length=0}setSpeed(e){this.speed=e}isActive(){return null!==this.raf}findActionIndex(e){let t=0,n=this.actions.length-1;for(;t<=n;){const r=Math.floor((t+n)/2);if(this.actions[r].delay<e.delay)t=r+1;else{if(!(this.actions[r].delay>e.delay))return r+1;n=r-1}}return t}}function dm(e,t){if(e.type===tu.IncrementalSnapshot&&e.data.source===nu.MouseMove&&e.data.positions&&e.data.positions.length){const n=e.data.positions[0].timeOffset,r=e.timestamp+n;return e.delay=r-t,r-t}return e.delay=e.timestamp-t,e.delay}
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */function um(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}!function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"}(am||(am={}));var hm={type:"xstate.init"};function pm(e){return void 0===e?[]:[].concat(e)}function mm(e){return{type:"xstate.assign",assignment:e}}function fm(e,t){return"string"==typeof(e="string"==typeof e&&t&&t[e]?t[e]:e)?{type:e}:"function"==typeof e?{type:e.name,exec:e}:e}function gm(e){return function(t){return e===t}}function vm(e){return"string"==typeof e?{type:e}:e}function ym(e,t){return{value:e,context:t,actions:[],changed:!1,matches:gm(e)}}function Im(e,t,n){var r=t,o=!1;return[e.filter((function(e){if("xstate.assign"===e.type){o=!0;var t=Object.assign({},r);return"function"==typeof e.assignment?t=e.assignment(r,n):Object.keys(e.assignment).forEach((function(o){t[o]="function"==typeof e.assignment[o]?e.assignment[o](r,n):e.assignment[o]})),r=t,!1}return!0})),r,o]}function Sm(e,t){void 0===t&&(t={});var n=um(Im(pm(e.states[e.initial].entry).map((function(e){return fm(e,t.actions)})),e.context,hm),2),r=n[0],o=n[1],i={config:e,_options:t,initialState:{value:e.initial,actions:r,context:o,matches:gm(e.initial)},transition:function(t,n){var r,o,a="string"==typeof t?{value:t,context:e.context}:t,s=a.value,c=a.context,l=vm(n),d=e.states[s];if(d.on){var u=pm(d.on[l.type]);try{for(var h=function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(u),p=h.next();!p.done;p=h.next()){var m=p.value;if(void 0===m)return ym(s,c);var f="string"==typeof m?{target:m}:m,g=f.target,v=f.actions,y=void 0===v?[]:v,I=f.cond,S=void 0===I?function(){return!0}:I,C=void 0===g,E=null!=g?g:s,T=e.states[E];if(S(c,l)){var b=um(Im((C?pm(y):[].concat(d.exit,y,T.entry).filter((function(e){return e}))).map((function(e){return fm(e,i._options.actions)})),c,l),3),w=b[0],A=b[1],N=b[2],M=null!=g?g:s;return{value:M,context:A,actions:w,changed:g!==s||w.length>0||N,matches:gm(M)}}}}catch(e){r={error:e}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(r)throw r.error}}}return ym(s,c)}};return i}var Cm=function(e,t){return e.actions.forEach((function(n){var r=n.exec;return r&&r(e.context,t)}))};function Em(e){var t=e.initialState,n=am.NotStarted,r=new Set,o={_machine:e,send:function(o){n===am.Running&&(t=e.transition(t,o),Cm(t,vm(o)),r.forEach((function(e){return e(t)})))},subscribe:function(e){return r.add(e),e(t),{unsubscribe:function(){return r.delete(e)}}},start:function(r){if(r){var i="object"==typeof r?r:{context:e.config.context,value:r};t={value:i.value,actions:[],context:i.context,matches:gm(i.value)}}return n=am.Running,Cm(t,hm),o},stop:function(){return n=am.Stopped,r.clear(),o},get state(){return t},get status(){return n}};return o}function Tm(e,{getCastFn:t,applyEventsSynchronously:n,emitter:r}){const o=Sm({id:"player",context:e,initial:"paused",states:{playing:{on:{PAUSE:{target:"paused",actions:["pause"]},CAST_EVENT:{target:"playing",actions:"castEvent"},END:{target:"paused",actions:["resetLastPlayedEvent","pause"]},ADD_EVENT:{target:"playing",actions:["addEvent"]}}},paused:{on:{PLAY:{target:"playing",actions:["recordTimeOffset","play"]},CAST_EVENT:{target:"paused",actions:"castEvent"},TO_LIVE:{target:"live",actions:["startLive"]},ADD_EVENT:{target:"paused",actions:["addEvent"]}}},live:{on:{ADD_EVENT:{target:"live",actions:["addEvent"]},CAST_EVENT:{target:"live",actions:["castEvent"]}}}}},{actions:{castEvent:mm({lastPlayedEvent:(e,t)=>"CAST_EVENT"===t.type?t.payload.event:e.lastPlayedEvent}),recordTimeOffset:mm(((e,t)=>{let n=e.timeOffset;return"payload"in t&&"timeOffset"in t.payload&&(n=t.payload.timeOffset),Object.assign(Object.assign({},e),{timeOffset:n,baselineTime:e.events[0].timestamp+n})})),play(e){var o;const{timer:i,events:a,baselineTime:s,lastPlayedEvent:c}=e;i.clear();for(const e of a)dm(e,s);const l=function(e,t){for(let n=e.length-1;n>=0;n--){const r=e[n];if(r.type===tu.Meta&&r.timestamp<=t)return e.slice(n)}return e}(a,s);let d=null==c?void 0:c.timestamp;(null==c?void 0:c.type)===tu.IncrementalSnapshot&&c.data.source===nu.MouseMove&&(d=c.timestamp+(null===(o=c.data.positions[0])||void 0===o?void 0:o.timeOffset)),s<(d||0)&&r.emit(au.PlayBack);const u=new Array;for(const e of l)if(!(d&&d<s&&(e.timestamp<=d||e===c)))if(e.timestamp<s)u.push(e);else{const n=t(e,!1);i.addAction({doAction:()=>{n()},delay:e.delay})}n(u),r.emit(au.Flush),i.start()},pause(e){e.timer.clear()},resetLastPlayedEvent:mm((e=>Object.assign(Object.assign({},e),{lastPlayedEvent:null}))),startLive:mm({baselineTime:(e,t)=>(e.timer.start(),"TO_LIVE"===t.type&&t.payload.baselineTime?t.payload.baselineTime:Date.now())}),addEvent:mm(((e,n)=>{const{baselineTime:r,timer:o,events:i}=e;if("ADD_EVENT"===n.type){const{event:e}=n.payload;dm(e,r);let a=i.length-1;if(!i[a]||i[a].timestamp<=e.timestamp)i.push(e);else{let t=-1,n=0;for(;n<=a;){const t=Math.floor((n+a)/2);i[t].timestamp<=e.timestamp?n=t+1:a=t-1}-1===t&&(t=n),i.splice(t,0,e)}const s=e.timestamp<r,c=t(e,s);s?c():o.isActive()&&o.addAction({doAction:()=>{c()},delay:e.delay})}return Object.assign(Object.assign({},e),{events:i})}))}});return Em(o)}const bm=new Map;function wm(e,t){let n=bm.get(e);return n||(n=new Map,bm.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}function Am(e,t,n){return r=>Bu(this,void 0,void 0,(function*(){if(r&&"object"==typeof r&&"rr_type"in r){if(n&&(n.isUnchanged=!1),"ImageBitmap"===r.rr_type&&"args"in r){const o=yield Am(e,t,n)(r.args);return yield createImageBitmap.apply(null,o)}if("index"in r){if(n||null===t)return r;const{rr_type:e,index:o}=r;return wm(t,e)[o]}if("args"in r){const{rr_type:o,args:i}=r;return new(0,window[o])(...yield Promise.all(i.map(Am(e,t,n))))}if("base64"in r)return Vu(r.base64);if("src"in r){const t=e.get(r.src);if(t)return t;{const t=new Image;return t.src=r.src,e.set(r.src,t),t}}if("data"in r&&"Blob"===r.rr_type){const o=yield Promise.all(r.data.map(Am(e,t,n)));return new Blob(o,{type:r.type})}}else if(Array.isArray(r)){return yield Promise.all(r.map(Am(e,t,n)))}return r}))}const Nm=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject"];function Mm({mutation:e,target:t,type:n,imageMap:r,errorHandler:o}){return Bu(this,void 0,void 0,(function*(){try{const o=function(e,t){try{return t===iu.WebGL?e.getContext("webgl")||e.getContext("experimental-webgl"):e.getContext("webgl2")}catch(e){return null}}(t,n);if(!o)return;if(e.setter)return void(o[e.property]=e.args[0]);const i=o[e.property],a=yield Promise.all(e.args.map(Am(r,o)));!function(e,t){if(!(null==t?void 0:t.constructor))return;const{name:n}=t.constructor;if(!Nm.includes(n))return;const r=wm(e,n);r.includes(t)||r.push(t)}(o,i.apply(o,a))}catch(t){o(e,t)}}))}function Om({event:e,mutation:t,target:n,imageMap:r,canvasEventMap:o,errorHandler:i}){return Bu(this,void 0,void 0,(function*(){try{const a=o.get(e)||t,s="commands"in a?a.commands:[a];if([iu.WebGL,iu.WebGL2].includes(t.type)){for(let e=0;e<s.length;e++){const o=s[e];yield Mm({mutation:o,type:t.type,target:n,imageMap:r,errorHandler:i})}return}yield function({event:e,mutations:t,target:n,imageMap:r,errorHandler:o}){return Bu(this,void 0,void 0,(function*(){const i=n.getContext("2d");if(!i)return void o(t[0],new Error("Canvas context is null"));const a=t.map((e=>Bu(this,void 0,void 0,(function*(){return Promise.all(e.args.map(Am(r,i)))}))));(yield Promise.all(a)).forEach(((n,a)=>{const s=t[a];try{if(s.setter)return void(i[s.property]=s.args[0]);const t=i[s.property];"drawImage"===s.property&&"string"==typeof s.args[0]?(r.get(e),t.apply(i,s.args)):t.apply(i,n)}catch(e){o(s,e)}}))}))}({event:e,mutations:s,target:n,imageMap:r,errorHandler:i})}catch(e){i(t,e)}}))}const Dm=im||sm,Rm="[replayer]",km={duration:500,lineCap:"round",lineWidth:3,strokeStyle:"red"};function _m(e){return e.type==tu.IncrementalSnapshot&&(e.data.source==nu.TouchMove||e.data.source==nu.MouseInteraction&&e.data.type==ru.TouchStart)}var xm=Object.freeze({__proto__:null,EventType:tu,IncrementalSource:nu,MouseInteractions:ru,PLUGIN_NAME:tm,Replayer:class{get timer(){return this.service.state.context.timer}constructor(e,t){if(this.usingVirtualDom=!1,this.virtualDom=new Ph,this.mouseTail=null,this.tailPositions=[],this.emitter=Dm(),this.legacy_missingNodeRetryMap={},this.cache=Sd(),this.imageMap=new Map,this.canvasEventMap=new Map,this.mirror=Pl(),this.styleMirror=new Jd,this.firstFullSnapshot=null,this.newDocumentQueue=[],this.mousePos=null,this.touchActive=null,this.lastMouseDownEvent=null,this.lastSelectionData=null,this.constructedStyleMutations=[],this.adoptedStyleSheets=[],this.handleResize=e=>{this.iframe.style.display="inherit";for(const t of[this.mouseTail,this.iframe])t&&(t.setAttribute("width",String(e.width)),t.setAttribute("height",String(e.height)))},this.applyEventsSynchronously=e=>{for(const t of e){switch(t.type){case tu.DomContentLoaded:case tu.Load:case tu.Custom:continue;case tu.FullSnapshot:case tu.Meta:case tu.Plugin:case tu.IncrementalSnapshot:}this.getCastFn(t,!0)()}},this.getCastFn=(e,t=!1)=>{let n;switch(e.type){case tu.DomContentLoaded:case tu.Load:break;case tu.Custom:n=()=>{this.emitter.emit(au.CustomEvent,e)};break;case tu.Meta:n=()=>this.emitter.emit(au.Resize,{width:e.data.width,height:e.data.height});break;case tu.FullSnapshot:n=()=>{var n;if(this.firstFullSnapshot){if(this.firstFullSnapshot===e)return void(this.firstFullSnapshot=!0)}else this.firstFullSnapshot=!0;this.rebuildFullSnapshot(e,t),null===(n=this.iframe.contentWindow)||void 0===n||n.scrollTo(e.data.initialOffset),this.styleMirror.reset()};break;case tu.IncrementalSnapshot:n=()=>{if(this.applyIncremental(e,t),!t&&(e===this.nextUserInteractionEvent&&(this.nextUserInteractionEvent=null,this.backToNormal()),this.config.skipInactive&&!this.nextUserInteractionEvent)){for(const t of this.service.state.context.events)if(!(t.timestamp<=e.timestamp)&&this.isUserInteraction(t)){t.delay-e.delay>1e4*this.speedService.state.context.timer.speed&&(this.nextUserInteractionEvent=t);break}if(this.nextUserInteractionEvent){const t=this.nextUserInteractionEvent.delay-e.delay,n={speed:Math.min(Math.round(t/5e3),this.config.maxSpeed)};this.speedService.send({type:"FAST_FORWARD",payload:n}),this.emitter.emit(au.SkipStart,n)}}}}return()=>{n&&n();for(const n of this.config.plugins||[])n.handler&&n.handler(e,t,{replayer:this});this.service.send({type:"CAST_EVENT",payload:{event:e}});const r=this.service.state.context.events.length-1;if(!this.config.liveMode&&e===this.service.state.context.events[r]){const t=()=>{r<this.service.state.context.events.length-1||(this.backToNormal(),this.service.send("END"),this.emitter.emit(au.Finish))};let n=50;e.type===tu.IncrementalSnapshot&&e.data.source===nu.MouseMove&&e.data.positions.length&&(n+=Math.max(0,-e.data.positions[0].timeOffset)),setTimeout(t,n)}this.emitter.emit(au.EventCast,e)}},!(null==t?void 0:t.liveMode)&&e.length<2)throw new Error("Replayer need at least 2 events.");const n={speed:1,maxSpeed:360,root:document.body,loadTimeout:0,skipInactive:!1,showWarning:!0,showDebug:!1,blockClass:"rr-block",liveMode:!1,insertStyleRules:[],triggerFocus:!0,UNSAFE_replayCanvas:!1,pauseAnimation:!0,mouseTail:km,useVirtualDom:!0,logger:console};this.config=Object.assign({},n,t),this.handleResize=this.handleResize.bind(this),this.getCastFn=this.getCastFn.bind(this),this.applyEventsSynchronously=this.applyEventsSynchronously.bind(this),this.emitter.on(au.Resize,this.handleResize),this.setupDom();for(const e of this.config.plugins||[])e.getMirror&&e.getMirror({nodeMirror:this.mirror});this.emitter.on(au.Flush,(()=>{if(this.usingVirtualDom){const e={mirror:this.mirror,applyCanvas:(e,t,n)=>{Om({event:e,mutation:t,target:n,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})},applyInput:this.applyInput.bind(this),applyScroll:this.applyScroll.bind(this),applyStyleSheetMutation:(e,t)=>{e.source===nu.StyleSheetRule?this.applyStyleSheetRule(e,t):e.source===nu.StyleDeclaration&&this.applyStyleDeclaration(e,t)},afterAppend:(e,t)=>{for(const n of this.config.plugins||[])n.onBuild&&n.onBuild(e,{id:t,replayer:this})}};if(this.iframe.contentDocument)try{_h(this.iframe.contentDocument,this.virtualDom,e,this.virtualDom.mirror)}catch(e){console.warn(e)}if(this.virtualDom.destroyTree(),this.usingVirtualDom=!1,Object.keys(this.legacy_missingNodeRetryMap).length)for(const t in this.legacy_missingNodeRetryMap)try{const n=this.legacy_missingNodeRetryMap[t],r=Lh(n.node,this.mirror,this.virtualDom.mirror);_h(r,n.node,e,this.virtualDom.mirror),n.node=r}catch(e){this.warn(e)}this.constructedStyleMutations.forEach((e=>{this.applyStyleSheetMutation(e)})),this.constructedStyleMutations=[],this.adoptedStyleSheets.forEach((e=>{this.applyAdoptedStyleSheet(e)})),this.adoptedStyleSheets=[]}if(this.mousePos&&(this.moveAndHover(this.mousePos.x,this.mousePos.y,this.mousePos.id,!0,this.mousePos.debugData),this.mousePos=null),!0===this.touchActive?this.mouse.classList.add("touch-active"):!1===this.touchActive&&this.mouse.classList.remove("touch-active"),this.touchActive=null,this.lastMouseDownEvent){const[e,t]=this.lastMouseDownEvent;e.dispatchEvent(t)}this.lastMouseDownEvent=null,this.lastSelectionData&&(this.applySelection(this.lastSelectionData),this.lastSelectionData=null)})),this.emitter.on(au.PlayBack,(()=>{this.firstFullSnapshot=null,this.mirror.reset(),this.styleMirror.reset()}));const r=new lm([],{speed:this.config.speed});this.service=Tm({events:e.map((e=>t&&t.unpackFn?t.unpackFn(e):e)).sort(((e,t)=>e.timestamp-t.timestamp)),timer:r,timeOffset:0,baselineTime:0,lastPlayedEvent:null},{getCastFn:this.getCastFn,applyEventsSynchronously:this.applyEventsSynchronously,emitter:this.emitter}),this.service.start(),this.service.subscribe((e=>{this.emitter.emit(au.StateChange,{player:e})})),this.speedService=Em(Sm({id:"speed",context:{normalSpeed:-1,timer:r},initial:"normal",states:{normal:{on:{FAST_FORWARD:{target:"skipping",actions:["recordSpeed","setSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}},skipping:{on:{BACK_TO_NORMAL:{target:"normal",actions:["restoreSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}}}},{actions:{setSpeed:(e,t)=>{"payload"in t&&e.timer.setSpeed(t.payload.speed)},recordSpeed:mm({normalSpeed:e=>e.timer.speed}),restoreSpeed:e=>{e.timer.setSpeed(e.normalSpeed)}}})),this.speedService.start(),this.speedService.subscribe((e=>{this.emitter.emit(au.StateChange,{speed:e})}));const o=this.service.state.context.events.find((e=>e.type===tu.Meta)),i=this.service.state.context.events.find((e=>e.type===tu.FullSnapshot));if(o){const{width:e,height:t}=o.data;setTimeout((()=>{this.emitter.emit(au.Resize,{width:e,height:t})}),0)}i&&setTimeout((()=>{var e;this.firstFullSnapshot||(this.firstFullSnapshot=i,this.rebuildFullSnapshot(i),null===(e=this.iframe.contentWindow)||void 0===e||e.scrollTo(i.data.initialOffset))}),1),this.service.state.context.events.find(_m)&&this.mouse.classList.add("touch-device")}on(e,t){return this.emitter.on(e,t),this}off(e,t){return this.emitter.off(e,t),this}setConfig(e){Object.keys(e).forEach((t=>{e[t],this.config[t]=e[t]})),this.config.skipInactive||this.backToNormal(),void 0!==e.speed&&this.speedService.send({type:"SET_SPEED",payload:{speed:e.speed}}),void 0!==e.mouseTail&&(!1===e.mouseTail?this.mouseTail&&(this.mouseTail.style.display="none"):(this.mouseTail||(this.mouseTail=document.createElement("canvas"),this.mouseTail.width=Number.parseFloat(this.iframe.width),this.mouseTail.height=Number.parseFloat(this.iframe.height),this.mouseTail.classList.add("replayer-mouse-tail"),this.wrapper.insertBefore(this.mouseTail,this.iframe)),this.mouseTail.style.display="inherit"))}getMetaData(){const e=this.service.state.context.events[0],t=this.service.state.context.events[this.service.state.context.events.length-1];return{startTime:e.timestamp,endTime:t.timestamp,totalTime:t.timestamp-e.timestamp}}getCurrentTime(){return this.timer.timeOffset+this.getTimeOffset()}getTimeOffset(){const{baselineTime:e,events:t}=this.service.state.context;return e-t[0].timestamp}getMirror(){return this.mirror}play(e=0){var t,n;this.service.state.matches("paused")||this.service.send({type:"PAUSE"}),this.service.send({type:"PLAY",payload:{timeOffset:e}}),null===(n=null===(t=this.iframe.contentDocument)||void 0===t?void 0:t.getElementsByTagName("html")[0])||void 0===n||n.classList.remove("rrweb-paused"),this.emitter.emit(au.Start)}pause(e){var t,n;void 0===e&&this.service.state.matches("playing")&&this.service.send({type:"PAUSE"}),"number"==typeof e&&(this.play(e),this.service.send({type:"PAUSE"})),null===(n=null===(t=this.iframe.contentDocument)||void 0===t?void 0:t.getElementsByTagName("html")[0])||void 0===n||n.classList.add("rrweb-paused"),this.emitter.emit(au.Pause)}resume(e=0){this.warn("The 'resume' was deprecated in 1.0. Please use 'play' method which has the same interface."),this.play(e),this.emitter.emit(au.Resume)}destroy(){this.pause(),this.config.root.removeChild(this.wrapper),this.emitter.emit(au.Destroy)}startLive(e){this.service.send({type:"TO_LIVE",payload:{baselineTime:e}})}addEvent(e){const t=this.config.unpackFn?this.config.unpackFn(e):e;_m(t)&&this.mouse.classList.add("touch-device"),Promise.resolve().then((()=>this.service.send({type:"ADD_EVENT",payload:{event:t}})))}enableInteract(){this.iframe.setAttribute("scrolling","auto"),this.iframe.style.pointerEvents="auto"}disableInteract(){this.iframe.setAttribute("scrolling","no"),this.iframe.style.pointerEvents="none"}resetCache(){this.cache=Sd()}setupDom(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("replayer-wrapper"),this.config.root.appendChild(this.wrapper),this.mouse=document.createElement("div"),this.mouse.classList.add("replayer-mouse"),this.wrapper.appendChild(this.mouse),!1!==this.config.mouseTail&&(this.mouseTail=document.createElement("canvas"),this.mouseTail.classList.add("replayer-mouse-tail"),this.mouseTail.style.display="inherit",this.wrapper.appendChild(this.mouseTail)),this.iframe=document.createElement("iframe");const e=["allow-same-origin"];this.config.UNSAFE_replayCanvas&&e.push("allow-scripts"),this.iframe.style.display="none",this.iframe.setAttribute("sandbox",e.join(" ")),this.disableInteract(),this.wrapper.appendChild(this.iframe),this.iframe.contentWindow&&this.iframe.contentDocument&&(cm(this.iframe.contentWindow,this.iframe.contentDocument),Ud(this.iframe.contentWindow))}rebuildFullSnapshot(e,t=!1){if(!this.iframe.contentDocument)return this.warn("Looks like your replayer has been destroyed.");Object.keys(this.legacy_missingNodeRetryMap).length&&this.warn("Found unresolved missing node map",this.legacy_missingNodeRetryMap),this.legacy_missingNodeRetryMap={};const n=[],r=(e,t)=>{this.collectIframeAndAttachDocument(n,e);for(const n of this.config.plugins||[])n.onBuild&&n.onBuild(e,{id:t,replayer:this})};this.usingVirtualDom&&(this.virtualDom.destroyTree(),this.usingVirtualDom=!1),this.mirror.reset(),Td(e.data.node,{doc:this.iframe.contentDocument,afterAppend:r,cache:this.cache,mirror:this.mirror}),r(this.iframe.contentDocument,e.data.node.id);for(const{mutationInQueue:e,builtNode:t}of n)this.attachDocumentToIframe(e,t),this.newDocumentQueue=this.newDocumentQueue.filter((t=>t!==e));const{documentElement:o,head:i}=this.iframe.contentDocument;this.insertStyleRules(o,i),this.service.state.matches("playing")||this.iframe.contentDocument.getElementsByTagName("html")[0].classList.add("rrweb-paused"),this.emitter.emit(au.FullsnapshotRebuilded,e),t||this.waitForStylesheetLoad(),this.config.UNSAFE_replayCanvas&&this.preloadAllImages()}insertStyleRules(e,t){var n;const r=(o=this.config.blockClass,[`.${o} { background: currentColor }`,"noscript { display: none !important; }"]).concat(this.config.insertStyleRules);var o;if(this.config.pauseAnimation&&r.push("html.rrweb-paused *, html.rrweb-paused *:before, html.rrweb-paused *:after { animation-play-state: paused !important; }"),this.usingVirtualDom){const n=this.virtualDom.createElement("style");this.virtualDom.mirror.add(n,Qh(n,this.virtualDom.unserializedId)),e.insertBefore(n,t),n.rules.push({source:nu.StyleSheetRule,adds:r.map(((e,t)=>({rule:e,index:t})))})}else{const o=document.createElement("style");e.insertBefore(o,t);for(let e=0;e<r.length;e++)null===(n=o.sheet)||void 0===n||n.insertRule(r[e],e)}}attachDocumentToIframe(e,t){const n=this.usingVirtualDom?this.virtualDom.mirror:this.mirror,r=[],o=(e,o)=>{this.collectIframeAndAttachDocument(r,e);const i=n.getMeta(e);if((null==i?void 0:i.type)===Dl.Element&&"HTML"===(null==i?void 0:i.tagName.toUpperCase())){const{documentElement:e,head:n}=t.contentDocument;this.insertStyleRules(e,n)}if(!this.usingVirtualDom)for(const t of this.config.plugins||[])t.onBuild&&t.onBuild(e,{id:o,replayer:this})};Ed(e.node,{doc:t.contentDocument,mirror:n,hackCss:!0,skipChild:!1,afterAppend:o,cache:this.cache}),o(t.contentDocument,e.node.id);for(const{mutationInQueue:e,builtNode:t}of r)this.attachDocumentToIframe(e,t),this.newDocumentQueue=this.newDocumentQueue.filter((t=>t!==e))}collectIframeAndAttachDocument(e,t){if(Gd(t,this.mirror)){const n=this.newDocumentQueue.find((e=>e.parentId===this.mirror.getId(t)));n&&e.push({mutationInQueue:n,builtNode:t})}}waitForStylesheetLoad(){var e;const t=null===(e=this.iframe.contentDocument)||void 0===e?void 0:e.head;if(t){const e=new Set;let n,r=this.service.state;const o=()=>{r=this.service.state};this.emitter.on(au.Start,o),this.emitter.on(au.Pause,o);const i=()=>{this.emitter.off(au.Start,o),this.emitter.off(au.Pause,o)};t.querySelectorAll('link[rel="stylesheet"]').forEach((t=>{t.sheet||(e.add(t),t.addEventListener("load",(()=>{e.delete(t),0===e.size&&-1!==n&&(r.matches("playing")&&this.play(this.getCurrentTime()),this.emitter.emit(au.LoadStylesheetEnd),n&&clearTimeout(n),i())})))})),e.size>0&&(this.service.send({type:"PAUSE"}),this.emitter.emit(au.LoadStylesheetStart),n=setTimeout((()=>{r.matches("playing")&&this.play(this.getCurrentTime()),n=-1,i()}),this.config.loadTimeout))}}preloadAllImages(){return Bu(this,void 0,void 0,(function*(){this.service.state;const e=()=>{this.service.state};this.emitter.on(au.Start,e),this.emitter.on(au.Pause,e);const t=[];for(const e of this.service.state.context.events)if(e.type===tu.IncrementalSnapshot&&e.data.source===nu.CanvasMutation){t.push(this.deserializeAndPreloadCanvasEvents(e.data,e));("commands"in e.data?e.data.commands:[e.data]).forEach((t=>{this.preloadImages(t,e)}))}return Promise.all(t)}))}preloadImages(e,t){if("drawImage"===e.property&&"string"==typeof e.args[0]&&!this.imageMap.has(t)){const t=document.createElement("canvas"),n=t.getContext("2d"),r=null==n?void 0:n.createImageData(t.width,t.height);null==r||r.data,JSON.parse(e.args[0]),null==n||n.putImageData(r,0,0)}}deserializeAndPreloadCanvasEvents(e,t){return Bu(this,void 0,void 0,(function*(){if(!this.canvasEventMap.has(t)){const n={isUnchanged:!0};if("commands"in e){const r=yield Promise.all(e.commands.map((e=>Bu(this,void 0,void 0,(function*(){const t=yield Promise.all(e.args.map(Am(this.imageMap,null,n)));return Object.assign(Object.assign({},e),{args:t})})))));!1===n.isUnchanged&&this.canvasEventMap.set(t,Object.assign(Object.assign({},e),{commands:r}))}else{const r=yield Promise.all(e.args.map(Am(this.imageMap,null,n)));!1===n.isUnchanged&&this.canvasEventMap.set(t,Object.assign(Object.assign({},e),{args:r}))}}}))}applyIncremental(e,t){var n,r,o;const{data:i}=e;switch(i.source){case nu.Mutation:try{this.applyMutation(i,t)}catch(e){this.warn(`Exception in mutation ${e.message||e}`,i)}break;case nu.Drag:case nu.TouchMove:case nu.MouseMove:if(t){const e=i.positions[i.positions.length-1];this.mousePos={x:e.x,y:e.y,id:e.id,debugData:i}}else i.positions.forEach((n=>{const r={doAction:()=>{this.moveAndHover(n.x,n.y,n.id,t,i)},delay:n.timeOffset+e.timestamp-this.service.state.context.baselineTime};this.timer.addAction(r)})),this.timer.addAction({doAction(){},delay:e.delay-(null===(n=i.positions[0])||void 0===n?void 0:n.timeOffset)});break;case nu.MouseInteraction:{if(-1===i.id)break;const e=new Event(Wl(ru[i.type])),n=this.mirror.getNode(i.id);if(!n)return this.debugNodeNotFound(i,i.id);this.emitter.emit(au.MouseInteraction,{type:i.type,target:n});const{triggerFocus:r}=this.config;switch(i.type){case ru.Blur:"blur"in n&&n.blur();break;case ru.Focus:r&&n.focus&&n.focus({preventScroll:!0});break;case ru.Click:case ru.TouchStart:case ru.TouchEnd:case ru.MouseDown:case ru.MouseUp:t?(i.type===ru.TouchStart?this.touchActive=!0:i.type===ru.TouchEnd&&(this.touchActive=!1),i.type===ru.MouseDown?this.lastMouseDownEvent=[n,e]:i.type===ru.MouseUp&&(this.lastMouseDownEvent=null),this.mousePos={x:i.x,y:i.y,id:i.id,debugData:i}):(i.type===ru.TouchStart&&(this.tailPositions.length=0),this.moveAndHover(i.x,i.y,i.id,t,i),i.type===ru.Click?(this.mouse.classList.remove("active"),this.mouse.offsetWidth,this.mouse.classList.add("active")):i.type===ru.TouchStart?(this.mouse.offsetWidth,this.mouse.classList.add("touch-active")):i.type===ru.TouchEnd?this.mouse.classList.remove("touch-active"):n.dispatchEvent(e));break;case ru.TouchCancel:t?this.touchActive=!1:this.mouse.classList.remove("touch-active");break;default:n.dispatchEvent(e)}break}case nu.Scroll:if(-1===i.id)break;if(this.usingVirtualDom){const e=this.virtualDom.mirror.getNode(i.id);if(!e)return this.debugNodeNotFound(i,i.id);e.scrollData=i;break}this.applyScroll(i,t);break;case nu.ViewportResize:this.emitter.emit(au.Resize,{width:i.width,height:i.height});break;case nu.Input:if(-1===i.id)break;if(this.usingVirtualDom){const e=this.virtualDom.mirror.getNode(i.id);if(!e)return this.debugNodeNotFound(i,i.id);e.inputData=i;break}this.applyInput(i);break;case nu.MediaInteraction:{const e=this.usingVirtualDom?this.virtualDom.mirror.getNode(i.id):this.mirror.getNode(i.id);if(!e)return this.debugNodeNotFound(i,i.id);const t=e;try{void 0!==i.currentTime&&(t.currentTime=i.currentTime),void 0!==i.volume&&(t.volume=i.volume),void 0!==i.muted&&(t.muted=i.muted),1===i.type&&t.pause(),0===i.type&&t.play(),4===i.type&&(t.playbackRate=i.playbackRate)}catch(e){this.warn(`Failed to replay media interactions: ${e.message||e}`)}break}case nu.StyleSheetRule:case nu.StyleDeclaration:this.usingVirtualDom?i.styleId?this.constructedStyleMutations.push(i):i.id&&(null===(r=this.virtualDom.mirror.getNode(i.id))||void 0===r||r.rules.push(i)):this.applyStyleSheetMutation(i);break;case nu.CanvasMutation:if(!this.config.UNSAFE_replayCanvas)return;if(this.usingVirtualDom){const t=this.virtualDom.mirror.getNode(i.id);if(!t)return this.debugNodeNotFound(i,i.id);t.canvasMutations.push({event:e,mutation:i})}else{const t=this.mirror.getNode(i.id);if(!t)return this.debugNodeNotFound(i,i.id);Om({event:e,mutation:i,target:t,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})}break;case nu.Font:try{const e=new FontFace(i.family,i.buffer?new Uint8Array(JSON.parse(i.fontSource)):i.fontSource,i.descriptors);null===(o=this.iframe.contentDocument)||void 0===o||o.fonts.add(e)}catch(e){this.warn(e)}break;case nu.Selection:if(t){this.lastSelectionData=i;break}this.applySelection(i);break;case nu.AdoptedStyleSheet:this.usingVirtualDom?this.adoptedStyleSheets.push(i):this.applyAdoptedStyleSheet(i)}}applyMutation(e,t){if(this.config.useVirtualDom&&!this.usingVirtualDom&&t&&(this.usingVirtualDom=!0,Jh(this.iframe.contentDocument,this.mirror,this.virtualDom),Object.keys(this.legacy_missingNodeRetryMap).length))for(const e in this.legacy_missingNodeRetryMap)try{const t=this.legacy_missingNodeRetryMap[e],n=zh(t.node,this.virtualDom,this.mirror);n&&(t.node=n)}catch(e){this.warn(e)}const n=this.usingVirtualDom?this.virtualDom.mirror:this.mirror;e.removes=e.removes.filter((t=>!!n.getNode(t.id)||(this.warnNodeNotFound(e,t.id),!1))),e.removes.forEach((t=>{var r;const o=n.getNode(t.id);if(!o)return;let i=n.getNode(t.parentId);if(!i)return this.warnNodeNotFound(e,t.parentId);if(t.isShadow&&Zd(i)&&(i=i.shadowRoot),n.removeNodeFromMap(o),i)try{i.removeChild(o),this.usingVirtualDom&&"#text"===o.nodeName&&"STYLE"===i.nodeName&&(null===(r=i.rules)||void 0===r?void 0:r.length)>0&&(i.rules=[])}catch(t){if(!(t instanceof DOMException))throw t;this.warn("parent could not remove child in mutation",i,o,e)}}));const r=Object.assign({},this.legacy_missingNodeRetryMap),o=[],i=e=>{var t,i;if(!this.iframe.contentDocument)return this.warn("Looks like your replayer has been destroyed.");let a=n.getNode(e.parentId);if(!a)return e.node.type===Dl.Document?this.newDocumentQueue.push(e):o.push(e);e.node.isShadow&&(Zd(a)||a.attachShadow({mode:"open"}),a=a.shadowRoot);let s=null,c=null;if(e.previousId&&(s=n.getNode(e.previousId)),e.nextId&&(c=n.getNode(e.nextId)),(e=>{let t=null;return e.nextId&&(t=n.getNode(e.nextId)),null!==e.nextId&&void 0!==e.nextId&&-1!==e.nextId&&!t})(e))return o.push(e);if(e.node.rootId&&!n.getNode(e.node.rootId))return;const l=e.node.rootId?n.getNode(e.node.rootId):this.usingVirtualDom?this.virtualDom:this.iframe.contentDocument;if(Gd(a,n))return void this.attachDocumentToIframe(e,a);const d=(e,t)=>{if(!this.usingVirtualDom)for(const n of this.config.plugins||[])n.onBuild&&n.onBuild(e,{id:t,replayer:this})},u=Ed(e.node,{doc:l,mirror:n,skipChild:!0,hackCss:!0,cache:this.cache,afterAppend:d});if(-1===e.previousId||-1===e.nextId)return void(r[e.node.id]={node:u,mutation:e});const h=n.getMeta(a);if(h&&h.type===Dl.Element&&"textarea"===h.tagName&&e.node.type===Dl.Text){const e=Array.isArray(a.childNodes)?a.childNodes:Array.from(a.childNodes);for(const t of e)t.nodeType===a.TEXT_NODE&&a.removeChild(t)}else if((null==h?void 0:h.type)===Dl.Document){const n=a;e.node.type===Dl.DocumentType&&(null===(t=n.childNodes[0])||void 0===t?void 0:t.nodeType)===Node.DOCUMENT_TYPE_NODE&&n.removeChild(n.childNodes[0]),"HTML"===u.nodeName&&n.documentElement&&n.removeChild(n.documentElement)}if(s&&s.nextSibling&&s.nextSibling.parentNode?a.insertBefore(u,s.nextSibling):c&&c.parentNode?a.contains(c)?a.insertBefore(u,c):a.insertBefore(u,null):a.appendChild(u),d(u,e.node.id),this.usingVirtualDom&&"#text"===u.nodeName&&"STYLE"===a.nodeName&&(null===(i=a.rules)||void 0===i?void 0:i.length)>0&&(a.rules=[]),Gd(u,this.mirror)){const e=this.mirror.getId(u),t=this.newDocumentQueue.find((t=>t.parentId===e));t&&(this.attachDocumentToIframe(t,u),this.newDocumentQueue=this.newDocumentQueue.filter((e=>e!==t)))}(e.previousId||e.nextId)&&this.legacy_resolveMissingNode(r,a,u,e)};e.adds.forEach((e=>{i(e)}));const a=Date.now();for(;o.length;){const e=Wd(o);if(o.length=0,Date.now()-a>500){this.warn("Timeout in the loop, please check the resolve tree data:",e);break}for(const t of e){n.getNode(t.value.parentId)?Vd(t,(e=>{i(e)})):this.debug("Drop resolve tree since there is no parent for the root node.",t)}}Object.keys(r).length&&Object.assign(this.legacy_missingNodeRetryMap,r),zd(e.texts).forEach((t=>{var r;const o=n.getNode(t.id);if(!o){if(e.removes.find((e=>e.id===t.id)))return;return this.warnNodeNotFound(e,t.id)}if(o.textContent=t.value,this.usingVirtualDom){const e=o.parentNode;(null===(r=null==e?void 0:e.rules)||void 0===r?void 0:r.length)>0&&(e.rules=[])}})),e.attributes.forEach((t=>{const r=n.getNode(t.id);if(!r){if(e.removes.find((e=>e.id===t.id)))return;return this.warnNodeNotFound(e,t.id)}for(const e in t.attributes)if("string"==typeof e){const o=t.attributes[e];if(null===o)r.removeAttribute(e);else if("string"==typeof o)try{if("_cssText"===e&&("LINK"===r.nodeName||"STYLE"===r.nodeName))try{const e=n.getMeta(r);Object.assign(e.attributes,t.attributes);const o=Ed(e,{doc:r.ownerDocument,mirror:n,skipChild:!0,hackCss:!0,cache:this.cache}),i=r.nextSibling,a=r.parentNode;if(o&&a){a.removeChild(r),a.insertBefore(o,i),n.replace(t.id,o);break}}catch(e){}r.setAttribute(e,o)}catch(e){this.warn("An error occurred may due to the checkout feature.",e)}else if("style"===e){const e=o,t=r;for(const n in e)if(!1===e[n])t.style.removeProperty(n);else if(e[n]instanceof Array){const r=e[n];t.style.setProperty(n,r[0],r[1])}else{const r=e[n];t.style.setProperty(n,r)}}}}))}applyScroll(e,t){var n,r;const o=this.mirror.getNode(e.id);if(!o)return this.debugNodeNotFound(e,e.id);const i=this.mirror.getMeta(o);if(o===this.iframe.contentDocument)null===(n=this.iframe.contentWindow)||void 0===n||n.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"});else if((null==i?void 0:i.type)===Dl.Document)null===(r=o.defaultView)||void 0===r||r.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"});else try{o.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"})}catch(e){}}applyInput(e){const t=this.mirror.getNode(e.id);if(!t)return this.debugNodeNotFound(e,e.id);try{t.checked=e.isChecked,t.value=e.text}catch(e){}}applySelection(e){try{const t=new Set,n=e.ranges.map((({start:e,startOffset:n,end:r,endOffset:o})=>{const i=this.mirror.getNode(e),a=this.mirror.getNode(r);if(!i||!a)return;const s=new Range;s.setStart(i,n),s.setEnd(a,o);const c=i.ownerDocument,l=null==c?void 0:c.getSelection();return l&&t.add(l),{range:s,selection:l}}));t.forEach((e=>e.removeAllRanges())),n.forEach((e=>{var t;return e&&(null===(t=e.selection)||void 0===t?void 0:t.addRange(e.range))}))}catch(e){}}applyStyleSheetMutation(e){var t;let n=null;e.styleId?n=this.styleMirror.getStyle(e.styleId):e.id&&(n=(null===(t=this.mirror.getNode(e.id))||void 0===t?void 0:t.sheet)||null),n&&(e.source===nu.StyleSheetRule?this.applyStyleSheetRule(e,n):e.source===nu.StyleDeclaration&&this.applyStyleDeclaration(e,n))}applyStyleSheetRule(e,t){var n,r,o,i;if(null===(n=e.adds)||void 0===n||n.forEach((({rule:e,index:n})=>{try{if(Array.isArray(n)){const{positions:r,index:o}=Kd(n);Hd(t.cssRules,r).insertRule(e,o)}else{const r=void 0===n?void 0:Math.min(n,t.cssRules.length);null==t||t.insertRule(e,r)}}catch(e){}})),null===(r=e.removes)||void 0===r||r.forEach((({index:e})=>{try{if(Array.isArray(e)){const{positions:n,index:r}=Kd(e);Hd(t.cssRules,n).deleteRule(r||0)}else null==t||t.deleteRule(e)}catch(e){}})),e.replace)try{null===(o=t.replace)||void 0===o||o.call(t,e.replace)}catch(e){}if(e.replaceSync)try{null===(i=t.replaceSync)||void 0===i||i.call(t,e.replaceSync)}catch(e){}}applyStyleDeclaration(e,t){if(e.set){Hd(t.rules,e.index).style.setProperty(e.set.property,e.set.value,e.set.priority)}if(e.remove){Hd(t.rules,e.index).style.removeProperty(e.remove.property)}}applyAdoptedStyleSheet(e){var t;const n=this.mirror.getNode(e.id);if(!n)return;null===(t=e.styles)||void 0===t||t.forEach((e=>{var t;let r=null,o=null;if(Zd(n)?o=(null===(t=n.ownerDocument)||void 0===t?void 0:t.defaultView)||null:"#document"===n.nodeName&&(o=n.defaultView),o)try{r=new o.CSSStyleSheet,this.styleMirror.add(r,e.styleId),this.applyStyleSheetRule({source:nu.StyleSheetRule,adds:e.rules},r)}catch(e){}}));let r=0;const o=(e,t)=>{const n=t.map((e=>this.styleMirror.getStyle(e))).filter((e=>null!==e));Zd(e)?e.shadowRoot.adoptedStyleSheets=n:"#document"===e.nodeName&&(e.adoptedStyleSheets=n),n.length!==t.length&&r<10&&(setTimeout((()=>o(e,t)),0+100*r),r++)};o(n,e.styleIds)}legacy_resolveMissingNode(e,t,n,r){const{previousId:o,nextId:i}=r,a=o&&e[o],s=i&&e[i];if(a){const{node:r,mutation:o}=a;t.insertBefore(r,n),delete e[o.node.id],delete this.legacy_missingNodeRetryMap[o.node.id],(o.previousId||o.nextId)&&this.legacy_resolveMissingNode(e,t,r,o)}if(s){const{node:r,mutation:o}=s;t.insertBefore(r,n.nextSibling),delete e[o.node.id],delete this.legacy_missingNodeRetryMap[o.node.id],(o.previousId||o.nextId)&&this.legacy_resolveMissingNode(e,t,r,o)}}moveAndHover(e,t,n,r,o){const i=this.mirror.getNode(n);if(!i)return this.debugNodeNotFound(o,n);const a=Yd(i,this.iframe),s=e*a.absoluteScale+a.x,c=t*a.absoluteScale+a.y;this.mouse.style.left=`${s}px`,this.mouse.style.top=`${c}px`,r||this.drawMouseTail({x:s,y:c}),this.hoverElements(i)}drawMouseTail(e){if(!this.mouseTail)return;const{lineCap:t,lineWidth:n,strokeStyle:r,duration:o}=!0===this.config.mouseTail?km:Object.assign({},km,this.config.mouseTail),i=()=>{if(!this.mouseTail)return;const e=this.mouseTail.getContext("2d");e&&this.tailPositions.length&&(e.clearRect(0,0,this.mouseTail.width,this.mouseTail.height),e.beginPath(),e.lineWidth=n,e.lineCap=t,e.strokeStyle=r,e.moveTo(this.tailPositions[0].x,this.tailPositions[0].y),this.tailPositions.forEach((t=>e.lineTo(t.x,t.y))),e.stroke())};this.tailPositions.push(e),i(),setTimeout((()=>{this.tailPositions=this.tailPositions.filter((t=>t!==e)),i()}),o/this.speedService.state.context.timer.speed)}hoverElements(e){var t;null===(t=this.lastHoveredRootNode||this.iframe.contentDocument)||void 0===t||t.querySelectorAll(".\\:hover").forEach((e=>{e.classList.remove(":hover")})),this.lastHoveredRootNode=e.getRootNode();let n=e;for(;n;)n.classList&&n.classList.add(":hover"),n=n.parentElement}isUserInteraction(e){return e.type===tu.IncrementalSnapshot&&(e.data.source>nu.Mutation&&e.data.source<=nu.Input)}backToNormal(){this.nextUserInteractionEvent=null,this.speedService.state.matches("normal")||(this.speedService.send({type:"BACK_TO_NORMAL"}),this.emitter.emit(au.SkipEnd,{speed:this.speedService.state.context.normalSpeed}))}warnNodeNotFound(e,t){this.warn(`Node with id '${t}' not found. `,e)}warnCanvasMutationFailed(e,t){this.warn("Has error on canvas update",t,"canvas mutation:",e)}debugNodeNotFound(e,t){this.debug(`Node with id '${t}' not found. `,e)}warn(...e){this.config.showWarning&&this.config.logger.warn(Rm,...e)}debug(...e){this.config.showDebug&&this.config.logger.log(Rm,...e)}},ReplayerEvents:au,addCustomEvent:qh,freezePage:$h,getRecordConsolePlugin:e=>({name:tm,observer:em,options:e}),getReplayConsolePlugin:e=>{const t=(null==e?void 0:e.replayLogger)||new om(e).getConsoleLogger();return{handler(e,n,r){let o=null;if(e.type===tu.IncrementalSnapshot&&e.data.source===nu.Log?o=e.data:e.type===tu.Plugin&&e.data.plugin===tm&&(o=e.data.payload),o)try{"function"==typeof t[o.level]&&t[o.level](o)}catch(e){r.replayer.config.showWarning&&console.warn(e)}}}},get mirror(){return Ad},pack:e=>{const t=Object.assign(Object.assign({},e),{v:jp});return Gp(Up(Vp(JSON.stringify(t))),!0)},record:dh,unpack:e=>{if("string"!=typeof e)return e;try{const t=JSON.parse(e);if(t.timestamp)return t}catch(e){}try{const t=JSON.parse(Gp(Wp(Vp(e,!0))));if(t.v===jp)return t;throw new Error(`These events were packed with packer ${t.v} which is incompatible with current packer ${jp}.`)}catch(e){throw console.error(e),new Error("Unknown data format.")}},utils:eu}),Lm=t(xm);const{supportsLocalStorageApi:Fm}=i,{clearMetric:Bm,checkMetric:Pm,getMetric:Um,appendMetric:Wm,trackMetric:Vm}=yn,Gm=()=>({data:[],expireTime:0}),jm=e=>{Fm()?window.localStorage.removeItem(e):Bm(e)},Ym=(e,t=null)=>{if(!Fm())return Um(e,t);const n=JSON.parse(window.localStorage.getItem(e));return n?n.expireTime<=Date.now()?(jm(e),t):n.data:t};var Zm={clearBuffer:jm,checkBuffer:e=>Fm()?!!window.localStorage.getItem(e):Pm(e),getBuffer:Ym,appendToBuffer:(e,t,n=0)=>{if(!Fm())return void Wm(e,t);const r=Ym(e,{data:[],expireTime:0});r.data.push(t),r.expireTime=Date.now()+n,window.localStorage.setItem(e,JSON.stringify(r))},getBufferSchema:Gm,addToBuffer:(e,t,n=0)=>{if(!Fm())return void Vm(e,t);const r=Ym(e,{data:[],expireTime:0});r.data=t,r.expireTime=Date.now()+n,window.localStorage.setItem(e,JSON.stringify(r))}};const{getMetric:Hm,clearMetric:Km,appendMetric:zm,checkMetric:Jm}=yn,{sendWithFetch:Xm}=Jt,{getUserId:Qm,getPath:qm}=gl,{prepareDeviceType:$m}=ze,{endpoint:ef,PAYLOAD_SIZE:tf,MAX_MLDATA_WAITING_TIME:nf,MAX_CHUNKS_SIZE:rf,MAX_FLUSH_TIME:of,CHUNKS_EXPIRATION_TIME:af}=b,{SESSION_ID:sf,REQUEST_ID:cf,APP_NAME:lf,SCOPE_NAME:df,USER_AGENT:uf,DEVICE:hf,WEBVIEW:pf,CUSTOM_ATTRIBUTES:mf,TRACEABILITY_ID:ff,SESSION_REPLAY:gf,SITE_ID:vf}=O,{objectOperator:yf}=p,{addToBuffer:If,getBuffer:Sf,clearBuffer:Cf}=Zm,Ef={flushTime:of,size:rf,limit:tf,maxAge:af,isFirstRun:!0};let Tf=null;const bf=()=>({session_id:Hm(sf),view_id:Hm(cf),app_name:Hm(lf),fury_context_name:Hm(df)}),wf=["mla","mlb","mlm"],Af=()=>{const e=(Hm(vf)||"").toLowerCase();return wf.some((t=>t===e))?e:"rola"},Nf=()=>{const e=Hm(mf);let t=null,n=null;return e&&(t=e,e.userId&&(n=e.userId)),{metadataPayload:t,fallbackUserId:n}},Mf=(e,t)=>{const{metadataPayload:n,fallbackUserId:r}=Nf(),o=yf([{},e,{device_timestamp:Date.now(),user_id:Qm(r),view_name:qm(),mime_type:"application/json",asset:t,metadata:n}]),i=Hm(ff);i&&(o.traceability_id=i);const a=$m({[uf]:Hm(uf)},{device:Hm(hf),webview:Hm(pf)});return a&&(o.device_platform=`/${a}`),{data:o}},Of=(e,t=!0)=>{const n=Hm(e);return t&&(clearTimeout(Tf),Km(e)),n},Df={hasReached:!1,ref:null},Rf=()=>{if(Df.hasReached)return!0;const e=void 0===window.melidata||window.melidata_namespace&&window.melidata_namespace.actual_track&&Object.keys(window.melidata_namespace.actual_track).length>0;return e&&Df.ref&&clearTimeout(Df.ref),!!e||(Df.hasReached||Df.ref||(Df.ref=setTimeout((()=>{Df.hasReached=!0}),nf)),!1)},kf=e=>{if(!Rf())return;const t=bf(),n=Of(e);if(!n||!t)return;const r=Mf(t,n);Xm(`${ef(Af())}`,JSON.stringify(r),!1)},_f=(e,t)=>{zm(e,t),(e=>{const t=Hm(e);(JSON.stringify(t).length>=Ef.limit||t.length>=Ef.size)&&kf(e)})(e)},xf=()=>{const{payload:e,url:t}=Sf(gf,{payload:null,url:null});e&&(Cf(gf),Xm(`${t}`,JSON.stringify(e),!1))},Lf=(e,t)=>{Ef.isFirstRun&&(xf(),Ef.isFirstRun=!1),zm(e,t),(e=>{Tf=setTimeout((()=>{kf(e)}),Ef.flushTime)})(e)};var Ff={monitor:(e,t)=>{Jm(e)?_f(e,t):Lf(e,t)},send:kf,savePending:()=>{const e=bf(),t=Of(gf);if(!t||!e)return;const n=Mf(e,t),r=ef(Af());If(gf,{payload:n,url:r},Ef.maxAge)},sendPending:xf,processMetadata:Nf};const{SESSION_REPLAY:Bf}=l,Pf=M,{WINDOW_DOM:Uf,WINDOW_WIDTH:Wf,WINDOW_HEIGHT:Vf,RAM_SIZE:Gf,CPU_CORES:jf,USER_AGENT:Yf,DARK_MODE:Zf,REDUCED_MOTION:Hf,REDUCED_COLOR:Kf,APP_NAME:zf,SCOPE_NAME:Jf,DEVICE:Xf,PLATFORM_ID:Qf,SITE_ID:qf,WEBVIEW:$f,REQUEST_ID:eg,VIEW_NAME:tg}=O,ng=[Uf,Wf,Vf,Gf,jf,Yf,Zf,Hf,Kf,URL,zf,Jf,Xf,Qf,qf,$f,eg,tg];var rg=(e,t)=>{const n=Pf(t,ng);if(!Object.keys(n).length)throw new Error("Metrics not found");return{name:Bf,data:n}};const og=Lm,{SESSION_REPLAY:ig,CUSTOM_ATTRIBUTES:ag,SESSION_REPLAY_START:sg,SESSION_REPLAY_STOP:cg,TRACEABILITY_ID:lg}=O,{RRWEB_EVENT_TYPES:dg}=b,{monitor:ug}=Ff,hg=rg,{getMetricsCollected:pg,trackMetric:mg}=yn,{objectOperator:fg}=p,{subscribe:gg}=c;let vg=null;const yg=(e={},t=null)=>{t&&mg(lg,t),Object.keys(e).length&&mg(ag,e),vg=og.record({emit:e=>{if(e.type===dg.Meta){const t=hg(null,pg());e.data=fg([{},t.data,e.data])}ug(ig,e)},inlineStylesheet:!0,maskTextClass:/(ml-mask|rr-mask|nav-header-username|user-badge-title|payment-card-component)/,blockClass:/(ml-block|rr-block)/,maskInputOptions:{date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}})},Ig=()=>vg&&vg();var Sg=()=>{gg(sg,((e={})=>{yg(e.metadata||{},e.traceability_id||null)})),gg(cg,(()=>{Ig()})),window.startRecording=(e={},t=null)=>yg(e,t),window.stopRecording=()=>Ig()};const{savePending:Cg,sendPending:Eg}=Ff,Tg=window.requestIdleCallback||(e=>setTimeout(e,200)),bg="sessionReplayEvent",wg=()=>{window.document.addEventListener(bg,(async()=>{"hidden"===window.document.visibilityState&&Cg(),"visible"===window.document.visibilityState&&Eg()})),window.document.addEventListener("visibilitychange",(()=>{const e=new window.Event(bg);window.document.dispatchEvent(e)}))};var Ag=()=>{Tg((()=>wg()))};const Ng=En,Mg=Mn,{prepareConfiguration:Og}=Pe,Dg=bi,Rg=Rl,kg=Sg,_g=Pi,xg=Ag,{supportsBeaconOrFetch:Lg}=i;var Fg={start:e=>{const t=Og(e);if(t)try{Lg()&&(Ng(),Mg(),Dg(),_g(),Rg(t),kg(),xg())}catch(e){}}};const{WEB_VITALS:Bg,RESOURCE_TIMING:Pg,CLIENT_COOKIES:Ug,PAGE_RENDER:Wg,A11Y:Vg,AVAILABILITY:Gg,CDN_HEALTH:jg,TRAFFIC_HEALTH:Yg,SESSION_REPLAY:Zg}=l,Hg=Ji,Kg=ga,zg=Fa,Jg=es,Xg=Ys,Qg=wc,qg=il,$g=ul,ev=Fg;var tv={[Bg]:Hg,[Pg]:Kg,[Ug]:zg,[Wg]:Jg,[Vg]:Xg,[Gg]:Qg,[jg]:qg,[Yg]:$g,[Zg]:ev};const{supportsEnvironment:nv}=i,{queue:rv}=c,{agentKey:ov}={agentKey:"_perfill"},iv=tv,av={},sv=()=>(av.initiatives||[]).forEach((e=>{e&&e.id&&iv[e.id]&&iv[e.id].start(av,e)})),cv=()=>{window.requestIdleCallback?window.requestIdleCallback(sv,{timeout:2e3}):setTimeout(sv,500)};let lv=!1;const dv={set:(e,t)=>{av[e]=t},queue:rv,send:e=>{e in dv&&dv[e]()},start:()=>{!lv&&nv()&&(lv=!0,"complete"===window.document.readyState?cv():window.addEventListener("load",cv))}},uv=e=>{try{const t=e[0],n=dv[t];t&&n&&n.apply(null,[].slice.call(e,1))}catch(e){}};return e((()=>{const e=(window[ov]||{}).q||[];window[ov]=(...e)=>uv(e);try{e.forEach(uv)}catch(e){}})())}();
//# sourceMappingURL=perfill-agent.min.js.map
